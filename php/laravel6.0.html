<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vuepress</title>
    <meta name="description" content="vuepress">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/vuepress/assets/css/0.styles.68cb6b73.css" as="style"><link rel="preload" href="/vuepress/assets/js/app.67f1280c.js" as="script"><link rel="preload" href="/vuepress/assets/js/4.ebb0aeeb.js" as="script"><link rel="preload" href="/vuepress/assets/js/12.28c97dd9.js" as="script"><link rel="prefetch" href="/vuepress/assets/js/10.dd2505e2.js"><link rel="prefetch" href="/vuepress/assets/js/11.a474b960.js"><link rel="prefetch" href="/vuepress/assets/js/13.9b5ad5a4.js"><link rel="prefetch" href="/vuepress/assets/js/14.bd7637ce.js"><link rel="prefetch" href="/vuepress/assets/js/15.108df4ad.js"><link rel="prefetch" href="/vuepress/assets/js/16.ad40c6e2.js"><link rel="prefetch" href="/vuepress/assets/js/2.0752e350.js"><link rel="prefetch" href="/vuepress/assets/js/3.9e344db5.js"><link rel="prefetch" href="/vuepress/assets/js/5.c6e2e188.js"><link rel="prefetch" href="/vuepress/assets/js/6.06450133.js"><link rel="prefetch" href="/vuepress/assets/js/7.83649180.js"><link rel="prefetch" href="/vuepress/assets/js/8.450dbaa3.js"><link rel="prefetch" href="/vuepress/assets/js/9.99ebe225.js">
    <link rel="stylesheet" href="/vuepress/assets/css/0.styles.68cb6b73.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div class="content__default"><h2 id="laravel-速查表-6-0">Laravel 速查表 6.0</h2> <div class="card"><div class="card-box"><p class="title">Artisan</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 针对命令显示帮助信息</span>
php artisan <span class="token operator">--</span>help <span class="token keyword">OR</span> <span class="token operator">-</span>h
<span class="token comment">// 抑制输出信息</span>
php artisan <span class="token operator">--</span>quiet <span class="token keyword">OR</span> <span class="token operator">-</span>q
<span class="token comment">// 打印 Laravel 的版本信息</span>
php artisan <span class="token operator">--</span>version <span class="token keyword">OR</span> <span class="token operator">-</span><span class="token constant">V</span>
<span class="token comment">// 不询问任何交互性的问题</span>
php artisan <span class="token operator">--</span>no<span class="token operator">-</span>interaction <span class="token keyword">OR</span> <span class="token operator">-</span>n
<span class="token comment">// 强制输出 ANSI 格式</span>
php artisan <span class="token operator">--</span>ansi
<span class="token comment">// 禁止输出 ANSI 格式</span>
php artisan <span class="token operator">--</span>no<span class="token operator">-</span>ansi
<span class="token comment">// 显示当前命令行运行的环境</span>
php artisan <span class="token operator">--</span>env
<span class="token comment">// -v|vv|vvv 通过增加 v 的个数来控制命令行输出内容的详尽情况: 1 个代表正常输出, 2 个代表输出更多消息, 3 个代表调试</span>
php artisan <span class="token operator">--</span>verbose
<span class="token comment">// 移除编译优化过的文件 (storage/frameworks/compiled.php)</span>
php artisan clear<span class="token operator">-</span>compiled
<span class="token comment">// 显示当前框架运行的环境</span>
php artisan env
<span class="token comment">// 显示某个命令的帮助信息</span>
php artisan help
<span class="token comment">// 显示所有可用的命令</span>
php artisan <span class="token keyword">list</span>
<span class="token comment">// 进入应用交互模式</span>
php artisan tinker
<span class="token comment">// 配合 dump() 函数调试数据</span>
php artisan dump<span class="token operator">-</span>server
<span class="token comment">// 进入维护模式</span>
php artisan down
<span class="token comment">// 退出维护模式</span>
php artisan up
<span class="token comment">// 优化框架性能</span>
 <span class="token comment">// --force    强制编译已写入文件 (storage/frameworks/compiled.php)</span>
 <span class="token comment">// --psr      不对 Composer 的 dump-autoload 进行优化</span>
php artisan optimize <span class="token punctuation">[</span><span class="token operator">--</span>force<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>psr<span class="token punctuation">]</span>
<span class="token comment">// 更改前端预设</span>
<span class="token comment">// type_name (可以是 none, bootstrap, vue, react)</span>
php artisan preset <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span><span class="token punctuation">]</span> type_name
<span class="token comment">// 启动内置服务器</span>
php artisan serve
<span class="token comment">// 更改默认端口</span>
php artisan serve <span class="token operator">--</span>port <span class="token number">8080</span>
<span class="token comment">// 使其在本地服务器外也可正常工作</span>
php artisan serve <span class="token operator">--</span>host <span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span>
<span class="token comment">// 更改应用命名空间</span>
php artisan app<span class="token punctuation">:</span>name <span class="token keyword">namespace</span>
<span class="token comment">// 清除过期的密码重置令牌</span>
php artisan auth<span class="token punctuation">:</span>clear<span class="token operator">-</span>resets

<span class="token comment">// 清空应用缓存</span>
php artisan cache<span class="token punctuation">:</span>clear
<span class="token comment">// 移除 key_name 对应的缓存</span>
php artisan cache<span class="token punctuation">:</span>forget key_name <span class="token punctuation">[</span><span class="token operator">&lt;</span>store<span class="token operator">&gt;</span><span class="token punctuation">]</span>
<span class="token comment">// 创建缓存数据库表 migration</span>
php artisan cache<span class="token punctuation">:</span>table

<span class="token comment">// 合并所有的配置信息为一个，提高加载速度</span>
php artisan config<span class="token punctuation">:</span>cache
<span class="token comment">// 移除配置缓存文件</span>
php artisan config<span class="token punctuation">:</span>clear

<span class="token comment">// 程序内部调用 Artisan 命令</span>
<span class="token variable">$exitCode</span> <span class="token operator">=</span> Artisan<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'config:cache'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 运行所有的 seed 假数据生成类</span>
 <span class="token comment">// --class      可以指定运行的类，默认是: &quot;DatabaseSeeder&quot;</span>
 <span class="token comment">// --database   可以指定数据库</span>
 <span class="token comment">// --force      当处于生产环境时强制执行操作</span>
php artisan db<span class="token punctuation">:</span>seed <span class="token punctuation">[</span><span class="token operator">--</span><span class="token keyword">class</span><span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>database<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>force<span class="token punctuation">]</span>

<span class="token comment">// 基于注册的信息，生成遗漏的 events 和 handlers</span>
php artisan event<span class="token punctuation">:</span>generate
<span class="token comment">// 罗列所有事件和监听器</span>
php artisan event<span class="token punctuation">:</span><span class="token keyword">list</span>
<span class="token comment">// 缓存事件和监听器</span>
php artisan event<span class="token punctuation">:</span>cache
<span class="token comment">// 清除事件和监听器缓存</span>
php artisan event<span class="token punctuation">:</span>clear

<span class="token comment">// 生成新的处理器类</span>
 <span class="token comment">// --command      需要处理器处理的命令类名字</span>
php artisan handler<span class="token punctuation">:</span>command <span class="token punctuation">[</span><span class="token operator">--</span>command<span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span> name
<span class="token comment">// 创建一个新的时间处理器类</span>
 <span class="token comment">// --event        需要处理器处理的事件类名字</span>
 <span class="token comment">// --queued       需要处理器使用队列话处理的事件类名字</span>
php artisan handler<span class="token punctuation">:</span>event <span class="token punctuation">[</span><span class="token operator">--</span>event<span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>queued<span class="token punctuation">]</span> name

<span class="token comment">// 生成应用的 key（会覆盖）</span>
php artisan key<span class="token punctuation">:</span>generate

<span class="token comment">// 发布本地化翻译文件到 resources 文件下</span>
<span class="token comment">// locales: 逗号分隔，如 zh_CN,tk,th [默认是: &quot;all&quot;]</span>
php artisan lang<span class="token punctuation">:</span>publish <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>locales<span class="token operator">&gt;</span><span class="token punctuation">]</span>

<span class="token comment">// 创建用户认证脚手架</span>
php artisan make<span class="token punctuation">:</span>auth
<span class="token comment">// 创建 Channel 类</span>
php artisan make<span class="token punctuation">:</span>channel name
<span class="token comment">// 在默认情况下, 这将创建未加入队列的自处理命令</span>
 <span class="token comment">// 通过 --handler 标识来生成一个处理器, 用 --queued 来使其入队列.</span>
php artisan make<span class="token punctuation">:</span>command <span class="token punctuation">[</span><span class="token operator">--</span>handler<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>queued<span class="token punctuation">]</span> name
<span class="token comment">// 创建一个新的 Artisan 命令</span>
 <span class="token comment">//  --command     命令被调用的名称。 (默认为: &quot;command:name&quot;)</span>
php artisan make<span class="token punctuation">:</span>console <span class="token punctuation">[</span><span class="token operator">--</span>command<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> name
<span class="token comment">// 创建一个新的资源控制器</span>
 <span class="token comment">// --plain      生成一个空白的控制器类</span>
php artisan make<span class="token punctuation">:</span>controller <span class="token punctuation">[</span><span class="token operator">--</span>plain<span class="token punctuation">]</span> name
php artisan make<span class="token punctuation">:</span>controller App\<span class="token package"><span class="token punctuation">\</span>Admin<span class="token punctuation">\</span><span class="token punctuation">\</span>Http<span class="token punctuation">\</span><span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span><span class="token punctuation">\</span>DashboardController</span>
<span class="token comment">// 创建一个新的事件类</span>
php artisan make<span class="token punctuation">:</span>event name
<span class="token comment">// 创建异常类</span>
php artisan make<span class="token punctuation">:</span>exception name
<span class="token comment">// 创建模型工厂类</span>
php artisan make<span class="token punctuation">:</span>factory name
<span class="token comment">// 创建一个队列任务文件</span>
php artisan make<span class="token punctuation">:</span>job 
<span class="token comment">// 创建一个监听者类</span>
php artisan make<span class="token punctuation">:</span>listener name
<span class="token comment">// 创建一个新的邮件类</span>
php artisan make<span class="token punctuation">:</span>mail name
<span class="token comment">// 创建一个新的中间件类</span>
php artisan make<span class="token punctuation">:</span>middleware name
<span class="token comment">// 创建一个新的迁移文件</span>
 <span class="token comment">// --create     将被创建的数据表.</span>
 <span class="token comment">// --table      将被迁移的数据表.</span>
php artisan make<span class="token punctuation">:</span>migration <span class="token punctuation">[</span><span class="token operator">--</span>create<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>table<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> name
<span class="token comment">// 创建一个新的 Eloquent 模型类</span>
php artisan make<span class="token punctuation">:</span>model User
php artisan make<span class="token punctuation">:</span>model Models<span class="token operator">/</span>User
<span class="token comment">// 新建一个消息通知类</span>
php artisan make<span class="token punctuation">:</span>notification TopicRepliedNotification
<span class="token comment">// 新建一个模型观察者类</span>
php artisan make<span class="token punctuation">:</span>observer UserObserver
<span class="token comment">// 创建授权策略</span>
php artisan make<span class="token punctuation">:</span>policy PostPolicy
<span class="token comment">// 创建一个新的服务提供者类</span>
php artisan make<span class="token punctuation">:</span>provider name
<span class="token comment">// 创建一个新的表单请求类</span>
php artisan make<span class="token punctuation">:</span>request name
<span class="token comment">// 创建一个 API 资源类</span>
php artisan make<span class="token punctuation">:</span>resource name
<span class="token comment">// 新建验证规则类</span>
php artisan make<span class="token punctuation">:</span>rule name
<span class="token comment">// 创建模型脚手架</span>
<span class="token comment">// &lt;name&gt; 模型名称，如 Post</span>
<span class="token comment">// -s, --schema=SCHEMA 表结构如：--schema=&quot;title:string&quot;</span>
<span class="token comment">// -a, --validator[=VALIDATOR] 表单验证，如：--validator=&quot;title:required&quot;</span>
<span class="token comment">// -l, --localization[=LOCALIZATION] 设置本地化信息，如：--localization=&quot;key:value&quot;</span>
<span class="token comment">// -b, --lang[=LANG] 设置本地化语言 --lang=&quot;en&quot;</span>
<span class="token comment">// -f, --form[=FORM] 使用 Illumintate/Html Form 来生成表单选项，默认为 false</span>
<span class="token comment">// -p, --prefix[=PREFIX] 表结构前缀，默认 false</span>
php artisan make<span class="token punctuation">:</span>scaffold  <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>
<span class="token comment">// 生成数据填充类</span>
php artisan make<span class="token punctuation">:</span>seeder
<span class="token comment">// 生成测试类</span>
php artisan make<span class="token punctuation">:</span>test

<span class="token comment">// 数据库迁移</span>
 <span class="token comment">// --database   指定数据库连接（下同）</span>
 <span class="token comment">// --force      当处于生产环境时强制执行，不询问（下同）</span>
 <span class="token comment">// --path       指定单独迁移文件地址</span>
 <span class="token comment">// --pretend    把将要运行的 SQL 语句打印出来（下同）</span>
 <span class="token comment">// --seed       Seed 任务是否需要被重新运行（下同）</span>
php artisan migrate <span class="token punctuation">[</span><span class="token operator">--</span>database<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>force<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>path<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>pretend<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>seed<span class="token punctuation">]</span>
<span class="token comment">// 创建迁移数据库表</span>
php artisan migrate<span class="token punctuation">:</span>install <span class="token punctuation">[</span><span class="token operator">--</span>database<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token comment">// Drop 所有数据表并重新运行 Migration</span>
php artisan migrate<span class="token punctuation">:</span>fresh
<span class="token comment">// 重置并重新运行所有的 migrations</span>
 <span class="token comment">// --seeder     指定主 Seeder 的类名</span>
php artisan migrate<span class="token punctuation">:</span>refresh <span class="token punctuation">[</span><span class="token operator">--</span>database<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>force<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>seed<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>seeder<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token comment">// 回滚所有的数据库迁移</span>
php artisan migrate<span class="token punctuation">:</span>reset <span class="token punctuation">[</span><span class="token operator">--</span>database<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>force<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>pretend<span class="token punctuation">]</span>
<span class="token comment">// 回滚最最近一次运行的迁移任务</span>
php artisan migrate<span class="token punctuation">:</span>rollback <span class="token punctuation">[</span><span class="token operator">--</span>database<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>force<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>pretend<span class="token punctuation">]</span>
<span class="token comment">// migrations 数据库表信息</span>
php artisan migrate<span class="token punctuation">:</span>status

<span class="token comment">// 为数据库消息通知创建一个表迁移类</span>
php artisan notifications<span class="token punctuation">:</span>table
<span class="token comment">// 清除缓存的 bootstrap 文件</span>
php artisan optimize<span class="token punctuation">:</span>clear
<span class="token comment">// 扩展包自动发现</span>
php artisan package<span class="token punctuation">:</span>discover

<span class="token comment">// 为队列数据库表创建一个新的迁移</span>
php artisan queue<span class="token punctuation">:</span>table
<span class="token comment">// 监听指定的队列</span>
 <span class="token comment">// --queue      被监听的队列</span>
 <span class="token comment">// --delay      给执行失败的任务设置延时时间 (默认为零: 0)</span>
 <span class="token comment">// --memory     内存限制大小，单位为 MB (默认为: 128)</span>
 <span class="token comment">// --timeout    指定任务运行超时秒数 (默认为: 60)</span>
 <span class="token comment">// --sleep      等待检查队列任务的秒数 (默认为: 3)</span>
 <span class="token comment">// --tries      任务记录失败重试次数 (默认为: 0)</span>
php artisan queue<span class="token punctuation">:</span>listen <span class="token punctuation">[</span><span class="token operator">--</span>queue<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>delay<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>memory<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>timeout<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>sleep<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>tries<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>connection<span class="token punctuation">]</span>
<span class="token comment">// 查看所有执行失败的队列任务</span>
php artisan queue<span class="token punctuation">:</span>failed
<span class="token comment">// 为执行失败的数据表任务创建一个迁移</span>
php artisan queue<span class="token punctuation">:</span>failed<span class="token operator">-</span>table
<span class="token comment">// 清除所有执行失败的队列任务</span>
php artisan queue<span class="token punctuation">:</span>flush
<span class="token comment">// 删除一个执行失败的队列任务</span>
php artisan queue<span class="token punctuation">:</span>forget
<span class="token comment">// 在当前的队列任务执行完毕后, 重启队列的守护进程</span>
php artisan queue<span class="token punctuation">:</span>restart
<span class="token comment">// 对指定 id 的执行失败的队列任务进行重试(id: 失败队列任务的 ID)</span>
php artisan queue<span class="token punctuation">:</span>retry id
<span class="token comment">// 指定订阅 Iron.io 队列的链接</span>
 <span class="token comment">// queue: Iron.io 的队列名称.</span>
 <span class="token comment">// url: 将被订阅的 URL.</span>
 <span class="token comment">// --type       指定队列的推送类型.</span>
php artisan queue<span class="token punctuation">:</span>subscribe <span class="token punctuation">[</span><span class="token operator">--</span>type<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> queue url
<span class="token comment">// 处理下一个队列任务</span>
 <span class="token comment">// --queue      被监听的队列</span>
 <span class="token comment">// --daemon     在后台模式运行</span>
 <span class="token comment">// --delay      给执行失败的任务设置延时时间 (默认为零: 0)</span>
 <span class="token comment">// --force      强制在「维护模式下」运行</span>
 <span class="token comment">// --memory     内存限制大小，单位为 MB (默认为: 128)</span>
 <span class="token comment">// --sleep      当没有任务处于有效状态时, 设置其进入休眠的秒数 (默认为: 3)</span>
 <span class="token comment">// --tries      任务记录失败重试次数 (默认为: 0)</span>
php artisan queue<span class="token punctuation">:</span>work <span class="token punctuation">[</span><span class="token operator">--</span>queue<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>daemon<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>delay<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>force<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>memory<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>sleep<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>tries<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>connection<span class="token punctuation">]</span>

<span class="token comment">// 生成路由缓存文件来提升路由效率</span>
php artisan route<span class="token punctuation">:</span>cache
<span class="token comment">// 移除路由缓存文件</span>
php artisan route<span class="token punctuation">:</span>clear
<span class="token comment">// 显示已注册过的路由</span>
php artisan route<span class="token punctuation">:</span><span class="token keyword">list</span>

<span class="token comment">// 运行计划命令</span>
php artisan schedule<span class="token punctuation">:</span>run

<span class="token comment">// 为 session 数据表生成迁移文件</span>
php artisan session<span class="token punctuation">:</span>table
<span class="token comment">// 创建 &quot;public/storage&quot; 到 &quot;storage/app/public&quot; 的软链接</span>
php artisan storage<span class="token punctuation">:</span>link

<span class="token comment">// 从 vendor 的扩展包中发布任何可发布的资源</span>
 <span class="token comment">// --force        重写所有已存在的文件</span>
 <span class="token comment">// --provider     指定你想要发布资源文件的服务提供者</span>
 <span class="token comment">// --tag          指定你想要发布标记资源.</span>
php artisan vendor<span class="token punctuation">:</span>publish <span class="token punctuation">[</span><span class="token operator">--</span>force<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>provider<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>tag<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
php artisan tail <span class="token punctuation">[</span><span class="token operator">--</span>path<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span>lines<span class="token punctuation">[</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;...&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>connection<span class="token punctuation">]</span>

<span class="token comment">// 缓存视图文件以提高效率</span>
php artisan view<span class="token punctuation">:</span>cache
<span class="token comment">// 清除视图文件缓存</span>
php artisan view<span class="token punctuation">:</span>clear
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Pagination</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 自动处理分页逻辑</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">paginate</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cars'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">paginate</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用简单模板 - 只有 &quot;上一页&quot; 或 &quot;下一页&quot; 链接</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cars'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">simplePaginate</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 手动分页</span>
Paginator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$items</span><span class="token punctuation">,</span> <span class="token variable">$totalItems</span><span class="token punctuation">,</span> <span class="token variable">$perPage</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在页面打印分页导航栏</span>
<span class="token variable">$variable</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">links</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取当前页数据数量。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 获取当前页页码。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">currentPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 获取结果集中第一条数据的结果编号。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">firstItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 获取分页器选项。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 创建分页 URL 范围。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getUrlRange</span><span class="token punctuation">(</span><span class="token variable">$start</span><span class="token punctuation">,</span> <span class="token variable">$end</span><span class="token punctuation">)</span>
<span class="token comment">// 是否有多页。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasMorePages</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 获取结果集中最后一条数据的结果编号。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">lastItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 获取最后一页的页码（在 `simplePaginate` 中无效）。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">lastPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 获取下一页的 URL 。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">nextPageUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 当前而是否为第一页。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onFirstPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 每页的数据条数。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">perPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 获取前一页的 URL。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">previousPageUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 数据总数（在 `simplePaginate` 无效）。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">total</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 获取指定页的 URL。</span>
<span class="token variable">$results</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token variable">$page</span><span class="token punctuation">)</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Lang</p><div class="language-php extra-class"><pre class="language-php"><code>App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setLocale</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'en'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Lang<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'messages.welcome'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Lang<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'messages.welcome'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Bar'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Lang<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'messages.welcome'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Lang<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">choice</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'messages.apples'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Lang::get 的别名</span>
<span class="token function">trans</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'messages.welcome'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Lang::choice 的别名</span>
<span class="token function">trans_choice</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'messages.apples'</span><span class="token punctuation">,</span>  <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment">// 辅助函数</span>
<span class="token function">__</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'messages.welcome'</span><span class="token punctuation">)</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">File</p><div class="language-php extra-class"><pre class="language-php"><code>File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$lock</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 加锁读取文件内容</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">sharedGet</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取文件内容，不存在会抛出 FileNotFoundException 异常</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getRequire</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取文件内容, 仅能引入一次</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">requireOnce</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 生成文件路径的 MD5 哈希</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">hash</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将内容写入文件</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$contents</span><span class="token punctuation">,</span> <span class="token variable">$lock</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 写入文件，存在的话覆盖写入</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$content</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将内容添加在文件原内容前面</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将内容添加在文件原内容后</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 修改路径权限</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">chmod</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过给定的路径来删除文件</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token variable">$paths</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将文件移动到新目录下</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$target</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将文件复制到新目录下</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$target</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建硬连接</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">link</span><span class="token punctuation">(</span><span class="token variable">$target</span><span class="token punctuation">,</span> <span class="token variable">$link</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从文件路径中提取文件名，不包含后缀</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从文件路径中提取文件名，包含后缀</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取文件路径名称</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dirname</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从文件的路径地址提取文件的扩展</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取文件类型</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取文件 MIME 类型</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">mimeType</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取文件大小</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取文件的最后修改时间</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">lastModified</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断给定的路径是否是文件目录</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断给定的路径是否是可读取</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">isReadable</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断给定的路径是否是可写入的</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">isWritable</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断给定的路径是否是文件</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token variable">$file</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 查找能被匹配到的路径名</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">glob</span><span class="token punctuation">(</span><span class="token variable">$pattern</span><span class="token punctuation">,</span> <span class="token variable">$flags</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取一个目录下的所有文件, 以数组类型返回</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">files</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">,</span> <span class="token variable">$hidden</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取一个目录下的所有文件 (递归).</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">allFiles</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">,</span> <span class="token variable">$hidden</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取一个目录内的目录</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">directories</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建一个目录</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">makeDirectory</span><span class="token punctuation">(</span><span class="token variable">$path</span><span class="token punctuation">,</span> <span class="token variable">$mode</span> <span class="token operator">=</span> <span class="token number">0755</span><span class="token punctuation">,</span> <span class="token variable">$recursive</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">,</span> <span class="token variable">$force</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移动目录</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">moveDirectory</span><span class="token punctuation">(</span><span class="token variable">$from</span><span class="token punctuation">,</span> <span class="token variable">$to</span><span class="token punctuation">,</span> <span class="token variable">$overwrite</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将文件夹从一个目录复制到另一个目录下</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">copyDirectory</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">,</span> <span class="token variable">$destination</span><span class="token punctuation">,</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除目录</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">deleteDirectory</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">,</span> <span class="token variable">$preserve</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 递归式删除目录</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">deleteDirectories</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 清空指定目录的所有文件和文件夹</span>
File<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">cleanDirectory</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">SSH</p><div class="language-php extra-class"><pre class="language-php"><code>Executing Commands
<span class="token constant">SSH</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$commands</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定 remote, 否则将使用默认值</span>
<span class="token constant">SSH</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token variable">$remote</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$commands</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">SSH</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">array</span> <span class="token variable">$commands</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$line</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$line</span><span class="token punctuation">.</span><span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
任务
<span class="token comment">// 定义任务</span>
<span class="token constant">SSH</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token variable">$taskName</span><span class="token punctuation">,</span> <span class="token keyword">array</span> <span class="token variable">$commands</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 执行任务</span>
<span class="token constant">SSH</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token variable">$taskName</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$line</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token keyword">echo</span> <span class="token variable">$line</span><span class="token punctuation">.</span><span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">SFTP</span> 上传
<span class="token constant">SSH</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token variable">$localFile</span><span class="token punctuation">,</span> <span class="token variable">$remotePath</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">SSH</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token variable">$string</span><span class="token punctuation">,</span> <span class="token variable">$remotePath</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Schema</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 创建指定数据表</span>
 Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'table'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$table</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">increments</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定一个连接</span>
 Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">connection</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'table'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$table</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过给定的名称来重命名数据表</span>
 Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token variable">$from</span><span class="token punctuation">,</span> <span class="token variable">$to</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除指定数据表</span>
 Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">drop</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 当数据表存在时, 将指定数据表移除</span>
 Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dropIfExists</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断数据表是否存在</span>
 Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">hasTable</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断数据表是否有该列</span>
 Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">hasColumn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'table'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'column'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 更新一个已存在的数据表</span>
 Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'table'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$table</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 重命名数据表的列</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">renameColumn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'from'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'to'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除指定的数据表列</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropColumn</span><span class="token punctuation">(</span>string<span class="token operator">|</span><span class="token keyword">array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定数据表使用的存储引擎</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">engine</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'InnoDB'</span><span class="token punctuation">;</span>
<span class="token comment">// 字段顺序，只能在 MySQL 中才能用</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
索引
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">primary</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建一个双主键</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">primary</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'first'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'last'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'key_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建一个双唯一性索引</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'first'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'last'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'first'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'last'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'key_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'key_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建一个双索引</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'first'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'last'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'first'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'last'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'key_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropPrimary</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropPrimary</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'table_column_primary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropUnique</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropUnique</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'table_column_unique'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropIndex</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropIndex</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'table_column_index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
外键
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">foreign</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">references</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">foreign</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">references</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cascade'</span><span class="token operator">|</span><span class="token single-quoted-string string">'restrict'</span><span class="token operator">|</span><span class="token single-quoted-string string">'set null'</span><span class="token operator">|</span><span class="token single-quoted-string string">'no action'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">foreign</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">references</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onUpdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cascade'</span><span class="token operator">|</span><span class="token single-quoted-string string">'restrict'</span><span class="token operator">|</span><span class="token single-quoted-string string">'set null'</span><span class="token operator">|</span><span class="token single-quoted-string string">'no action'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropForeign</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropForeign</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'posts_user_id_foreign'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
字段类型
<span class="token comment">// 自增</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">increments</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bigIncrements</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 数字</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">integer</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">tinyInteger</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">smallInteger</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">mediumInteger</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bigInteger</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">float</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'amount'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">double</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">decimal</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'amount'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 字符串和文本</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">char</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'description'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">mediumText</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'description'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">longText</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'description'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 日期和时间</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'created_at'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dateTime</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'created_at'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sunrise'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">timestamp</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'added_on'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Adds created_at and updated_at columns</span>
 <span class="token comment">// 添加 created_at 和 updated_at 行</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">nullableTimestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 其它类型</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">binary</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'data'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">boolean</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'confirmed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 为软删除添加 deleted_at 字段</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">softDeletes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">enum</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'choices'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加 remember_token 为 VARCHAR(100) NULL</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">rememberToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加整型的 parent_id 和字符串类型的 parent_type</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">morphs</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'parent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token keyword">default</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unsigned</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">comment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Auth</p><div class="language-php extra-class"><pre class="language-php"><code>用户认证
<span class="token comment">// 获取 Auth 对象，等同于 Auth Facade</span>
<span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断当前用户是否已认证（是否已登录）</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断当前用户是否未登录，与 check() 相反</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">guest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 自定义看守器 默认为 `web`</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">guard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取当前的认证用户</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取当前的认证用户的 ID（未登录情况下会报错）</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过给定的信息来尝试对用户进行认证（成功后会自动启动会话）</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">attempt</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$email</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'password'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$password</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过 Auth::attempt() 传入 true 值来开启 '记住我' 功能</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">attempt</span><span class="token punctuation">(</span><span class="token variable">$credentials</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 注册尝试登录的事件监听器</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">attempting</span><span class="token punctuation">(</span><span class="token variable">$callback</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 只针对一次的请求来认证用户</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token variable">$credentials</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 ID 登录，无 Cookie 和会话登录</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">onceUsingId</span><span class="token punctuation">(</span><span class="token variable">$id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 登录一个指定用户到应用上</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">login</span><span class="token punctuation">(</span>User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$remember</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 检测是否记住了登录</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">viaRemember</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 登录指定用户 ID 的用户到应用上</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">loginUsingId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token variable">$remember</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用户退出登录（清除会话）</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 清除当前用户的其他会话</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">logoutOtherDevices</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'password'</span><span class="token punctuation">,</span> <span class="token variable">$attribute</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 验证用户凭证</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token variable">$credentials</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 HTTP 的基本认证方式来认证</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">basic</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'username'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 执行「HTTP Basic」登录尝试，只认证一次</span>
Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">onceBasic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 发送密码重置提示给用户</span>
Password<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">remind</span><span class="token punctuation">(</span><span class="token variable">$credentials</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
用户授权
<span class="token comment">// 定义权限</span>
Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update-post'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Class@method'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update-post'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 传递多个参数</span>
Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'delete-comment'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">,</span> <span class="token variable">$comment</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 一次性的定义多个 Gate 方法</span>
Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'posts'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'App\Policies\PostPolicy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 检测权限是否被定义</span>
Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update-post'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 检查权限</span>
Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">denies</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update-post'</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">allows</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update-post'</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update-post'</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定用户进行检查</span>
Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">forUser</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">allows</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update-post'</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在 User 模型下，使用 Authorizable trait</span>
User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">can</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update-post'</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cannot</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update-post'</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cant</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update-post'</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 拦截所有检查，返回 bool</span>
Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$ability</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置每一次验证的回调</span>
Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$ability</span><span class="token punctuation">,</span> <span class="token variable">$result</span><span class="token punctuation">,</span> <span class="token variable">$arguments</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Blade 模板语法</span>
@<span class="token function">can</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update-post'</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span>
@endcan
<span class="token comment">// 支持 else 表达式</span>
@<span class="token function">can</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update-post'</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span>
@<span class="token keyword">else</span>
@endcan
<span class="token comment">// 无权限判断</span>
@cannot
@endcannot

<span class="token comment">// 生成一个新的策略</span>
php artisan make<span class="token punctuation">:</span>policy PostPolicy
php artisan make<span class="token punctuation">:</span>policy PostPolicy <span class="token operator">--</span>model<span class="token operator">=</span>Post
<span class="token comment">// `policy` 帮助函数</span>
<span class="token function">policy</span><span class="token punctuation">(</span><span class="token variable">$post</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span>

<span class="token comment">// 控制器授权</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">authorize</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update'</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定用户 $user 授权</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">authorizeForUser</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'update'</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 控制器的 __construct 中授权资源控制器</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">authorizeResource</span><span class="token punctuation">(</span>Post<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'post'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// AuthServiceProvider-&gt;boot() 里修改策略自动发现的逻辑</span>
Gate<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">guessPolicyNamesUsing</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$modelClass</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 返回模型对应的策略名称，如：// 'App\Model\User' =&gt; 'App\Policies\UserPolicy',</span>
    <span class="token keyword">return</span> <span class="token single-quoted-string string">'App\Policies\\'</span><span class="token punctuation">.</span><span class="token function">class_basename</span><span class="token punctuation">(</span><span class="token variable">$modelClass</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'Policy'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 中间件指定模型实例</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/post/{post}'</span><span class="token punctuation">,</span>  <span class="token keyword">function</span>  <span class="token punctuation">(</span>Post <span class="token variable">$post</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'can:update,post'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 中间件未指定模型实例</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/post'</span><span class="token punctuation">,</span>  <span class="token keyword">function</span>  <span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'can:create,App\Post'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Helper</p><div class="language-php extra-class"><pre class="language-php"><code>注：数组和字串函数将在 <span class="token number">5.9</span> 全面废弃，推荐使用 Arr 和 Str Facade

数组 <span class="token operator">&amp;</span> 对象
<span class="token comment">// 如果给定的键不存在于该数组，Arr::add 函数将给定的键值对加到数组中</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Desk'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'price'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// &gt;&gt;&gt; ['name' =&gt; 'Desk', 'price' =&gt; 100]</span>
<span class="token comment">// 将数组的每一个数组折成单一数组</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">collapse</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token comment">// &gt;&gt;&gt; [1, 2, 3, 4, 5, 6]</span>
<span class="token comment">// 函数返回两个数组，一个包含原本数组的键，另一个包含原本数组的值</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">divide</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'key1'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'val1'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'key2'</span> <span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'val2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// &gt;&gt;&gt; [[&quot;key1&quot;,&quot;key2&quot;],[&quot;val1&quot;,&quot;val2&quot;]]</span>
<span class="token comment">// 把多维数组扁平化成一维数组，并用「点」式语法表示深度</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dot</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从数组移除给定的键值对</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">except</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回数组中第一个通过为真测试的元素</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token variable">$default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将多维数组扁平化成一维</span>
 <span class="token comment">// ['Joe', 'PHP', 'Ruby'];</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">flatten</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Joe'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'languages'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'PHP'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Ruby'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 以「点」式语法从深度嵌套数组移除给定的键值对</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foo.bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用「点」式语法从深度嵌套数组取回给定的值</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foo.bar'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用「点」式语法检查给定的项目是否存在于数组中</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'products.desk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从数组返回给定的键值对</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从数组拉出一列给定的键值对</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从数组移除并返回给定的键值对</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">pull</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用「点」式语法在深度嵌套数组中写入值</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'key.subkey'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 借由给定闭包结果排序数组</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 sort 函数递归排序数组</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">sortRecursive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用给定的闭包过滤数组</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 数组&quot;洗牌&quot;</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'I-AM-GROOT'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 数组包裹(如果不是数组，就变成数组，如果是空的，返回[],否则返回原数据）</span>
Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回给定数组的第一个元素</span>
<span class="token function">head</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回给定数组的最后一个元素</span>
<span class="token function">last</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
路径
<span class="token comment">// 取得 app 文件夹的完整路径</span>
<span class="token function">app_path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取得项目根目录的完整路径</span>
<span class="token function">base_path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取得应用配置目录的完整路径</span>
<span class="token function">config_path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取得应用数据库目录的完整路径</span>
<span class="token function">database_path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取得加上版本号的 Elixir 文件路径</span>
<span class="token function">elixir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取得 public 目录的完整路径</span>
<span class="token function">public_path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取得 storage 目录的完整路径</span>
<span class="token function">storage_path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
字符串
<span class="token comment">// 将给定的字符串转换成 驼峰式命名</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">camel</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回不包含命名空间的类名称</span>
<span class="token function">class_basename</span><span class="token punctuation">(</span><span class="token variable">$class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">class_basename</span><span class="token punctuation">(</span><span class="token variable">$object</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 对给定字符串运行 htmlentities</span>
<span class="token function">e</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'&lt;html&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断字符串开头是否为给定内容</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Foo bar.'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断给定字符串结尾是否为指定内容</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Foo bar.'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将给定的字符串转换成 蛇形命名</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">snake</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'fooBar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将给定字符串转换成「首字大写命名」: FooBar</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">studly</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo_bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 根据你的本地化文件翻译给定的语句</span>
<span class="token function">trans</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo.bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 根据后缀变化翻译给定的语句</span>
<span class="token function">trans_choice</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo.bar'</span><span class="token punctuation">,</span> <span class="token variable">$count</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
URLs <span class="token keyword">and</span> Links
<span class="token comment">// 产生给定控制器行为网址</span>
<span class="token function">action</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'FooController@method'</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 根据目前请求的协定（HTTP 或 HTTPS）产生资源文件网址</span>
<span class="token function">asset</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'img/photo.jpg'</span><span class="token punctuation">,</span> <span class="token variable">$title</span><span class="token punctuation">,</span> <span class="token variable">$attributes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 根据 HTTPS 产生资源文件网址</span>
<span class="token function">secure_asset</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'img/photo.jpg'</span><span class="token punctuation">,</span> <span class="token variable">$title</span><span class="token punctuation">,</span> <span class="token variable">$attributes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 产生给定路由名称网址</span>
<span class="token function">route</span><span class="token punctuation">(</span><span class="token variable">$route</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">,</span> <span class="token variable">$absolute</span> <span class="token operator">=</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 产生给定路径的完整网址</span>
<span class="token function">url</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'path'</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$secure</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
其他
<span class="token comment">// 返回一个认证器实例。你可以使用它取代 Auth facade</span>
<span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 产生一个重定向回应让用户回到之前的位置</span>
<span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 Bcrypt 哈希给定的数值。你可以使用它替代 Hash facade</span>
<span class="token function">bcrypt</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'my-secret-password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从给定的项目产生集合实例</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'taylor'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'abigail'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取得设置选项的设置值</span>
<span class="token function">config</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'app.timezone'</span><span class="token punctuation">,</span> <span class="token variable">$default</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 产生包含 CSRF 令牌内容的 HTML 表单隐藏字段</span>
<span class="token punctuation">{</span><span class="token operator">!</span><span class="token operator">!</span> <span class="token function">csrf_field</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">}</span> 
<span class="token comment">// 5.7+用这个</span>
@csrf
<span class="token comment">// 取得当前 CSRF 令牌的内容</span>
<span class="token variable">$token</span> <span class="token operator">=</span> <span class="token function">csrf_token</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出给定变量并结束脚本运行</span>
<span class="token function">dd</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// var_dump缩写（如果用dump-server,var_dump可能无效）</span>
<span class="token function">dump</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取得环境变量值或返回默认值</span>
<span class="token variable">$env</span> <span class="token operator">=</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'APP_ENV'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$env</span> <span class="token operator">=</span> <span class="token function">env</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'APP_ENV'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'production'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 配送给定事件到所属的侦听器</span>
<span class="token function">event</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UserRegistered</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 根据给定类、名称以及总数产生模型工厂建构器</span>
<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span>App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 产生拟造 HTTP 表单动作内容的 HTML 表单隐藏字段</span>
<span class="token punctuation">{</span><span class="token operator">!</span><span class="token operator">!</span> <span class="token function">method_field</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'delete'</span><span class="token punctuation">)</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">}</span>
<span class="token comment">// 5.7+</span>
@<span class="token function">method</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'delete'</span><span class="token punctuation">)</span>
<span class="token comment">// 取得快闪到 session 的旧有输入数值</span>
<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token function">old</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token function">old</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回重定向器实例以进行 重定向</span>
 <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/home'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取得目前的请求实例或输入的项目</span>
<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token variable">$default</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span>
<span class="token comment">// 创建一个回应实例或获取一个回应工厂实例</span>
<span class="token keyword">return</span> <span class="token function">response</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Hello World'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token variable">$headers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 可被用于取得或设置单一 session 内容</span>
<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token function">session</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在没有传递参数时，将返回 session 实例</span>
<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回给定数值</span>
<span class="token function">value</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取得视图 实例</span>
<span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'auth.login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回给定的数值</span>
<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token function">with</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">work</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Composer</p><div class="language-php extra-class"><pre class="language-php"><code>composer create<span class="token operator">-</span>project laravel<span class="token operator">/</span>laravel folder_name
composer create<span class="token operator">-</span>project laravel<span class="token operator">/</span>laravel folder_name <span class="token operator">--</span>prefer<span class="token operator">-</span>dist <span class="token double-quoted-string string">&quot;5.8.*&quot;</span>
composer install
composer install <span class="token operator">--</span>prefer<span class="token operator">-</span>dist
composer update
composer update package<span class="token operator">/</span>name
composer dump<span class="token operator">-</span>autoload <span class="token punctuation">[</span><span class="token operator">--</span>optimize<span class="token punctuation">]</span>
composer self<span class="token operator">-</span>update
composer <span class="token keyword">require</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">--</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>vendor<span class="token operator">/</span>packages<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token comment">// 全局安装</span>
composer <span class="token keyword">require</span> <span class="token keyword">global</span> vendor<span class="token operator">/</span>packages
<span class="token comment">// 罗列所有扩展包括版本信息</span>
composer show
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Environment</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$environment</span> <span class="token operator">=</span> <span class="token function">app</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$environment</span> <span class="token operator">=</span> App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断当环境是否为 local</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'local'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 判断当环境是否为 local 或 staging...</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">environment</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'local'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'staging'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Log</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 记录器提供了 7 种在 RFC 5424 标准内定义的记录等级:</span>
<span class="token comment">// debug, info, notice, warning, error, critical, and alert.</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'info'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'info'</span><span class="token punctuation">,</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'context'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token single-quoted-string string">'additional info'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">warning</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'warning'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取 monolog 实例</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getMonolog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加监听器</span>
Log<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$level</span><span class="token punctuation">,</span> <span class="token variable">$message</span><span class="token punctuation">,</span> <span class="token variable">$context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
记录 <span class="token constant">SQL</span> 查询语句
<span class="token comment">// 开启 log</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">connection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">enableQueryLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取已执行的查询数组</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getQueryLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">URL</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">full</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">previous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">,</span> <span class="token variable">$secure</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'NewsController@item'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span><span class="token operator">=</span><span class="token operator">&gt;</span><span class="token number">123</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 需要在适当的命名空间内</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Auth\AuthController@logout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'FooController@method'</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">,</span> <span class="token variable">$absolute</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">,</span> <span class="token variable">$absolute</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">secure</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">asset</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'css/foo.css'</span><span class="token punctuation">,</span> <span class="token variable">$secure</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">secureAsset</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'css/foo.css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">isValidUrl</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'http://example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">URL</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setRequest</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Event</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 1. EventServiceProvider 类里的 $listen 属性</span>
<span class="token keyword">protected</span> <span class="token variable">$listen</span> <span class="token operator">=</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'App\Events\OrderShipped'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'App\Listeners\SendShipmentNotification'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 2. 生成监听类</span>
php artisan event<span class="token punctuation">:</span>generate

<span class="token comment">// 触发命令</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fire</span><span class="token punctuation">(</span><span class="token variable">$event</span><span class="token punctuation">,</span> <span class="token variable">$payload</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$halt</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token variable">$event</span><span class="token punctuation">,</span> <span class="token variable">$payload</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$halt</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">event</span><span class="token punctuation">(</span><span class="token variable">$event</span><span class="token punctuation">,</span> <span class="token variable">$payload</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$halt</span> <span class="token operator">=</span> <span class="token boolean constant">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 触发命令并等待</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">until</span><span class="token punctuation">(</span><span class="token variable">$event</span><span class="token punctuation">,</span> <span class="token variable">$payload</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 注册一个事件监听器.</span>
<span class="token comment">// void listen(string|array $events, mixed $listener, int $priority)</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Events\UserSignup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$bar</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'event.*'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$bar</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通配符监听器</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo.bar'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'FooHandler'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo.bar'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BarHandler'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 你可以直接在处理逻辑中返回 false 来停止一个事件的传播.</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foor.bar'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$event</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token boolean constant">false</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'UserEventHandler'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取所有监听者</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getListeners</span><span class="token punctuation">(</span><span class="token variable">$eventName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除事件及其对应的监听者</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token variable">$event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将事件推入堆栈中等待执行</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token variable">$event</span><span class="token punctuation">,</span> <span class="token variable">$payload</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除指定的堆栈事件</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token variable">$event</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除所有堆栈中的事件</span>
Event<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">forgetPushed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">DB</p><div class="language-php extra-class"><pre class="language-php"><code>基本使用
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">connection</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'connection_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 运行数据库查询语句</span>
<span class="token variable">$results</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'select * from users where id = ?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$results</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'select * from users where id = :id'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 运行普通语句</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">statement</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'drop table users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 监听查询事件</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$sql</span><span class="token punctuation">,</span> <span class="token variable">$bindings</span><span class="token punctuation">,</span> <span class="token variable">$time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> code_here<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 数据库事务处理</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'votes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'posts'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">rollBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获取表前缀</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getTablePrefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
查询语句构造器 
<span class="token comment">// 取得数据表的所有行</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取数据表的部分数据</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">chunk</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$users</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$users</span> <span class="token keyword">as</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取回数据表的第一条数据</span>
<span class="token variable">$user</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'John'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从单行中取出单列数据</span>
<span class="token variable">$name</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'John'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取多行数据的「列数据」数组</span>
<span class="token variable">$roles</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'roles'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">lists</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$roles</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'roles'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">lists</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'title'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定一个选择字段</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name as user_name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加一个选择字段到一个已存在的查询语句中</span>
<span class="token variable">$query</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addSelect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用 Where 运算符</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
              <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
              <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">orWhere</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'John'</span><span class="token punctuation">)</span>
              <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereBetween</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereNotBetween</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereIn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereNotIn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereNull</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'updated_at'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereNotNull</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 动态的 Where 字段</span>
<span class="token variable">$admin</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$john</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereIdAndEmail</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'john@doe.com'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$jane</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereNameOrAge</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Jane'</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Order By, Group By, 和 Having</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'desc'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'count'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">having</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'count'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'desc'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">having</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'count'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 偏移 &amp; 限制</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Joins 
<span class="token comment">// 基本的 Join 声明语句</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'contacts'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'users.id'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'='</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'contacts.user_id'</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'orders'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'users.id'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'='</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'orders.user_id'</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users.id'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'contacts.phone'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'orders.price'</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Left Join 声明语句</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">leftJoin</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'posts'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'users.id'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'='</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'posts.user_id'</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// select * from users where name = 'John' or (votes &gt; 100 and title &lt;&gt; 'Admin')</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'='</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'John'</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">orWhere</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
              <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'title'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&lt;&gt;'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Admin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
聚合 
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$price</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'orders'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'price'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$price</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'orders'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'price'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$price</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'orders'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">avg</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'price'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$total</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
原始表达句
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
                   <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">raw</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'count(*) as user_count, status'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                   <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'status'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&lt;&gt;'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
                   <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'status'</span><span class="token punctuation">)</span>
                   <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回行</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'select * from users where id = ?'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'insert into foo set bar=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update foo set bar=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'delete from bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回 void</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">statement</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update foo set bar=2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在声明语句中加入原始的表达式</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">raw</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'count(*) as count, column2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Inserts <span class="token operator">/</span> Updates <span class="token operator">/</span> Deletes <span class="token operator">/</span> Unions <span class="token operator">/</span> Pessimistic Locking
<span class="token comment">// 插入</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'john@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'votes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$id</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">insertGetId</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'john@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'votes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'taylor@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'votes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'dayle@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'votes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 更新</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
          <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
          <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'votes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'John'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&lt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">truncate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 集合</span>
 <span class="token comment">// unionAll() 方法也是可供使用的，调用方式与 union 相似</span>
<span class="token variable">$first</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereNull</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'first_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$users</span> <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereNull</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'last_name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">union</span><span class="token punctuation">(</span><span class="token variable">$first</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 消极锁</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sharedLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">lockForUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">UnitTest</p><div class="language-php extra-class"><pre class="language-php"><code>安装和运行
<span class="token comment">// 将其加入到 composer.json 并更新:</span>
composer <span class="token keyword">require</span> <span class="token double-quoted-string string">&quot;phpunit/phpunit:4.0.*&quot;</span>
<span class="token comment">// 运行测试 (在项目根目录下运行)</span>
<span class="token punctuation">.</span><span class="token operator">/</span>vendor<span class="token operator">/</span>bin<span class="token operator">/</span>phpunit
断言
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token variable">$bar</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token variable">$times</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertResponseOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertResponseStatus</span><span class="token punctuation">(</span><span class="token number">403</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertRedirectedTo</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertRedirectedToRoute</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'route.name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertRedirectedToAction</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Controller@method'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertViewHas</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertViewHas</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'age'</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSessionHasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 由单个 key 值来假定 session 有错误...</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSessionHasErrors</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 由多个 key 值来假定 session 有错误...</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertSessionHasErrors</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">assertHasOldInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
访问路由
<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token variable">$method</span><span class="token punctuation">,</span> <span class="token variable">$uri</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">,</span> <span class="token variable">$files</span><span class="token punctuation">,</span> <span class="token variable">$server</span><span class="token punctuation">,</span> <span class="token variable">$content</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">callSecure</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'GET'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">flushSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">seed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">seed</span><span class="token punctuation">(</span><span class="token variable">$connection</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Input</p><div class="language-php extra-class"><pre class="language-php"><code>Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定默认值</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 只取回 'foo' 和 'bar'，返回数组</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取除了 'foo' 的所有用户输入数组</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">except</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 字段 'key' 是否有值，返回 boolean</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">filled</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
会话周期内 Input
<span class="token comment">// 清除会话周期内的输入</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 清除会话周期内的指定输入</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">flashOnly</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 清除会话周期内的除了指定的其他输入</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">flashExcept</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'baz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取回一个旧的输入条目</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">old</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'default_value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Files
<span class="token comment">// 使用一个已上传的文件</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'filename'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断文件是否已上传</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">hasFile</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'filename'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取文件属性</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getClientOriginalName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getClientOriginalExtension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getMimeType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移动一个已上传的文件</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token variable">$destinationPath</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移动一个已上传的文件，并设置新的名字</span>
Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token variable">$destinationPath</span><span class="token punctuation">,</span> <span class="token variable">$fileName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Session</p><div class="language-php extra-class"><pre class="language-php"><code>Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从会话中读取一个条目</span>
 Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取 session 的 ID</span>
Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 增加一个会话键值数据</span>
Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将一个值加入到 session 的数组中</span>
Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo.bar'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回 session 的所有条目</span>
Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 检查 session 里是否有此条目</span>
Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从 session 中移除一个条目</span>
Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从 session 中移除所有条目</span>
Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 生成一个新的 session 标识符</span>
Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">regenerate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 把一条数据暂存到 session 中</span>
Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 清空所有的暂存数据</span>
Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">reflash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 重新暂存当前暂存数据的子集</span>
Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">keep</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key1'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'key2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Response
<span class="token keyword">return</span> Response<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$contents</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Response<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$contents</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Response<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Response<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setCallback</span><span class="token punctuation">(</span>Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'callback'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Response<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token variable">$filepath</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Response<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token variable">$filepath</span><span class="token punctuation">,</span> <span class="token variable">$filename</span><span class="token punctuation">,</span> <span class="token variable">$headers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建一个回应且修改其头部信息的值</span>
<span class="token variable">$response</span> <span class="token operator">=</span> Response<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$contents</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> <span class="token variable">$response</span><span class="token punctuation">;</span>
<span class="token comment">// 为回应附加上 cookie</span>
 <span class="token keyword">return</span> Response<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$content</span><span class="token punctuation">)</span>
<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withCookie</span><span class="token punctuation">(</span>Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Container</p><div class="language-php extra-class"><pre class="language-php"><code>App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$app</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 如果存在此类, 则返回</span>
App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'FooBar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 单例模式实例到服务容器中</span>
App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将已实例化的对象注册到服务容器中</span>
App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 注册绑定规则到服务容器中</span>
App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'FooRepositoryInterface'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'BarRepository'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 绑定基本值</span>
App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Http\Controllers\UserController'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">needs</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'$variableName'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">give</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 标记</span>
<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">app</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">tag</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'SpeedReport'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'MemoryReport'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'reports'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 给应用注册一个服务提供者</span>
App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'FooServiceProvider'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 监听容器对某个对象的解析</span>
App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resolving</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$object</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'HelpSpot\API'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Security
哈希
Hash<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'secretpassword'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Hash<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'secretpassword'</span><span class="token punctuation">,</span> <span class="token variable">$hashedPassword</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Hash<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">needsRehash</span><span class="token punctuation">(</span><span class="token variable">$hashedPassword</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
加密解密
Crypt<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">encrypt</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'secretstring'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Crypt<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">decrypt</span><span class="token punctuation">(</span><span class="token variable">$encryptedString</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Crypt<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setMode</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'ctr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Crypt<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setCipher</span><span class="token punctuation">(</span><span class="token variable">$cipher</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Queue
Queue<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'SendMail'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'message'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Queue<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'SendEmail@send'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'message'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Queue<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$job</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token variable">$id</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在多个 workers 中使用相同的负载</span>
 Queue<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">bulk</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'SendEmail'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'NotifyUser'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$payload</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 开启队列监听器</span>
php artisan queue<span class="token punctuation">:</span>listen
php artisan queue<span class="token punctuation">:</span>listen connection
php artisan queue<span class="token punctuation">:</span>listen <span class="token operator">--</span>timeout<span class="token operator">=</span><span class="token number">60</span>
<span class="token comment">// 只处理第一个队列任务</span>
php artisan queue<span class="token punctuation">:</span>work
<span class="token comment">// 在后台模式启动一个队列 worker</span>
php artisan queue<span class="token punctuation">:</span>work <span class="token operator">--</span>daemon
<span class="token comment">// 为失败的任务创建 migration 文件</span>
php artisan queue<span class="token punctuation">:</span>failed<span class="token operator">-</span>table
<span class="token comment">// 监听失败任务</span>
php artisan queue<span class="token punctuation">:</span>failed
<span class="token comment">// 通过 id 删除失败的任务</span>
php artisan queue<span class="token punctuation">:</span>forget <span class="token number">5</span>
<span class="token comment">// 删除所有失败任务</span>
php artisan queue<span class="token punctuation">:</span>flush
<span class="token comment">// 因为队列不会默认使用 PHP memory 参数，需要在队列指定(单位默认mb)</span>
php artisan queue<span class="token punctuation">:</span>work <span class="token operator">--</span>memory<span class="token operator">=</span><span class="token number">50</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Validation</p><div class="language-php extra-class"><pre class="language-php"><code>Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span>
<span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Foo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required|in:Foo'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$attribute</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'FooValidator@validate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resolver</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$translator</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$rules</span><span class="token punctuation">,</span> <span class="token variable">$msgs</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FooValidator</span><span class="token punctuation">(</span><span class="token variable">$translator</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$rules</span><span class="token punctuation">,</span> <span class="token variable">$msgs</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
验证规则
accepted
active_url
after<span class="token punctuation">:</span><span class="token constant">YYYY</span><span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span><span class="token constant">DD</span>
before<span class="token punctuation">:</span><span class="token constant">YYYY</span><span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span><span class="token constant">DD</span>
alpha
alpha_dash
alpha_num
<span class="token keyword">array</span>
between<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span>
confirmed
date
date_format<span class="token punctuation">:</span><span class="token constant">YYYY</span><span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span><span class="token constant">DD</span>
different<span class="token punctuation">:</span>fieldname
digits<span class="token punctuation">:</span>value
digits_between<span class="token punctuation">:</span>min<span class="token punctuation">,</span>max
boolean
email
exists<span class="token punctuation">:</span>table<span class="token punctuation">,</span>column
image
in<span class="token punctuation">:</span>foo<span class="token punctuation">,</span>bar<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
not_in<span class="token punctuation">:</span>foo<span class="token punctuation">,</span>bar<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
integer
numeric
ip
max<span class="token punctuation">:</span>value
min<span class="token punctuation">:</span>value
mimes<span class="token punctuation">:</span>jpeg<span class="token punctuation">,</span>png
regex<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span>
required
required_if<span class="token punctuation">:</span>field<span class="token punctuation">,</span>value
required_with<span class="token punctuation">:</span>foo<span class="token punctuation">,</span>bar<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
required_with_all<span class="token punctuation">:</span>foo<span class="token punctuation">,</span>bar<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
required_without<span class="token punctuation">:</span>foo<span class="token punctuation">,</span>bar<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
required_without_all<span class="token punctuation">:</span>foo<span class="token punctuation">,</span>bar<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
same<span class="token punctuation">:</span>field
size<span class="token punctuation">:</span>value
timezone
unique<span class="token punctuation">:</span>table<span class="token punctuation">,</span>column<span class="token punctuation">,</span>except<span class="token punctuation">,</span>idColumn
url
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Config</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// config/app.php 里的 timezone 配置项</span>
Config<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'app.timezone'</span><span class="token punctuation">)</span>
Config<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'app.timezone'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Config<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'database.default'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'sqlite'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// config() 等同于 Config Facade</span>
<span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'app.timezone'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">config</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'app.timezone'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// get</span>
<span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'database.default'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'sqlite'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// set</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Route</p><div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'ControllerName@function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">controller</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'FooController'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
资源路由 
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'posts'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'PostsController'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 资源路由器只允许指定动作通过</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'photo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'PhotoController'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'only'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'index'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'show'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'photo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'PhotoController'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'except'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'update'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'destroy'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 批量注册资源路由</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resources</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'FooController'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'BarController'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resources</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'FooController'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'BarController'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'only'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'index'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'show'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resources</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'FooController'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'BarController'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'except'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'update'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'destroy'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
触发错误 
App<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$handler</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">missing</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> in ErrorServiceProvider<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NotFoundHttpException</span><span class="token punctuation">;</span>
路由参数 
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/{bar}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$bar</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/{bar?}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$bar</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">HTTP</span> 请求方式
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">patch</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// RESTful 资源控制器</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">resource</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'FooController'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 为一个路由注册多种请求方式</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'get'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'/'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
安全路由 <span class="token punctuation">(</span><span class="token constant">TBD</span><span class="token punctuation">)</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'https'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
路由约束
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/{bar}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$bar</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'bar'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'[0-9]+'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/{bar}/{baz}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$bar</span><span class="token punctuation">,</span> <span class="token variable">$baz</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'bar'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'[0-9]+'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'baz'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'[A-Za-z]'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 设置一个可跨路由使用的模式</span>
 Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">pattern</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'bar'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'[0-9]+'</span><span class="token punctuation">)</span>
<span class="token constant">HTTP</span> 中间件 
<span class="token comment">// 为路由指定 Middleware</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'admin/profile'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'middleware'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'auth'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'admin/profile'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'auth'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
命名路由
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">currentRouteName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'as'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'foobar'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user/profile'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'as'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'profile'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'uses'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'UserController@showProfile'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user/profile'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'UserController@showProfile'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'profile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$url</span> <span class="token operator">=</span> <span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'profile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$redirect</span> <span class="token operator">=</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'profile'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
路由前缀
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'prefix'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'admin'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token single-quoted-string string">'Matches The &quot;/admin/users&quot; URL'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
路由命名空间
<span class="token comment">// 此路由组将会传送 'Foo\Bar' 命名空间</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'namespace'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Foo\Bar'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
子域名路由
<span class="token comment">// {sub} 将在闭包中被忽略</span>
Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'domain'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'{sub}.example.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Model</p><div class="language-php extra-class"><pre class="language-php"><code>基础使用 
<span class="token comment">// 定义一个 Eloquent 模型</span>
<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 生成一个 Eloquent 模型</span>
php artisan make<span class="token punctuation">:</span>model User
<span class="token comment">// 生成一个 Eloquent 模型的时候，顺便生成迁移文件</span>
php artisan make<span class="token punctuation">:</span>model User <span class="token operator">--</span>migration <span class="token keyword">OR</span> <span class="token operator">-</span>m
<span class="token comment">// 生成一个 Eloquent 模型的时候，顺便生成迁移文件、控制器（或资源控制器）</span>
php artisan make<span class="token punctuation">:</span>model User <span class="token operator">-</span>mc<span class="token punctuation">[</span>r<span class="token punctuation">]</span>
<span class="token comment">// 指定一个自定义的数据表名称</span>
<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token punctuation">{</span>
  <span class="token keyword">protected</span> <span class="token variable">$table</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'my_users'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
More
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过属性找到第一条相匹配的数据或创造一条新数据</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">firstOrCreate</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过属性找到第一条相匹配的数据或实例化一条新数据</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">firstOrNew</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过属性找到相匹配的数据并更新，如果不存在即创建</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">updateOrCreate</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'search_key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'search_value'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用属性的数组来填充一个模型, 用的时候要小心「Mass Assignment」安全问题 !</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token variable">$attributes</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用双主键进行查找</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'first'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'last'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 查找失败时抛出异常</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用双主键进行查找, 失败时抛出异常</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'first'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'last'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'='</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'='</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'='</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 动态属性查找</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">whereFoo</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 查找失败时抛出异常</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'='</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">firstOrFail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'='</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'='</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出原始的查询语句</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'='</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">toSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">whereRaw</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo = bar and cars = 2'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'connection-name'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'relation'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 默认的 Eloquent 排序是上升排序</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'desc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 查询 json 数据</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'options-&gt;language'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'en'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token shell-comment comment"># 字段是字符串</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">whereJsonContains</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'options-&gt;languages'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'en'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token shell-comment comment"># 字段是数组</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">whereJsonLength</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'options-&gt;languages'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token shell-comment comment"># 字段长度为 0</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">whereJsonDoesntContain</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'options-&gt;languages'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'en'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token shell-comment comment"># 字段是数组, 不包含</span>
软删除 
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">withTrashed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cars'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在查询结果中包括带被软删除的模型</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">withTrashed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cars'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cars'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">forceDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 查找只带有软删除的模型</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">onlyTrashed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cars'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
模型关联
<span class="token comment">// 一对一 - User::phone()</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasOne</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Phone'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foreign_key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'local_key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 一对一 - Phone::user(), 定义相对的关联</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsTo</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\User'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foreign_key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'other_key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 一对多 - Post::comments()</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Comment'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foreign_key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'local_key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//  一对多 - Comment::post()</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsTo</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Post'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foreign_key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'other_key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 多对多 - User::roles();</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsToMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Role'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'user_roles'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'role_id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 多对多 - Role::users();</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsToMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\User'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 多对多 - Retrieving Intermediate Table Columns</span>
<span class="token variable">$role</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">pivot</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">created_at</span><span class="token punctuation">;</span>
<span class="token comment">// 多对多 - 中介表字段</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsToMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Role'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withPivot</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'column1'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'column2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 多对多 - 自动维护 created_at 和 updated_at 时间戳</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsToMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Role'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withTimestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 远层一对多 - Country::posts(), 一个 Country 模型可能通过中介的 Users</span>
<span class="token comment">// 模型关联到多个 Posts 模型(User::country_id)</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hasManyThrough</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Post'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'App\User'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'country_id'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 多态关联 - Photo::imageable()</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">morphTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 多态关联 - Staff::photos()</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">morphMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Photo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'imageable'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 多态关联 - Product::photos()</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">morphMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Photo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'imageable'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 多态关联 - 在 AppServiceProvider 中注册你的「多态对照表」</span>
Relation<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">morphMap</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'Post'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> App\<span class="token package">Post</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'Comment'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> App\<span class="token package">Comment</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 多态多对多关联 - 涉及数据库表: posts,videos,tags,taggables</span>
<span class="token comment">// Post::tags()</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">morphToMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Tag'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'taggable'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Video::tags()</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">morphToMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Tag'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'taggable'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Tag::posts()</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">morphedByMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Post'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'taggable'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Tag::videos()</span>
<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">morphedByMany</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'App\Video'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'taggable'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 查找关联</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">posts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'active'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取所有至少有一篇评论的文章...</span>
<span class="token variable">$posts</span> <span class="token operator">=</span> App\<span class="token package">Post</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'comments'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取所有至少有三篇评论的文章...</span>
<span class="token variable">$posts</span> <span class="token operator">=</span> Post<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'comments'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&gt;='</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取所有至少有一篇评论被评分的文章...</span>
<span class="token variable">$posts</span> <span class="token operator">=</span> Post<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'comments.votes'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取所有至少有一篇评论相似于 foo% 的文章</span>
<span class="token variable">$posts</span> <span class="token operator">=</span> Post<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">whereHas</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'comments'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'content'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'like'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foo%'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 预加载</span>
<span class="token variable">$books</span> <span class="token operator">=</span> App\<span class="token package">Book</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'author'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span> <span class="token operator">=</span> App\<span class="token package">Book</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'author'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'publisher'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$books</span> <span class="token operator">=</span> App\<span class="token package">Book</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'author.contacts'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 延迟预加载</span>
<span class="token variable">$books</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'author'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'publisher'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 写入关联模型</span>
<span class="token variable">$comment</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">App<span class="token punctuation">\</span>Comment</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'message'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'A new comment.'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">comments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token variable">$comment</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Save 与多对多关联</span>
<span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">comments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">saveMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">App<span class="token punctuation">\</span>Comment</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'message'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'A new comment.'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">App<span class="token punctuation">\</span>Comment</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'message'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Another comment.'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">comments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'message'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'A new comment.'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 更新「从属」关联</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">account</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">associate</span><span class="token punctuation">(</span><span class="token variable">$account</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">account</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dissociate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 附加多对多关系</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token variable">$roleId</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token variable">$roleId</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'expires'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$expires</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从用户上移除单一身份...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token variable">$roleId</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从用户上移除所有身份...</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">detach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'expires'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$expires</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 任何不在给定数组中的 IDs 将会从中介表中被删除。</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 你也可以传递中介表上该 IDs 额外的值：</span>
<span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'expires'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean constant">true</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
事件
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">retrieved</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">creating</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">created</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">updating</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">updated</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">saving</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">saved</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">deleting</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">deleted</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">restoring</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">restored</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Model<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FooObserver</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Eloquent 配置信息
<span class="token comment">// 关闭模型插入或更新操作引发的 「mass assignment」异常</span>
Eloquent<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">unguard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 重新开启「mass assignment」异常抛出功能</span>
Eloquent<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">reguard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Cache</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 获取缓存对象，约等于 Cache</span>
<span class="token function">cache</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 注意 5.8 缓存单位为「秒」，之前版本为「分」</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token variable">$seconds</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 未设置过期时间将永久有效</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token variable">$seconds</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">forever</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">sear</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token single-quoted-string string">'value'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">remember</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token variable">$seconds</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token single-quoted-string string">'value'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">rememberForever</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token single-quoted-string string">'value'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 取到数据之后再删除它</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">pull</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 清空所有缓存</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token variable">$amount</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token variable">$amount</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">tags</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'my-tag'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token variable">$seconds</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">tags</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'my-tag'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">tags</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'my-tag'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">tags</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'people'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'artists'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'John'</span><span class="token punctuation">,</span>  <span class="token variable">$john</span><span class="token punctuation">,</span>  <span class="token variable">$seconds</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">tags</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'my-tag'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">tags</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'my-tag'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">tags</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'people'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'authors'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">section</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'group'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">section</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'group'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">section</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'group'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">tags</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'people'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'artists'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'John'</span><span class="token punctuation">,</span>  <span class="token variable">$john</span><span class="token punctuation">,</span>  <span class="token variable">$seconds</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 辅助函数</span>
<span class="token function">cache</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">cache</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$seconds</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">cache</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addMinutes</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">cache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">remember</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span>  <span class="token variable">$seconds</span><span class="token punctuation">,</span>  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span>  User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定缓存存储</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cache<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'redis'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'Jack'</span><span class="token punctuation">,</span>  <span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 10 分钟</span>
<span class="token comment">// 事件</span>
<span class="token single-quoted-string string">'Illuminate\Cache\Events\CacheHit'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'App\Listeners\LogCacheHit'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token single-quoted-string string">'Illuminate\Cache\Events\CacheMissed'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'App\Listeners\LogCacheMissed'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token single-quoted-string string">'Illuminate\Cache\Events\KeyForgotten'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'App\Listeners\LogKeyForgotten'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token single-quoted-string string">'Illuminate\Cache\Events\KeyWritten'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'App\Listeners\LogKeyWritten'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Cookie</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 等于 Cookie</span>
<span class="token function">cookie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建一个永久有效的 cookie</span>
Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">forever</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建一个 N 分钟有效的 cookie</span>
Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'minutes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">cookie</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'minutes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在回应之前先积累 cookie，回应时统一返回</span>
Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'minutes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除 Cookie</span>
Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从 response 发送一个 cookie</span>
<span class="token variable">$response</span> <span class="token operator">=</span> Response<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Hello World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$response</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withCookie</span><span class="token punctuation">(</span>Cookie<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">,</span> <span class="token variable">$minutes</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置未加密 Cookie app/Http/Middleware/EncryptCookies.php</span>
EncryptCookies<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">except</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'cookie_name_1'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Request</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">//获取请求参数 form-data 与 raw 请求类型</span>
<span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// url: http://xx.com/aa/bb</span>
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 路径: /aa/bb</span>
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取请求 Uri: /aa/bb/?c=d</span>
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getRequestUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回用户的 IP</span>
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取 Uri: http://xx.com/aa/bb/?c=d</span>
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取查询字符串: c=d</span>
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getQueryString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取请求端口 (例如 80, 443 等等)</span>
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断当前请求的 URI 是否可被匹配</span>
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取 URI 的分段值 (索引从 1 开始)</span>
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">segment</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">/</span><span class="token operator">/</span> 从请求中取回头部信息
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Content-Type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">/</span><span class="token operator">/</span> 从请求中取回服务器变量
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">server</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'PATH_INFO'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">/</span><span class="token operator">/</span> 判断请求是否是 <span class="token constant">AJAX</span> 请求
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">/</span><span class="token operator">/</span> 判断请求是否使用 <span class="token constant">HTTPS</span>
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">secure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">/</span><span class="token operator">/</span> 获取请求方法
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">/</span><span class="token operator">/</span> 判断请求方法是否是指定类型的
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">isMethod</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'post'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">/</span><span class="token operator">/</span> 获取原始的 <span class="token constant">POST</span> 数据
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">/</span><span class="token operator">/</span> 获取请求要求返回的格式
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">/</span><span class="token operator">/</span> 判断 <span class="token constant">HTTP</span> Content<span class="token operator">-</span>Type 头部信息是否包含 <span class="token operator">*</span><span class="token operator">/</span>json
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">isJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断 HTTP Accept 头部信息是否为 application/json</span>
Request<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">wantsJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Redirect</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withInput</span><span class="token punctuation">(</span>Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withInput</span><span class="token punctuation">(</span>Input<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">except</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withErrors</span><span class="token punctuation">(</span><span class="token variable">$validator</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 重定向到之前的请求</span>
<span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 重定向到命名路由（根据命名路由算出 URL）</span>
<span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foobar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foobar'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foobar'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 重定向到控制器动作（根据控制器动作算出 URL）</span>
<span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'FooController@index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'FooController@baz'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'FooController@baz'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 跳转到目的地址，如果没有设置则使用默认值 foo/bar</span>
<span class="token keyword">return</span> Redirect<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">intended</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Mail</p><div class="language-php extra-class"><pre class="language-php"><code>Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email.view'</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'html.view'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'text.view'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$callback</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email.view'</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">queueOn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'queue-name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'email.view'</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$callback</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">later</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'email.view'</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 临时将发送邮件请求写入 log，方便测试</span>
 Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">pretend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">消息</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 这些都能在 $message 实例中使用, 并可传入到 Mail::send() 或 Mail::queue()</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Mr. Example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sender</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Mr. Example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">returnPath</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email@example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Mr. Example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cc</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Mr. Example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bcc</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Mr. Example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">replyTo</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Mr. Example'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">subject</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Welcome to the Jungle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">priority</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo\bar.txt'</span><span class="token punctuation">,</span> <span class="token variable">$options</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 使用内存数据作为附件</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attachData</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'bar'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Data Name'</span><span class="token punctuation">,</span> <span class="token variable">$options</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 附带文件，并返回 CID</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">embed</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo\bar.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">embedData</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Data Name'</span><span class="token punctuation">,</span> <span class="token variable">$options</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取底层的 Swift Message 对象</span>
<span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getSwiftMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">View</p><div class="language-php extra-class"><pre class="language-php"><code>View<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'path/to/view'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
View<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
View<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withKey</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
View<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">,</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
View<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 跨视图共享变量</span>
View<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">share</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 视图嵌套</span>
View<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo/bar'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">nest</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'foo/baz'</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 注册一个视图构造器</span>
View<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">composer</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'viewname'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$view</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 注册多个视图到一个视图构造器中</span>
View<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">composer</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'view1'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'view2'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$view</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 注册一个视图构造器类</span>
View<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">composer</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'viewname'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'FooComposer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
View<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">creator</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'viewname'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$view</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Blade</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 输出内容，被转义过的</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$var</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token comment">// 输出未转义内容</span>
<span class="token punctuation">{</span><span class="token operator">!</span><span class="token operator">!</span> <span class="token variable">$var</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token operator">--</span> Blade 注释，不会被输出到页面中 <span class="token operator">--</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token comment">// 三元表达式的简写，以下相当于「isset($name) ? $name : 'Default'」</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$name</span> <span class="token operator">?</span><span class="token operator">?</span> <span class="token single-quoted-string string">'Default'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token comment">// 等同 echo json_encode($array);</span>
@<span class="token function">json</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 禁用 HTML 实体双重编码</span>
Blade<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">withoutDoubleEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 书写 PHP 代码</span>
@php 
@endphp
@csrf <span class="token comment">// CSRF 域</span>
@<span class="token function">method</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'PUT'</span><span class="token punctuation">)</span> <span class="token comment">// HTML 表单伪造方法 _method</span>
<span class="token comment">// 服务容器注入，后调用 {{ $metrics-&gt;monthlyRevenue() }}</span>
@<span class="token function">inject</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'metrics'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'App\Services\MetricsService'</span><span class="token punctuation">)</span>
包含和继承
<span class="token comment">// 扩展布局模板</span>
@<span class="token keyword">extends</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'layout.name'</span><span class="token punctuation">)</span>
<span class="token comment">// 区块占位</span>
@<span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span>
<span class="token comment">// 第一种、直接填入扩展内容</span>
@<span class="token function">section</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'title'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'Page Title'</span><span class="token punctuation">)</span>
<span class="token comment">// 第二种、实现命名为 name 的区块（yield 占位的地方）</span>
@<span class="token function">section</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sidebar'</span><span class="token punctuation">)</span>
    <span class="token comment">// 继承父模板内容</span>
    @<span class="token keyword">parent</span>
@endsection
<span class="token comment">// 可继承内容区块</span>
@<span class="token function">section</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sidebar'</span><span class="token punctuation">)</span>
@show
<span class="token comment">// 继承父模板内容（@show 的区块内容）</span>
@<span class="token keyword">parent</span>
<span class="token comment">// 包含子视图</span>
@<span class="token keyword">include</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'view.name'</span><span class="token punctuation">)</span>
<span class="token comment">// 包含子视图，并传参</span>
@<span class="token keyword">include</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'view.name'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
@<span class="token function">includeIf</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'view.name'</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span><span class="token single-quoted-string string">'some'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span>  <span class="token single-quoted-string string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
@<span class="token function">includeWhen</span><span class="token punctuation">(</span><span class="token variable">$boolean</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'view.name'</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span><span class="token single-quoted-string string">'some'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span>  <span class="token single-quoted-string string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 包含给定视图数组中第一个存在的视图</span>
@<span class="token function">includeFirst</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'custom.admin'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'admin'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span><span class="token single-quoted-string string">'some'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span>  <span class="token single-quoted-string string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 加载本地化语句</span>
@<span class="token function">lang</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'messages.name'</span><span class="token punctuation">)</span>
@<span class="token function">choice</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'messages.name'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 检查片断是否存在</span>
@<span class="token function">hasSection</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'navigation'</span><span class="token punctuation">)</span>
        @<span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'navigation'</span><span class="token punctuation">)</span>
@<span class="token keyword">endif</span>
<span class="token comment">// 迭代 jobs 数组并包含</span>
@<span class="token function">each</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'view.name'</span><span class="token punctuation">,</span>  <span class="token variable">$jobs</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'job'</span><span class="token punctuation">)</span>
@<span class="token function">each</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'view.name'</span><span class="token punctuation">,</span>  <span class="token variable">$jobs</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'job'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'view.empty'</span><span class="token punctuation">)</span>
<span class="token comment">// 堆栈</span>
@<span class="token function">stack</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'scripts'</span><span class="token punctuation">)</span>
@<span class="token function">push</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'scripts'</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token double-quoted-string string">&quot;/example.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
@endpush
<span class="token comment">// 栈顶插入</span>
@<span class="token function">prepend</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'scripts'</span><span class="token punctuation">)</span>
@endprepend
<span class="token comment">// 组件</span>
@<span class="token function">component</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'alert'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    @<span class="token function">slot</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'title'</span><span class="token punctuation">)</span>
    @endslot
@endcomponent
<span class="token comment">// 注册别名 @alert(['type' =&gt; 'danger'])...@endalert</span>
Blade<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'components.alert'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'alert'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
条件语句
@<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$records</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span>
@<span class="token keyword">elseif</span>  <span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$records</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
@<span class="token keyword">else</span>
@<span class="token keyword">endif</span>
<span class="token comment">// 登录情况下</span>
@unless <span class="token punctuation">(</span>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
@endunless
<span class="token comment">// $records 被定义且不是  null...</span>
@<span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$records</span><span class="token punctuation">)</span>
@endisset
<span class="token comment">// $records 为空...</span>
@<span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$records</span><span class="token punctuation">)</span>
@endempty
<span class="token comment">// 此用户身份已验证...</span>
@auth <span class="token comment">// 或 @auth('admin')</span>
@endauth
<span class="token comment">// 此用户身份未验证...</span>
@guest <span class="token comment">// 或 @guest('admin')</span>
@endguest
@<span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token variable">$i</span><span class="token punctuation">)</span>
    @<span class="token keyword">case</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        @<span class="token keyword">break</span>
    @<span class="token keyword">default</span>
        <span class="token comment">// 默认</span>
@<span class="token keyword">endswitch</span>
循环
<span class="token comment">// for 循环</span>
@<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span>
@<span class="token keyword">endfor</span>
<span class="token comment">// foreach 迭代</span>
@<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$users</span> <span class="token keyword">as</span> <span class="token variable">$user</span><span class="token punctuation">)</span>
@<span class="token keyword">endforeach</span>
<span class="token comment">// 迭代如果为空的话</span>
@forelse <span class="token punctuation">(</span><span class="token variable">$users</span> <span class="token keyword">as</span> <span class="token variable">$user</span><span class="token punctuation">)</span>
@<span class="token keyword">empty</span>
@endforelse
<span class="token comment">// while 循环</span>
@<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean constant">true</span><span class="token punctuation">)</span>
@<span class="token keyword">endwhile</span>
<span class="token comment">// 终结循环</span>
@<span class="token keyword">continue</span>
@<span class="token keyword">continue</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">type</span>  <span class="token operator">==</span>  <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 带条件</span>
<span class="token comment">// 跳过本次迭代</span>
@<span class="token keyword">break</span>
@<span class="token keyword">break</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">number</span>  <span class="token operator">==</span>  <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// 带条件</span>
<span class="token comment">// 循环变量</span>
<span class="token variable">$loop</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">index</span>        <span class="token comment">// 当前迭代的索引（从 0 开始计数）。</span>
<span class="token variable">$loop</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">iteration</span>    <span class="token comment">// 当前循环迭代 (从 1 开始计算）。</span>
<span class="token variable">$loop</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">remaining</span>    <span class="token comment">// 循环中剩余迭代的数量。</span>
<span class="token variable">$loop</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">count</span>        <span class="token comment">// 被迭代的数组元素的总数。</span>
<span class="token variable">$loop</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">first</span>        <span class="token comment">// 是否为循环的第一次迭代。</span>
<span class="token variable">$loop</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">last</span>         <span class="token comment">// 是否为循环的最后一次迭代。</span>
<span class="token variable">$loop</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">depth</span>        <span class="token comment">// 当前迭代的嵌套深度级数。</span>
<span class="token variable">$loop</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token keyword">parent</span>       <span class="token comment">// 嵌套循环中，父循环的循环变量</span>
JavaScript 代码
<span class="token comment">// JS 框架，保留双大括号，以下会编译为 {{ name }}</span>
@<span class="token punctuation">{</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token comment">// 大段 JavaScript 变量，verbatim 里模板引擎将不解析</span>
@verbatim
        Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> javascriptVariableName <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span>
@endverbatim
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">String</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 将 UTF-8 的值直译为 ASCII 类型的值</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">ascii</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">camel</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token variable">$haystack</span><span class="token punctuation">,</span> <span class="token variable">$needle</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token variable">$haystack</span><span class="token punctuation">,</span> <span class="token variable">$needles</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">finish</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$cap</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token variable">$pattern</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$limit</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token variable">$end</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'...'</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">lower</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">words</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$words</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token variable">$end</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'...'</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">plural</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$count</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">// 生成更加真实的 &quot;随机&quot; 字母数字字符串.</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token variable">$length</span> <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">)</span>
<span class="token comment">// 生成一个 &quot;随机&quot; 字母数字字符串.</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">quickRandom</span><span class="token punctuation">(</span><span class="token variable">$length</span> <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">upper</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">singular</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">slug</span><span class="token punctuation">(</span><span class="token variable">$title</span><span class="token punctuation">,</span> <span class="token variable">$separator</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'-'</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">snake</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$delimiter</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'_'</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token variable">$haystack</span><span class="token punctuation">,</span> <span class="token variable">$needles</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">studly</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span>
Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">macro</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$macro</span><span class="token punctuation">)</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Collection</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 创建集合</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回该集合所代表的底层数组：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回集合中所有项目的平均值：</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">avg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将集合拆成多个给定大小的较小集合：</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">chunk</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [[1,2], [3,4], [5]]</span>
<span class="token comment">// 将多个数组组成的集合折成单一数组集合：</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span>  <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">collapse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 4, 5]</span>
<span class="token comment">// 将一个集合的值作为键，再将另一个集合作为值合并成一个集合</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">combine</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'George'</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将给定的 数组 或集合值追加到集合的末尾</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'PHP'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'Laravel'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['PHP', 'Laravel']</span>
<span class="token comment">// 用来判断该集合是否含有指定的项目：</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Desk'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Desk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Desk'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'Desk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// 返回该集合内的项目总数：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 交叉连接指定数组或集合的值，返回所有可能排列的笛卡尔积</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">crossJoin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'a'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [[1, 'a'],[1, 'b'],[2, 'a'],[2, 'b']]</span>
<span class="token comment">// dd($collection) 的另一个写法</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'John Doe'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Jane Doe'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回原集合中存在而指定集合中不存在的值</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token number">2</span><span class="token punctuation">,</span>  <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">diff</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 3]</span>
<span class="token comment">// 返回原集合不存在与指定集合的键 / 值对</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'color'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'orange'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'remain'</span> <span class="token operator">=</span><span class="token operator">&gt;</span>  <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">diffAssoc</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'color'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'yellow'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'remain'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'used'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ['color' =&gt; 'orange']</span>
<span class="token comment">// 返回原集合中存在而指定集合中不存在键所对应的键 / 值对</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'one'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'two'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">diffKeys</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'two'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'four'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['one' =&gt; 10]</span>
<span class="token comment">// 类似于 dd() 方法，但是不会中断</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'John Doe'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Jane Doe'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dump</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 遍历集合中的项目，并将之传入给定的回调函数：</span>
<span class="token variable">$collection</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 验证集合中的每一个元素是否通过指定的条件测试</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span>  <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token keyword">function</span>  <span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">,</span>  <span class="token variable">$key</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token variable">$value</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token comment">// 返回集合中排除指定键的所有项目：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">except</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'price'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'discount'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 以给定的回调函数筛选集合，只留下那些通过判断测试的项目：</span>
<span class="token variable">$filtered</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$item</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回集合中，第一个通过给定测试的元素：</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$value</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将多维集合转为一维集合：</span>
<span class="token variable">$flattened</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">flatten</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将集合中的键和对应的数值进行互换：</span>
<span class="token variable">$flipped</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">flip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 以键自集合移除掉一个项目：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回含有可以用来在给定页码显示项目的新集合：</span>
<span class="token variable">$chunk</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">forPage</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回给定键的项目。如果该键不存在，则返回 null：</span>
<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 根据给定的键替集合内的项目分组：</span>
<span class="token variable">$grouped</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'account_id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 用来确认集合中是否含有给定的键：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 用来连接集合中的项目</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">implode</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'product'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">', '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除任何给定数组或集合内所没有的数值：</span>
<span class="token variable">$intersect</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">intersect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'Desk'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Chair'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Bookcase'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 假如集合是空的，isEmpty 方法会返回 true：</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 以给定键的值作为集合项目的键：</span>
<span class="token variable">$keyed</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">keyBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'product_id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 传入回调函数，该函数会返回集合的键的值：</span>
<span class="token variable">$keyed</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">keyBy</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'product_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回该集合所有的键：</span>
<span class="token variable">$keys</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回集合中，最后一个通过给定测试的元素：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">last</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 遍历整个集合并将每一个数值传入给定的回调函数：</span>
<span class="token variable">$multiplied</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$item</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回给定键的最大值：</span>
<span class="token variable">$max</span> <span class="token operator">=</span> <span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$max</span> <span class="token operator">=</span> <span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将合并指定的数组或集合到原集合：</span>
<span class="token variable">$merged</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'price'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'discount'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean constant">false</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回给定键的最小值：</span>
<span class="token variable">$min</span> <span class="token operator">=</span> <span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'foo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$min</span> <span class="token operator">=</span> <span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回集合中指定键的所有项目：</span>
<span class="token variable">$filtered</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'product_id'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取所有集合中给定键的值：</span>
<span class="token variable">$plucked</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除并返回集合最后一个项目：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在集合前面增加一个项目：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 传递第二个参数来设置前置项目的键：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'zero'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 以键从集合中移除并返回一个项目：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">pull</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 附加一个项目到集合后面：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// put 在集合内设置一个给定键和数值：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'price'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 从集合中随机返回一个项目：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 传入一个整数到 random。如果该整数大于 1，则会返回一个集合：</span>
<span class="token variable">$random</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 会将每次迭代的结果传入到下一次迭代：</span>
<span class="token variable">$total</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$carry</span><span class="token punctuation">,</span> <span class="token variable">$item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$carry</span> <span class="token operator">+</span> <span class="token variable">$item</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 以给定的回调函数筛选集合：</span>
<span class="token variable">$filtered</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$item</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 反转集合内项目的顺序：</span>
<span class="token variable">$reversed</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在集合内搜索给定的数值并返回找到的键：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除并返回集合的第一个项目：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 随机排序集合的项目：</span>
<span class="token variable">$shuffled</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回集合从给定索引开始的一部分切片：</span>
<span class="token variable">$slice</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 对集合排序：</span>
<span class="token variable">$sorted</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 以给定的键排序集合：</span>
<span class="token variable">$sorted</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sortBy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'price'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除并返回从指定的索引开始的一小切片项目：</span>
<span class="token variable">$chunk</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回集合内所有项目的总和：</span>
<span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回有着指定数量项目的集合：</span>
<span class="token variable">$chunk</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将集合转换成纯 PHP 数组：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将集合转换成 JSON：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 遍历集合并对集合内每一个项目调用给定的回调函数：</span>
<span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">transform</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$item</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回集合中所有唯一的项目：</span>
<span class="token variable">$unique</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回键重设为连续整数的的新集合：</span>
<span class="token variable">$values</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 以一对给定的键／数值筛选集合：</span>
<span class="token variable">$filtered</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'price'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将集合与给定数组同样索引的值合并在一起：</span>
<span class="token variable">$zipped</span> <span class="token operator">=</span> <span class="token variable">$collection</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">zip</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Storage</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 写入文件</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatars/1'</span><span class="token punctuation">,</span> <span class="token variable">$fileContents</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 指定磁盘</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">disk</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'local'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.txt'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Contents'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">,</span>  <span class="token variable">$name</span><span class="token punctuation">,</span>  <span class="token variable">$headers</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">temporaryUrl</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addMinutes</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">lastModified</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 自动为文件名生成唯一的ID...  </span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">putFile</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'photos'</span><span class="token punctuation">,</span>  <span class="token keyword">new</span>  <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/path/to/photo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 手动指定文件名...  </span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">putFileAs</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'photos'</span><span class="token punctuation">,</span> <span class="token keyword">new</span>  <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/path/to/photo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'photo.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">prepend</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.log'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Prepended Text'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.log'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Appended Text'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'old/file.jpg'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'new/file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'old/file.jpg'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'new/file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">putFileAs</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatars'</span><span class="token punctuation">,</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'avatar'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 「可见性」是对多个平台的文件权限的抽象</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">getVisibility</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'public'</span><span class="token punctuation">)</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'file.jpg'</span><span class="token punctuation">,</span>  <span class="token single-quoted-string string">'file2.jpg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取目录下的所有的文件</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">files</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">allFiles</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获取目录下的所有目录</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">directories</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">allDirectories</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建目录</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">makeDirectory</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除目录</span>
Storage<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">deleteDirectory</span><span class="token punctuation">(</span><span class="token variable">$directory</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div></div></div><div class="global-ui"></div></div>
    <script src="/vuepress/assets/js/app.67f1280c.js" defer></script><script src="/vuepress/assets/js/4.ebb0aeeb.js" defer></script><script src="/vuepress/assets/js/12.28c97dd9.js" defer></script>
  </body>
</html>
