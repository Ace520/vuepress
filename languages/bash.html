<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vuepress</title>
    <meta name="description" content="vuepress">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/vuepress/assets/css/0.styles.68cb6b73.css" as="style"><link rel="preload" href="/vuepress/assets/js/app.67f1280c.js" as="script"><link rel="preload" href="/vuepress/assets/js/4.ebb0aeeb.js" as="script"><link rel="preload" href="/vuepress/assets/js/9.99ebe225.js" as="script"><link rel="prefetch" href="/vuepress/assets/js/10.dd2505e2.js"><link rel="prefetch" href="/vuepress/assets/js/11.a474b960.js"><link rel="prefetch" href="/vuepress/assets/js/12.28c97dd9.js"><link rel="prefetch" href="/vuepress/assets/js/13.9b5ad5a4.js"><link rel="prefetch" href="/vuepress/assets/js/14.bd7637ce.js"><link rel="prefetch" href="/vuepress/assets/js/15.108df4ad.js"><link rel="prefetch" href="/vuepress/assets/js/16.ad40c6e2.js"><link rel="prefetch" href="/vuepress/assets/js/2.0752e350.js"><link rel="prefetch" href="/vuepress/assets/js/3.9e344db5.js"><link rel="prefetch" href="/vuepress/assets/js/5.c6e2e188.js"><link rel="prefetch" href="/vuepress/assets/js/6.06450133.js"><link rel="prefetch" href="/vuepress/assets/js/7.83649180.js"><link rel="prefetch" href="/vuepress/assets/js/8.450dbaa3.js">
    <link rel="stylesheet" href="/vuepress/assets/css/0.styles.68cb6b73.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><div class="content__default"><h2 id="bash终端速查表">Bash终端速查表</h2> <div class="card"><div class="card-box"><p class="title">终端技巧</p><div class="language-bash extra-class"><pre class="language-bash"><code>使用 Ctrl 键
Ctrl + n <span class="token builtin class-name">:</span> 类似向下的键
Ctrl + p <span class="token builtin class-name">:</span> 类似向上的键
Ctrl + r <span class="token builtin class-name">:</span> 反向搜索命令的历史记录（按住 Ctrl + r <span class="token punctuation">)</span>
Ctrl + s <span class="token builtin class-name">:</span> 终端停止输出.（译者注：如 <span class="token function">apt</span> / yum，nload，watch 等，按 Enter 继续输出）
Ctrl + q <span class="token builtin class-name">:</span> 在 Ctrl + s 之后重新恢复之前的 terminal.
Ctrl + a <span class="token builtin class-name">:</span> 移动光标到行的开始处
Ctrl + e <span class="token builtin class-name">:</span> 移动光标到行的结尾处
Ctrl + d <span class="token builtin class-name">:</span> 如果当前的 terminal 命令行有输入，Ctrl + d 或删除光标处的字符，否则会退出当前的 terminal
Ctrl + k <span class="token builtin class-name">:</span> 删除从当前光标到结尾的所有字符
Ctrl + x + backspace <span class="token builtin class-name">:</span> 删除当前光标到行开始的所有字符
Ctrl + t <span class="token builtin class-name">:</span> 交换当前光标下的字符和其前面字符的位置。Esc + t 交换光标前面的两个单词
Ctrl + w <span class="token builtin class-name">:</span> 剪切光标之前的单词，然后 Ctrl + y 粘贴它
Ctrl + u <span class="token builtin class-name">:</span> 剪切光标之前的行<span class="token punctuation">;</span> 然后 Ctrl + y 粘贴它
Ctrl + _ <span class="token builtin class-name">:</span> 撤销之前的操作
Ctrl + l <span class="token builtin class-name">:</span> 相当于清除
Ctrl + x + Ctrl + e <span class="token builtin class-name">:</span> 召唤起 <span class="token variable">$EDITOR</span> 环境变量设置的编辑器程序，对多行命令有效
更改大小写
Esc + u
<span class="token comment"># 将文本从光标的开始到结尾的单词转换为大写</span>
Esc + l
<span class="token comment"># 将文本从光标的开始到结尾的单词转换为小写</span>
Esc + c
<span class="token comment"># 将光标下的字母转换为大写</span>
运行历史记录编号 <span class="token punctuation">(</span>例如 e.g. <span class="token number">53</span><span class="token punctuation">)</span>
<span class="token operator">!</span><span class="token number">53</span>
运行最后一条命令
<span class="token operator">!</span><span class="token operator">!</span>
运行最后一个命令并且使用参入号替换之前运行的参数 <span class="token punctuation">(</span>例如最后一个命令 <span class="token builtin class-name">:</span> <span class="token builtin class-name">echo</span> <span class="token string">'aaa'</span> -<span class="token operator">&gt;</span> 现在运行: <span class="token builtin class-name">echo</span> <span class="token string">'bbb'</span><span class="token punctuation">)</span>
<span class="token comment">#最后的一条命令: echo 'aaa'</span>
^aaa^bbb

<span class="token comment">#echo 'bbb'</span>
<span class="token comment">#bbb</span>

<span class="token comment">#注意只有唯一的第一个 aaa 将会被替代，如果你想替代所有的 aaa，使用「:&amp;」替代：</span>
^aaa^bbb^:<span class="token operator">&amp;</span>
<span class="token comment">#或者</span>
<span class="token operator">!</span><span class="token operator">!</span>:gs/aaa/bbb/
运行以开头的命令 <span class="token punctuation">(</span>e.g. <span class="token function">cat</span> 文件名<span class="token punctuation">)</span>
<span class="token operator">!</span>cat
<span class="token comment"># 或者</span>
<span class="token operator">!</span>c
<span class="token comment">#再次运行cat文件名</span>
Bash 通配符
<span class="token comment"># '*' 用作文件名扩展的 &quot;通配符&quot; 。</span>
/b?n/?at      <span class="token comment">#/bin/cat</span>

<span class="token comment"># '?' 用作文件名扩展的单字符 &quot;通配符&quot; 。</span>
/etc/pa*wd    <span class="token comment">#/etc/passwd</span>

<span class="token comment"># ‘[]’ 用于匹配范围内的字符。</span>
<span class="token function">ls</span> -l <span class="token punctuation">[</span>a-z<span class="token punctuation">]</span>*   <span class="token comment">#列出所有文件名中带有字母的文件。</span>

<span class="token comment"># ‘{}’ 可用于匹配多个模式的文件名 </span>
<span class="token function">ls</span> <span class="token punctuation">{</span>*.sh,*.py<span class="token punctuation">}</span>   <span class="token comment">#列出所有.sh和.py文件</span>
一些方便的环境变量
<span class="token variable">$0</span>   :shell或shell脚本的名称。
<span class="token variable">$1</span>, <span class="token variable">$2</span>, <span class="token variable">$3</span>, <span class="token punctuation">..</span>. :位置参数。
<span class="token variable">$#</span>   :位置参数的数量。
<span class="token variable">$?</span>   :最新的管道退出状态。
$-   :为shell设置的当前选项。
<span class="token variable">$$</span>   :当前shell（不是subshell）的pid。
<span class="token variable">$!</span>   :最新后台命令的PID。

<span class="token environment constant">$DESKTOP_SESSION</span>     当前显示管理器
<span class="token variable">$EDITOR</span>   首选文本编辑器。
<span class="token environment constant">$LANG</span>   当前语言。
<span class="token environment constant">$PATH</span>   搜索可执行文件的目录列表（即准备运行的程序）
<span class="token environment constant">$PWD</span>    当前目录
<span class="token environment constant">$SHELL</span>  当前 shell
<span class="token environment constant">$USER</span>   当前用户名
<span class="token environment constant">$HOSTNAME</span>   当前主机名
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">筛选</p><div class="language-bash extra-class"><pre class="language-bash"><code>筛选类型
<span class="token function">grep</span> <span class="token operator">=</span> <span class="token function">grep</span> -G <span class="token comment"># Basic Regular Expression (BRE)</span>
<span class="token function">fgrep</span> <span class="token operator">=</span> <span class="token function">grep</span> -F <span class="token comment"># fixed text, ignoring meta-charachetrs</span>
<span class="token function">egrep</span> <span class="token operator">=</span> <span class="token function">grep</span> -E <span class="token comment"># Extended Regular Expression (ERE)</span>
pgrep <span class="token operator">=</span> <span class="token function">grep</span> -P <span class="token comment"># Perl Compatible Regular Expressions (PCRE)</span>
rgrep <span class="token operator">=</span> <span class="token function">grep</span> -r <span class="token comment"># recursive</span>
筛选并计算空行数
<span class="token function">grep</span> -c <span class="token string">&quot;^$&quot;</span>
筛选且仅返回整数
<span class="token function">grep</span> -o <span class="token string">'[0-9]*'</span>
<span class="token comment">#or</span>
<span class="token function">grep</span> -oP <span class="token string">'\d'</span>
筛选带一定位数的整数（例如 <span class="token number">3</span>）
<span class="token function">grep</span> ‘<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">\</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">\</span><span class="token punctuation">}</span>’
<span class="token comment"># or</span>
<span class="token function">grep</span> -E ‘<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span>’
<span class="token comment"># or</span>
<span class="token function">grep</span> -P ‘<span class="token punctuation">\</span>d<span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span>’
筛选仅 IP 地址
<span class="token function">grep</span> -Eo <span class="token string">'[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'</span>
<span class="token comment"># or</span>
<span class="token function">grep</span> -Po <span class="token string">'\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}'</span>
筛选整个单词（例如 “target” ）
<span class="token function">grep</span> -w <span class="token string">'target'</span>

<span class="token comment">#or using RE</span>
<span class="token function">grep</span> <span class="token string">'<span class="token entity" title="\b">\b</span>target<span class="token entity" title="\b">\b</span>'</span>
筛选匹配前后返回的行（例如 “bbo”）
<span class="token comment"># return also 3 lines after match</span>
<span class="token function">grep</span> -A <span class="token number">3</span> <span class="token string">'bbo'</span>

<span class="token comment"># return also 3 lines before match</span>
<span class="token function">grep</span> -B <span class="token number">3</span> <span class="token string">'bbo'</span>

<span class="token comment"># return also 3 lines before and after match</span>
<span class="token function">grep</span> -C <span class="token number">3</span> <span class="token string">'bbo'</span>
查找开始字符（例如 “S”）
<span class="token function">grep</span> -o <span class="token string">'S.*'</span>
单词中截取文本（例如 w1，w2 ）
<span class="token function">grep</span> -o -P <span class="token string">'(?&lt;=w1).*(?=w2)'</span>
查找不包含单词的行（例如 bbo ）
<span class="token function">grep</span> -v bbo filename
查找不以某字符串开头的行（例如 <span class="token comment"># ）</span>
<span class="token function">grep</span> -v <span class="token string">'^#'</span> file.txt
查找变量（例如 <span class="token assign-left variable">bbo</span><span class="token operator">=</span><span class="token string">&quot;some strings&quot;</span> ）
<span class="token function">grep</span> <span class="token string">&quot;<span class="token variable">$boo</span>&quot;</span> filename
<span class="token comment">#remember to quote the variable!</span>
查找仅有一个或者第一个匹配（例如 bbo ）
<span class="token function">grep</span> -m <span class="token number">1</span> bbo filename
查找并返回匹配的行数（例如 bb ）
<span class="token function">grep</span> -c bbo filename
出现次数 （例如一行出现 <span class="token number">3</span> 次则记为 <span class="token number">3</span> 次）
<span class="token function">grep</span> -o bbo filename <span class="token operator">|</span><span class="token function">wc</span> -l
区分大小写查找（例如 bbo/BBO/Bbo ）
<span class="token function">grep</span> -i <span class="token string">&quot;bbo&quot;</span> filename
匹配颜色标记（例如 bbo <span class="token punctuation">)</span>
<span class="token function">grep</span> --color bbo filename
查找文件夹内所有文件（例如 bbo ）
<span class="token function">grep</span> -R bbo /path/to/directory
<span class="token comment"># or</span>
<span class="token function">grep</span> -r bbo /path/to/directory
查找文件夹内所有文件，不输出文件名（例如 bbo ）
<span class="token function">grep</span> -rh bbo /path/to/directory
查找文件夹内所有文件，只输出匹配的文件名（例如 bbo ）
<span class="token function">grep</span> -rl bbo /path/to/directory
或查找（例如 A 或 B 或 C 或 D ）
<span class="token function">grep</span> <span class="token string">'A\|B\|C\|D'</span>
与查找（例如 A 与 B ）
<span class="token function">grep</span> <span class="token string">'A.*B'</span>
正则匹配任意字符（例如 ACB 或 AEB ）
<span class="token function">grep</span> <span class="token string">'A.B'</span>
正则匹配一个确定或者不确定的字符（例如 color 或 colour ）
<span class="token function">grep</span> ‘colou?r’
在文件 B 中查找文件 A 的内容
<span class="token function">grep</span> -f fileA fileB
查找制表符
<span class="token function">grep</span> $<span class="token string">'<span class="token entity" title="\t">\t</span>'</span>
在一个变量中查找另一个变量
<span class="token variable">$echo</span> <span class="token string">&quot;<span class="token variable">$long_str</span>&quot;</span><span class="token operator">|</span><span class="token function">grep</span> -q <span class="token string">&quot;<span class="token variable">$short_str</span>&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> -eq <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">'found'</span><span class="token punctuation">;</span> <span class="token keyword">fi</span>
<span class="token comment">#grep -q will output 0 if match found</span>
<span class="token comment">#remember to add space between []!</span>
查找括号内的内容
<span class="token function">grep</span> -oP <span class="token string">'\(\K[^\)]+'</span>
数字字符范围查找（例如 AAEL0000-RA ）
<span class="token function">grep</span> -o -w <span class="token string">&quot;\w\{10\}\-R\w\{1\}&quot;</span>
<span class="token comment"># \w 文字字符 [0-9a-zA-Z_] \W 非文字字符</span>
跳过文件目录（例如 bbo ）
<span class="token function">grep</span> -d skip <span class="token string">'bbo'</span> /path/to/files/*
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">流编辑器</p><div class="language-bash extra-class"><pre class="language-bash"><code>删除第一行
<span class="token function">sed</span> 1d filename
删除前 <span class="token number">100</span> 行（删除第 <span class="token number">1</span>-100 行）
<span class="token function">sed</span> <span class="token number">1</span>,100d filename
删除带字符串的行 <span class="token punctuation">(</span>例如： bbo<span class="token punctuation">)</span>
<span class="token function">sed</span> <span class="token string">&quot;/bbo/d&quot;</span> filename
- <span class="token keyword">case</span> insensitive:
<span class="token function">sed</span> <span class="token string">&quot;/bbo/Id&quot;</span> filename
删除第 n 个字符不等于值的行（例如第 <span class="token number">5</span> 个字符不等于 <span class="token number">2</span>）
<span class="token function">sed</span> -E <span class="token string">'/^.{5}[^2]/d'</span>
<span class="token comment">#aaaa2aaa (you can stay)</span>
<span class="token comment">#aaaa1aaa (delete!)</span>
编辑内嵌（编辑并保存）
<span class="token function">sed</span> -i <span class="token string">&quot;/bbo/d&quot;</span> filename
使用变量（例如 <span class="token variable">$i</span>）时，请使用双引号 <span class="token string">&quot; &quot;</span>
<span class="token comment"># e.g. add &gt;$i to the first line (to make a bioinformatics FASTA file)</span>
<span class="token function">sed</span> <span class="token string">&quot;1i &gt;<span class="token variable">$i</span>&quot;</span>
<span class="token comment"># notice the double quotes! in other examples, you can use a single quote, but here, no way!</span>
<span class="token comment"># '1i' means insert to first line</span>
同时使用环境变量和尾符号
<span class="token comment"># 使用反斜杠 $ 符，同时使用双引号来标记变量</span>
<span class="token function">sed</span> -e <span class="token string">&quot;\<span class="token variable">$s</span>/\$/<span class="token entity" title="\n">\n</span>+--<span class="token variable">$3</span>-----+/&quot;</span>
删除空行
<span class="token function">sed</span> <span class="token string">'/^\s*$/d'</span>

<span class="token comment"># 或</span>

<span class="token function">sed</span> <span class="token string">'/^$/d'</span>
删除最后一行
<span class="token function">sed</span> <span class="token string">'<span class="token variable">$d</span>'</span>
删除文件的最后一个字符
<span class="token function">sed</span> -i <span class="token string">'$ s/.$//'</span> filename
文件头部添加字符（例如『<span class="token punctuation">[</span>』）
<span class="token function">sed</span> -i <span class="token string">'1s/^/[/'</span> <span class="token function">file</span>
指定的行增加字符串（例如添加「 something 」到第 <span class="token number">1</span> 行和第 <span class="token number">3</span> 行）
<span class="token function">sed</span> -e <span class="token string">'1isomething -e '</span>3isomething<span class="token string">'
添加字符串到文件的结尾（例如『]』）
sed '</span><span class="token variable">$s</span>/$/<span class="token punctuation">]</span>/<span class="token string">' filename
添加新行到结尾
sed '</span><span class="token variable">$a</span><span class="token punctuation">\</span><span class="token string">'
添加字符串到没一行（例如 bbo）
sed -e '</span>s/^/bbo/<span class="token string">' file
添加字符串到没一行的结尾（例如『}』）
sed -e '</span>s/$/<span class="token punctuation">\</span><span class="token punctuation">}</span><span class="token punctuation">\</span><span class="token punctuation">]</span>/<span class="token string">' filename
每第 n 个字符添加 <span class="token entity" title="\n">\n</span> (例如每四个字符 t 添加 <span class="token entity" title="\n">\n</span>)
sed '</span>s/.<span class="token punctuation">\</span><span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">\</span><span class="token punctuation">}</span>/<span class="token operator">&amp;</span><span class="token punctuation">\</span>n/g<span class="token string">'
使用分隔符和下一行 连接 / 结合 / 合并文件。例如 (用「,」去分割)
sed -s '</span><span class="token variable">$a</span>,<span class="token string">' *.json &gt; all.json
替换 (例如用 B 去替换 A)
sed '</span>s/A/B/g<span class="token string">' filename
使用通配符进行替换 (例如 aaa = 开头的行替换成 aaa=/my/new/path)
sed &quot;s/aaa=.*/aaa=\/my\/new\/path/g&quot;
选择以字符串开头的行 (例如 bbo)
sed -n '</span>/^@S/p<span class="token string">'
删除带有字符串的行
sed '</span>/bbo/d<span class="token string">' filename
打印 / 获取 / 截取一定范围内的行 (例如 500-5000 之间)
sed -n 500,5000p filename
每 n 行打印一次
sed -n '</span><span class="token number">0</span>~3p<span class="token string">' filename

# catch 0: start; 3: step
打印所有奇数行
sed -n '</span><span class="token number">1</span>~2p<span class="token string">'
每隔三行打印一次，包括第一行
sed -n '</span>1p<span class="token punctuation">;</span><span class="token number">0</span>~3p<span class="token string">'
删除前导空格和制表符
sed -e '</span>s/^<span class="token punctuation">[</span> <span class="token punctuation">\</span>t<span class="token punctuation">]</span>*//<span class="token string">'
# Notice a whitespace before '</span><span class="token punctuation">\</span>t<span class="token string">'!!
只删除前导空格
sed '</span>s/ *//<span class="token string">'

# 注意'</span>*<span class="token string">'前的空格!!
删除结尾逗号
sed '</span>s/,$//g<span class="token string">'
在结尾添加一列
sed &quot;s/$/<span class="token entity" title="\t">\t</span><span class="token variable">$i</span>/&quot;
# <span class="token variable">$i</span> 是你要添加的值

# 将文件名添加到文件的最后一列
for i in <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span><span class="token variable">)</span></span>;do sed -i &quot;s/$/<span class="token entity" title="\t">\t</span><span class="token variable">$i</span>/&quot; <span class="token variable">$i</span>;done
将文件的扩展名添加到最后一列
for i in T000086_1.02.n T000086_1.02.p;do sed &quot;s/$/<span class="token entity" title="\t">\t</span><span class="token variable">${i<span class="token operator">/</span>*.<span class="token operator">/</span>}</span>/&quot; <span class="token variable">$i</span>;done &gt;T000086_1.02.np
删除换行符
sed '</span>:a<span class="token punctuation">;</span>N<span class="token punctuation">;</span><span class="token variable">$!</span>ba<span class="token punctuation">;</span>s/<span class="token punctuation">\</span>n//g<span class="token string">'
打印某一行 (例如：第 123 行)
sed -n -e '</span>123p<span class="token string">'
打印若干行 (例如：第 10 行到第 33 行)
sed -n '</span><span class="token number">10</span>,33p<span class="token string">' &lt;filename
改变分隔符
sed '</span>s<span class="token operator">=</span>/<span class="token operator">=</span><span class="token punctuation">\</span><span class="token punctuation">\</span>/<span class="token operator">=</span>g<span class="token string">'
使用通配符替换 (例如: A-1-e 、 A-2-e 或者 A-3-e ....)
sed '</span>s/A-.*-e//g<span class="token string">' filename
删除文件的最后一个字符
sed '</span>$ s/.$//<span class="token string">'
在文件的指定位置插入字符 (例如: AAAAAA—&gt; AAA#AAA)
sed -r -e '</span>s/^.<span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span>/<span class="token operator">&amp;</span><span class="token comment">#/' file</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Awk</p><div class="language-bash extra-class"><pre class="language-bash"><code>设置 tab 为分隔符
<span class="token function">awk</span> -F $<span class="token string">'<span class="token entity" title="\t">\t</span>'</span>
设置 tab 为输出字段分隔符
<span class="token function">awk</span> -v <span class="token assign-left variable">OFS</span><span class="token operator">=</span><span class="token string">'<span class="token entity" title="\t">\t</span>'</span>
传递变量
<span class="token assign-left variable">a</span><span class="token operator">=</span>bbo<span class="token punctuation">;</span><span class="token assign-left variable">b</span><span class="token operator">=</span>obb<span class="token punctuation">;</span>
<span class="token function">awk</span> -v <span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$a</span>&quot;</span> -v <span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$b</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$1</span>==a &amp;&amp; <span class="token variable">$10</span>=b&quot;</span> filename
输出行号和每行的字符数
<span class="token function">awk</span> <span class="token string">'{print NR,length(<span class="token variable">$0</span>);}'</span> filename
输出列数
<span class="token function">awk</span> <span class="token string">'{print NF}'</span>
调整列输出顺序
<span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>, <span class="token variable">$1</span>}'</span>
检查列中字符是否含有逗号（例如检查第一列）
<span class="token function">awk</span> <span class="token string">'<span class="token variable">$1</span>~/,/ {print}'</span>
切割字符，并循环输出
<span class="token function">awk</span> <span class="token string">'{split(<span class="token variable">$2</span>, a,&quot;,&quot;);for (i in a) print <span class="token variable">$1</span>&quot;<span class="token entity" title="\t">\t</span>&quot;a[i]}'</span> filename
在某个字符出现次数少于 N 次时，打印数据 <span class="token punctuation">(</span>例如在 bbo 出现 <span class="token number">7</span> 次之后，停止输出数据<span class="token punctuation">)</span>
<span class="token function">awk</span> -v <span class="token assign-left variable">N</span><span class="token operator">=</span><span class="token number">7</span> <span class="token string">'{print}/bbo/&amp;&amp; --N&lt;=0 {exit}'</span>
输出目录下所有为文件名和每个文件的最后一行
<span class="token function">ls</span><span class="token operator">|</span><span class="token function">xargs</span> -n1 -I <span class="token function">file</span> <span class="token function">awk</span> <span class="token string">'{s=<span class="token variable">$0</span>};END{print FILENAME,s}'</span> <span class="token function">file</span>
在列的前面加字符 （例如在第三列前面加 “chr”）
<span class="token function">awk</span> <span class="token string">'BEGIN{OFS=&quot;<span class="token entity" title="\t">\t</span>&quot;}<span class="token variable">$3</span>=&quot;chr&quot;<span class="token variable">$3</span>'</span>
删除含有字符的行 <span class="token punctuation">(</span>例如删除含有 bbo 的行<span class="token punctuation">)</span>
<span class="token function">awk</span> <span class="token string">'!/bbo/'</span> <span class="token function">file</span>
删除最后一列
<span class="token function">awk</span> <span class="token string">'NF{NF-=1};1'</span> <span class="token function">file</span>
NR 和 FNR 的用法
<span class="token comment"># 例如以下2个文件:</span>
<span class="token comment"># fileA:</span>
<span class="token comment"># a</span>
<span class="token comment"># b</span>
<span class="token comment"># c</span>
<span class="token comment"># fileB:</span>
<span class="token comment"># d</span>
<span class="token comment"># e</span>
<span class="token function">awk</span> <span class="token string">'print FILENAME, NR,FNR,<span class="token variable">$0</span>}'</span> fileA fileB
<span class="token comment"># fileA    1    1    a</span>
<span class="token comment"># fileA    2    2    b</span>
<span class="token comment"># fileA    3    3    c</span>
<span class="token comment"># fileB    4    1    d</span>
<span class="token comment"># fileB    5    2    e</span>
逻辑与
<span class="token comment"># 比如下面这两个文件:</span>
<span class="token comment"># 文件 A:</span>
<span class="token comment"># 1    0</span>
<span class="token comment"># 2    1</span>
<span class="token comment"># 3    1</span>
<span class="token comment"># 4    0</span>
<span class="token comment"># 文件 B:</span>
<span class="token comment"># 1    0</span>
<span class="token comment"># 2    1</span>
<span class="token comment"># 3    0</span>
<span class="token comment"># 4    1</span>

<span class="token function">awk</span> -v <span class="token assign-left variable">OFS</span><span class="token operator">=</span><span class="token string">'<span class="token entity" title="\t">\t</span>'</span> <span class="token string">'NR=FNR{a[<span class="token variable">$1</span>]=<span class="token variable">$2</span>;next} NF {print <span class="token variable">$1</span>,((a[<span class="token variable">$1</span>]=<span class="token variable">$2</span>)? <span class="token variable">$2</span>:&quot;0&quot;)}'</span> fileA 文件 B
<span class="token comment"># 1    0</span>
<span class="token comment"># 2    1</span>
<span class="token comment"># 3    0</span>
<span class="token comment"># 4    0</span>
将文件中所有的数字进行四舍五入操作
<span class="token function">awk</span> <span class="token string">'{while (match(<span class="token variable">$0</span>, /[0-9]+\[0-9]+/)){
    \printf &quot;%s%.2f&quot;, substr(<span class="token variable">$0</span>,0,RSTART-1),substr(<span class="token variable">$0</span>,RSTART,RLENGTH)
    \<span class="token variable">$0</span>=substr(<span class="token variable">$0</span>, RSTART+RLENGTH)
    \}
    \print
    \}'</span>
给每一行编码 / 索引
<span class="token function">awk</span> <span class="token string">'{printf(&quot;%s<span class="token entity" title="\t">\t</span>%s<span class="token entity" title="\n">\n</span>&quot;,NR,<span class="token variable">$0</span>)}'</span>
将列数据分解为行
<span class="token comment">#例如分开一下内容:</span>
<span class="token comment"># David    cat,dog</span>
<span class="token comment"># into</span>
<span class="token comment"># David    cat</span>
<span class="token comment"># David    dog</span>

<span class="token function">awk</span> <span class="token string">'{split(<span class="token variable">$2</span>,a,&quot;,&quot;);for(i in a)print <span class="token variable">$1</span>&quot;<span class="token entity" title="\t">\t</span>&quot;a[i]}'</span> <span class="token function">file</span>

<span class="token comment"># 详情介绍请点击这里:　http://stackoverflow.com/questions/33408762/bash-turning-single-comma-separated-column-into-multi-line-string</span>
平均一个文件 <span class="token punctuation">(</span>每一行只能包含一个数字<span class="token punctuation">)</span>
<span class="token function">awk</span> <span class="token string">'{s+=<span class="token variable">$1</span>}END{print s/NR}'</span>
以字符串开始打印字段 <span class="token punctuation">(</span>例如 Linux<span class="token punctuation">)</span>
<span class="token function">awk</span> <span class="token string">'<span class="token variable">$1</span> ~ /^Linux/'</span>
排序一行数字 <span class="token punctuation">(</span>例如 <span class="token number">1</span> <span class="token number">40</span> <span class="token number">35</span> <span class="token number">12</span> <span class="token number">23</span> --<span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token number">12</span> <span class="token number">23</span> <span class="token number">35</span> <span class="token number">40</span><span class="token punctuation">)</span>
<span class="token function">awk</span> <span class="token string">' {split( <span class="token variable">$0</span>, a, &quot;<span class="token entity" title="\t">\t</span>&quot; ); asort( a ); for( i = 1; i &lt;= length(a); i++ ) printf( &quot;%s<span class="token entity" title="\t">\t</span>&quot;, a[i] ); printf( &quot;<span class="token entity" title="\n">\n</span>&quot; ); }'</span>
减去之前的行值 <span class="token punctuation">(</span>column6，它等于 column4 减去最后一列 <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token function">awk</span> <span class="token string">'{<span class="token variable">$6</span> = <span class="token variable">$4</span> - prev5; prev5 = <span class="token variable">$5</span>; print;}'</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Xargs</p><div class="language-bash extra-class"><pre class="language-bash"><code>将选项卡设置为分隔符 <span class="token punctuation">(</span>默认：空格<span class="token punctuation">)</span>
<span class="token function">xargs</span> -d<span class="token punctuation">\</span>t
每行显示三个项目
<span class="token builtin class-name">echo</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span><span class="token operator">|</span> <span class="token function">xargs</span> -n <span class="token number">3</span>
<span class="token comment"># 1 2 3</span>
<span class="token comment"># 4 5 6</span>
提示在执行之前
<span class="token builtin class-name">echo</span> a b c <span class="token operator">|</span><span class="token function">xargs</span> -p -n <span class="token number">3</span>
打印命令和输出
<span class="token function">xargs</span> -t abcd
<span class="token comment"># bin/echo abcd</span>
<span class="token comment"># abcd</span>
查找且删除
<span class="token function">find</span> <span class="token builtin class-name">.</span> -name <span class="token string">&quot;*.html&quot;</span><span class="token operator">|</span><span class="token function">xargs</span> <span class="token function">rm</span>

<span class="token comment"># when using a backtick</span>
<span class="token function">rm</span> <span class="token variable"><span class="token variable">`</span><span class="token function">find</span> <span class="token builtin class-name">.</span> -name <span class="token string">&quot;*.html&quot;</span><span class="token variable">`</span></span>
删除文件名中有空格的文件 <span class="token punctuation">(</span>例如 「hello <span class="token number">2001</span>」<span class="token punctuation">)</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> -name <span class="token string">&quot;*.c&quot;</span> -print0<span class="token operator">|</span><span class="token function">xargs</span> -0 <span class="token function">rm</span> -rf
显示限制
<span class="token function">xargs</span> --show-limits
从文件夹中移除文件
<span class="token function">find</span> <span class="token builtin class-name">.</span> -name <span class="token string">&quot;*.bak&quot;</span> -print <span class="token number">0</span><span class="token operator">|</span><span class="token function">xargs</span> -0 -I <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token function">mv</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> ~/old

<span class="token comment"># or</span>
<span class="token function">find</span> <span class="token builtin class-name">.</span> -name <span class="token string">&quot;*.bak&quot;</span> -print <span class="token number">0</span><span class="token operator">|</span><span class="token function">xargs</span> -0 -I <span class="token function">file</span> <span class="token function">mv</span> <span class="token function">file</span> ~/old
将第 <span class="token number">100</span> 个文件移到另一个目录
<span class="token function">ls</span> <span class="token operator">|</span><span class="token function">head</span> -100<span class="token operator">|</span><span class="token function">xargs</span> -I <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token function">mv</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> d1
平行
<span class="token function">time</span> <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">}</span> <span class="token operator">|</span><span class="token function">xargs</span> -n <span class="token number">1</span> -P <span class="token number">5</span> <span class="token function">sleep</span>

<span class="token comment"># a lot faster than:</span>
<span class="token function">time</span> <span class="token builtin class-name">echo</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">}</span> <span class="token operator">|</span><span class="token function">xargs</span> -n1 <span class="token function">sleep</span>
将所有文件从 A 复制到 B
<span class="token function">find</span> /dir/to/A -type f -name <span class="token string">&quot;*.py&quot;</span> -print <span class="token number">0</span><span class="token operator">|</span> <span class="token function">xargs</span> -0 -r -I <span class="token function">file</span> <span class="token function">cp</span> -v -p <span class="token function">file</span> --target-directory<span class="token operator">=</span>/path/to/B

<span class="token comment"># v: verbose|</span>
<span class="token comment"># p: keep detail (e.g. owner)</span>
<span class="token function">sed</span> 相关
<span class="token function">ls</span> <span class="token operator">|</span><span class="token function">xargs</span> -n1 -I <span class="token function">file</span> <span class="token function">sed</span> -i <span class="token string">'/^Pos/d'</span> filename
在文件的第一行增加文件的名称
<span class="token function">ls</span> <span class="token operator">|</span><span class="token function">sed</span> <span class="token string">'s/.txt//g'</span><span class="token operator">|</span><span class="token function">xargs</span> -n1 -I <span class="token function">file</span> <span class="token function">sed</span> -i -e <span class="token string">'1 i\&gt;file\' file.txt
统计所有的文件
ls |xargs -n1 wc -l
将输出变成一行
ls -l| xargs
对目录中的文件进行统计
echo mso{1..8}|xargs -n1 bash -c '</span><span class="token builtin class-name">echo</span> -n <span class="token string">&quot;<span class="token variable">$1</span>:&quot;</span><span class="token punctuation">;</span> <span class="token function">ls</span> -la <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span><span class="token operator">|</span> <span class="token function">grep</span> -w <span class="token number">74</span> <span class="token operator">|</span><span class="token function">wc</span> -l<span class="token string">' --
# &quot;--&quot; 信号选项结束，并进一步进行选项的处理
计算所有文件中的行数，也统计总行数。
ls|xargs wc -l
Xargs 以及 grep 命令
cat grep_list |xargs -I{} grep {} filename
Xargs 和 sed 命令 (将所有旧的 ip 地址替换成在 etc 文件下面新的 ip 地址)
grep -rl '</span><span class="token number">192.168</span>.1.111<span class="token string">' /etc | xargs sed -i '</span>s/192.168.1.111/192.168.2.111/g'
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Find（查询）</p><div class="language-bash extra-class"><pre class="language-bash"><code>列出当前目录中的所有子目录 / 文件
<span class="token function">find</span> <span class="token builtin class-name">.</span>
列出当前目录下的所有文件
<span class="token function">find</span> <span class="token builtin class-name">.</span> -type f
列出当前文件下的所有目录
<span class="token function">find</span> <span class="token builtin class-name">.</span> -type d
编辑当前目录下的所有文件（例如，将 “www” 替换为 “ww”）
<span class="token function">find</span> <span class="token builtin class-name">.</span> -name <span class="token string">'*.php'</span> -exec <span class="token function">sed</span> -i <span class="token string">'s/www/w/g'</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span>

<span class="token comment"># 如果没有子目录</span>
replace <span class="token string">&quot;www&quot;</span> <span class="token string">&quot;w&quot;</span> -- *
<span class="token comment"># a space before *</span>
查询文件 并 打印文件名（例如 “mso”）
<span class="token function">find</span> mso*/ -name M* -printf <span class="token string">&quot;%f<span class="token entity" title="\n">\n</span>&quot;</span>
查找 并 删除 文件大小 小于（例如 <span class="token number">74</span> 字节）的文件
<span class="token function">find</span> <span class="token builtin class-name">.</span> -name <span class="token string">&quot;*.mso&quot;</span> -size -74c -delete

<span class="token comment"># M 代表 MB, 等等</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Condition and loop (条件与循环)</p><div class="language-bash extra-class"><pre class="language-bash"><code>If 语句
<span class="token comment"># 使用 if 和 else 来进行条件判断 </span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$c</span>&quot;</span> <span class="token operator">==</span> <span class="token string">&quot;read&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token assign-left variable">outputdir</span><span class="token operator">=</span><span class="token string">&quot;seq&quot;</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token assign-left variable">outputdir</span><span class="token operator">=</span><span class="token string">&quot;write&quot;</span> <span class="token punctuation">;</span> <span class="token keyword">fi</span>

<span class="token comment"># 判断myfile是否包含字符串“test”</span>
<span class="token keyword">if</span> <span class="token function">grep</span> -q hello myfile<span class="token punctuation">;</span> <span class="token keyword">then</span> …

<span class="token comment"># 判断mydir 是否是一个目录, 修改 mydir 的内容 并且 执行其他操作:</span>
<span class="token keyword">if</span> <span class="token builtin class-name">cd</span> mydir<span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">'some content'</span> <span class="token operator">&gt;</span>myfile
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span> <span class="token string">&quot;Fatal error. This script requires mydir.&quot;</span>
<span class="token keyword">fi</span>

<span class="token comment"># 判断 variable(变量)  是否为空</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -s <span class="token string">&quot;myvariable&quot;</span> <span class="token punctuation">]</span>
<span class="token comment">#返回指定对象的长度  如果是 &quot;字符串&quot;  返回 0.</span>

<span class="token comment"># 判断文件是否存在</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -e <span class="token string">'filename'</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;file exists!&quot;</span>
<span class="token keyword">fi</span>

<span class="token comment"># 判断 myfile 文件是否存在   或者  myfile 连接是否存在 </span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> -e myfile <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span> -L myfile <span class="token punctuation">]</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;file exists!&quot;</span>
<span class="token keyword">fi</span>

<span class="token comment"># 判断 变量 x  是否大于 等于 5</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$x</span>&quot;</span> -ge <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> …

<span class="token comment">#  在 bash/ksh/zsh 中 判断 变量 x 是否大于等于 5,:</span>
<span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span>x <span class="token operator">&gt;=</span> <span class="token number">5</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span> …

<span class="token comment"># 使用  (( ))(双括号) 进行数学运算  将u+2的计算结果赋值给  j </span>
<span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span>j<span class="token operator">==</span>u<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">))</span></span>

<span class="token comment"># 使用 [[ ]](双中括号)  进行数值比较   在[[]] 中 会将 特殊符号 自动转换为 比较符号 （例如  = 转换为 == ）  </span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable">$age</span> -gt <span class="token number">21</span> <span class="token punctuation">]</span><span class="token punctuation">]</span>
More <span class="token keyword">if</span> commands

For 语法
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span><span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token function">file</span> <span class="token variable">$i</span><span class="token punctuation">;</span><span class="token keyword">done</span>
<span class="token comment">#或者</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> *<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token function">file</span> <span class="token variable">$i</span><span class="token punctuation">;</span> <span class="token keyword">done</span>

<span class="token comment"># 按任意键继续执行遍历</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> tpc_stats_0925.log <span class="token operator">|</span><span class="token function">grep</span> failed<span class="token operator">|</span><span class="token function">grep</span> -o <span class="token string">'\query\w\{1,2\}'</span><span class="token variable">)</span></span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token function">cat</span> <span class="token variable">${i}</span>.log<span class="token punctuation">;</span> <span class="token builtin class-name">read</span> -rsp $<span class="token string">'Press any key to continue...<span class="token entity" title="\n">\n</span>'</span> -n1 key<span class="token punctuation">;</span><span class="token keyword">done</span>

<span class="token comment"># 当按下一个键会逐行打印文件</span>
<span class="token assign-left variable">oifs</span><span class="token operator">=</span><span class="token string">&quot;<span class="token environment constant">$IFS</span>&quot;</span><span class="token punctuation">;</span> <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span>$<span class="token string">'<span class="token entity" title="\n">\n</span>'</span><span class="token punctuation">;</span> <span class="token keyword">for</span> <span class="token for-or-select variable">line</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> myfile<span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token punctuation">..</span>.<span class="token punctuation">;</span> <span class="token keyword">done</span>
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> -r line<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token punctuation">..</span>.<span class="token punctuation">;</span> <span class="token keyword">done</span> <span class="token operator">&lt;</span>myfile

<span class="token comment"># If only one word a line, simply （ 遍历文件内容 一行一行的遍历）</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">line</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> myfile<span class="token variable">)</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$line</span><span class="token punctuation">;</span> <span class="token builtin class-name">read</span> -n1<span class="token punctuation">;</span> <span class="token keyword">done</span>

<span class="token comment">#遍历一个数组</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">${arrayName<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span><span class="token keyword">done</span>
While 语句，
<span class="token comment"># 文件的列减法 (例如 a 3 columns file)</span>
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> a b c<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span>$c<span class="token operator">-</span>$b<span class="token variable">))</span></span><span class="token punctuation">;</span><span class="token keyword">done</span> <span class="token operator">&lt;</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token function">head</span> filename<span class="token punctuation">)</span>
<span class="token comment">#在两个 &quot;&lt;&quot; 的中间有个空格 </span>

<span class="token comment"># 汇总 列 减法</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> a b c<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">+</span><span class="token operator">=</span>$c<span class="token operator">-</span>$b<span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span> <span class="token keyword">done</span> <span class="token operator">&lt;</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token function">head</span> filename<span class="token punctuation">)</span>

<span class="token comment"># 继续检查正在运行的进程（例如perl），并在启动后立即启动另一个新进程（例如python）。 （最好使用wait命令！Ctrl + F &quot; wait&quot;）</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span>pidof perl<span class="token variable">)</span></span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token builtin class-name">echo</span> f<span class="token punctuation">;</span><span class="token function">sleep</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">done</span> <span class="token operator">&amp;&amp;</span> python timetorunpython.py
switch <span class="token punctuation">(</span>case <span class="token keyword">in</span> <span class="token function">bash</span><span class="token punctuation">)</span>
<span class="token builtin class-name">read</span> <span class="token builtin class-name">type</span><span class="token punctuation">;</span>
<span class="token keyword">case</span> <span class="token variable">$type</span> <span class="token keyword">in</span>
  <span class="token string">'0'</span><span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> <span class="token string">'how'</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token string">'1'</span><span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> <span class="token string">'are'</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token string">'2'</span><span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> <span class="token string">'you'</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">变量</p><div class="language-bash extra-class"><pre class="language-bash"><code>引号内变量解析
<span class="token comment"># foo=bar</span>
 <span class="token builtin class-name">echo</span> <span class="token string">&quot;'<span class="token variable">$foo</span>'&quot;</span>
<span class="token comment">#'bar'</span>
<span class="token comment"># 单引号/双引号  quotes around single quotes make the inner single quotes expand variables（在单引号内使用变量 变量会被解析）</span>
获取变量长度
<span class="token assign-left variable">var</span><span class="token operator">=</span><span class="token string">&quot;some string&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${<span class="token operator">#</span>var}</span>
<span class="token comment"># 11</span>
获取变量的第一个字节
<span class="token assign-left variable">var</span><span class="token operator">=</span>string
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${var<span class="token operator">:</span>0<span class="token operator">:</span>1}</span>&quot;</span>
<span class="token comment">#s</span>

<span class="token comment"># or</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${var<span class="token operator">%%</span>&quot;${var<span class="token operator">#</span>?}</span><span class="token string">&quot;}
从第一位 或最后一位 开始删除变量中的 n 个字节
var=&quot;</span>some string&quot;
<span class="token builtin class-name">echo</span> <span class="token variable">${var<span class="token operator">:</span>2}</span>
<span class="token comment">#me string</span>
替换 <span class="token punctuation">(</span>例如。删除第一个位置的 <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token assign-left variable">var</span><span class="token operator">=</span><span class="token string">&quot;0050&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">${var<span class="token punctuation">[</span>@<span class="token punctuation">]</span><span class="token operator">#</span>0}</span>
<span class="token comment">#050</span>
替换所有 <span class="token punctuation">(</span>例如。将 字符 <span class="token string">&quot;a&quot;</span> 替换为 字符 <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>var/a/,<span class="token punctuation">}</span>
<span class="token comment"># 使用 grep </span>
 <span class="token assign-left variable">test</span><span class="token operator">=</span><span class="token string">&quot;god the father&quot;</span>
 <span class="token function">grep</span> <span class="token variable">${test<span class="token operator">/</span><span class="token operator">/</span> <span class="token operator">/</span>\\\|}</span> file.txt
 <span class="token comment"># turning the space into 'or' (\|) in grep （在grep 的空间中将 替换   or 和 (\|) ）</span>
将变量中的字符串改为小写（参数扩展）
<span class="token assign-left variable">var</span><span class="token operator">=</span>HelloWorld
<span class="token builtin class-name">echo</span> <span class="token variable">${var<span class="token operator">,,</span>}</span>
helloworld
Expand and <span class="token keyword">then</span> execute variable/argument （先执行脚本进行赋值 再输出变量内容）
<span class="token assign-left variable">cmd</span><span class="token operator">=</span><span class="token string">&quot;bar=foo&quot;</span>
<span class="token builtin class-name">eval</span> <span class="token string">&quot;<span class="token variable">$cmd</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$bar</span>&quot;</span> <span class="token comment"># foo</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">数学</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">bash</span> 中的算术展开 <span class="token punctuation">(</span>运算符: +, -, *, /, %, 等等<span class="token punctuation">)</span>
<span class="token comment">#总结： a++ 先运算a，后a的值加1；++a，则相反，先加一，再参与运算。同理a--,与--a</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token number">5</span> <span class="token variable">))</span></span>  <span class="token comment">#15</span>
<span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span> x<span class="token operator">++</span> <span class="token variable">))</span></span> <span class="token comment">#1 , 注意它仍然是1，因为它是后递增的</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span> x<span class="token operator">++</span> <span class="token variable">))</span></span> <span class="token comment">#2</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span> <span class="token operator">++</span>x <span class="token variable">))</span></span> <span class="token comment">#4 , 注意，它不是3，因为它是预增量</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span> x<span class="token operator">--</span> <span class="token variable">))</span></span> <span class="token comment">#4</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span> x<span class="token operator">--</span> <span class="token variable">))</span></span> <span class="token comment">#3</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span> <span class="token operator">--</span>x <span class="token variable">))</span></span> <span class="token comment">#1</span>
<span class="token assign-left variable">x</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token assign-left variable">y</span><span class="token operator">=</span><span class="token number">3</span>
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span> x <span class="token operator">**</span> y <span class="token variable">))</span></span> <span class="token comment">#8</span>
打印出一个数的质因数 <span class="token punctuation">(</span>比如： <span class="token number">50</span><span class="token punctuation">)</span>
factor <span class="token number">50</span>
用于产生从某个数到另外一个数之间的所有整数。 <span class="token punctuation">(</span>比如： <span class="token function">seq</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token function">seq</span> <span class="token number">10</span><span class="token operator">|</span><span class="token function">paste</span> -sd+<span class="token operator">|</span><span class="token function">bc</span>
汇总一个文件（文件中每行仅包含一个数字）
<span class="token function">awk</span> <span class="token string">'{s+=<span class="token variable">$1</span>} END {print s}'</span> filename
列减法
<span class="token function">cat</span> <span class="token function">file</span><span class="token operator">|</span> <span class="token function">awk</span> -F <span class="token string">'<span class="token entity" title="\t">\t</span>'</span> <span class="token string">'BEGIN {SUM=0}{SUM+=<span class="token variable">$3</span>-<span class="token variable">$2</span>}END{print SUM}'</span>
用 <span class="token function">expr</span> 进行简单数学运算
<span class="token function">expr</span> <span class="token number">10</span>+20 <span class="token comment">#30</span>
<span class="token function">expr</span> <span class="token number">10</span><span class="token punctuation">\</span>*20 <span class="token comment">#600</span>
<span class="token function">expr</span> <span class="token number">30</span> <span class="token punctuation">\</span><span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token comment">#1 (true)</span>
更多关于 BC 的数学运算
<span class="token comment"># 小数位数/有效数字</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;scale=2;2/3&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span>
<span class="token comment">#.66</span>

<span class="token comment"># 指数运算符</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;10^2&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span>
<span class="token comment">#100</span>

<span class="token comment"># 使用变量</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;var=5;--var&quot;</span><span class="token operator">|</span> <span class="token function">bc</span>
<span class="token comment">#4</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Time</p><div class="language-bash extra-class"><pre class="language-bash"><code>返回执行命令所需的时间
<span class="token function">time</span> <span class="token builtin class-name">echo</span> hi
等待一段时间（例如 <span class="token number">10</span> 秒）
<span class="token function">sleep</span> <span class="token number">10</span>
在一段时间后注销你的帐户（例如 <span class="token number">10</span> 秒）
<span class="token assign-left variable">TMOUT</span><span class="token operator">=</span><span class="token number">10</span>
<span class="token comment"># 一旦你设置了这个变量，注销计时器开始运行！</span>
设置您要运行命令的时长
<span class="token comment"># 仅仅运行 `sleep 10` 一秒。</span>
<span class="token function">timeout</span> <span class="token number">1</span> <span class="token function">sleep</span> <span class="token number">10</span>
设置何时要运行命令（例如，从现在开始 <span class="token number">1</span> 分钟）
at now + 1min  <span class="token comment"># 时间单位可以是 minutes, hours, days, 或 weeks</span>
⚠️: 命令将使用 /bin/sh
at<span class="token operator">&gt;</span> <span class="token builtin class-name">echo</span> hihigithub <span class="token operator">&gt;</span>~/itworks
at<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>EOT<span class="token operator">&gt;</span>   <span class="token comment"># 按 Ctrl + D 退出</span>
job <span class="token number">1</span> at Wed Apr <span class="token number">18</span> <span class="token number">11</span>:16:00 <span class="token number">2018</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Download</p><div class="language-bash extra-class"><pre class="language-bash"><code>下载此 README.md 的内容 <span class="token punctuation">(</span>你正在看的内容<span class="token punctuation">)</span>
<span class="token function">curl</span> https://raw.githubusercontent.com/onceupon/Bash-Oneliner/master/README.md <span class="token operator">|</span> pandoc -f markdown -t <span class="token function">man</span> <span class="token operator">|</span> <span class="token function">man</span> -l -

<span class="token comment"># 或者 w3m (一种基于文本的浏览器和呼叫器)</span>
<span class="token function">curl</span> https://raw.githubusercontent.com/onceupon/Bash-Oneliner/master/README.md <span class="token operator">|</span> pandoc <span class="token operator">|</span> w3m -T text/html

<span class="token comment"># 或者使用emacs (在emac文本编辑器中)</span>
emacs --eval <span class="token string">'(org-mode)'</span> --insert <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token function">curl</span> https://raw.githubusercontent.com/onceupon/Bash-Oneliner/master/README.md <span class="token operator">|</span> pandoc -t org<span class="token punctuation">)</span>

<span class="token comment"># 或者使用 emacs (在终端上先按Ctrl+x，再按Ctrl+c退出)</span>
emacs -nw --eval <span class="token string">'(org-mode)'</span> --insert <span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token function">curl</span> https://raw.githubusercontent.com/onceupon/Bash-Oneliner/master/README.md <span class="token operator">|</span> pandoc -t org<span class="token punctuation">)</span>
从一个页面上下载全部内容
<span class="token function">wget</span> -r -l1 -H -t1 -nd -N -np -A mp3 -e <span class="token assign-left variable">robots</span><span class="token operator">=</span>off http://example.com

<span class="token comment"># -r: recursive and download all links on page递归并下载页面上所有链接</span>
<span class="token comment"># -l1: only one level link仅一级链接</span>
<span class="token comment"># -H: span host, visit other hosts跨越主机，访问其他主机</span>
<span class="token comment"># -t1: numbers of retries重试次数</span>
<span class="token comment"># -nd: don't make new directories, download to here不要创建新目录，下载到这里</span>
<span class="token comment"># -N: turn on timestamp打开时间戳</span>
<span class="token comment"># -nd: no parent没有父级</span>
<span class="token comment"># -A: type (separate by ,)类型（以，豆号分隔）</span>
<span class="token comment"># -e robots=off: ignore the robots.txt file which stop wget from crashing the site, sorry example.com忽略robots.txt文件，该文件阻止wget使网站崩溃，抱歉example.com</span>
将文件上传到 web 并下载 <span class="token punctuation">(</span>https://transfer.sh/<span class="token punctuation">)</span>
<span class="token comment">#  上传文件 (例如： filename.txt):</span>
<span class="token function">curl</span> --upload-file ./filename.txt https://transfer.sh/filename.txt
<span class="token comment"># 上面的命令将返回一个url，例如：https://transfer.sh/tG8rM/filename.txt</span>

<span class="token comment"># 接下来您可以通过以下方式下载它:</span>
<span class="token function">curl</span> https://transfer.sh/tG8rM/filename.txt -o filename.txt
下载文件（如有需要）
<span class="token assign-left variable">data</span><span class="token operator">=</span>file.txt
<span class="token assign-left variable">url</span><span class="token operator">=</span>http://www.example.com/<span class="token variable">$data</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> -s <span class="token variable">$data</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;downloading test data...&quot;</span>
    <span class="token function">wget</span> <span class="token variable">$url</span>
<span class="token keyword">fi</span>
Wget 命令获取文件名 <span class="token punctuation">(</span>当文件名很长时<span class="token punctuation">)</span>
<span class="token function">wget</span> -O filename <span class="token string">&quot;http://example.com&quot;</span>
Wget 命令 将文件保存到文件夹
<span class="token function">wget</span> -P /path/to/directory <span class="token string">&quot;http://example.com&quot;</span>
指示 <span class="token function">curl</span> 遵循任何重定向，直到到达最终目的地:
<span class="token function">curl</span> -L google.com
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">随机</p><div class="language-bash extra-class"><pre class="language-bash"><code>随机生成密码（例如，生成 <span class="token number">5</span> 个长度为 <span class="token number">13</span> 的密码）
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> pwgen
pwgen <span class="token number">13</span> <span class="token number">5</span>
<span class="token comment">#sahcahS9dah4a xieXaiJaey7xa UuMeo0ma7eic9 Ahpah9see3zai acerae7Huigh7</span>
从文件中随机选择 <span class="token number">100</span> 行
<span class="token function">shuf</span> -n <span class="token number">100</span> filename
随机排序
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> a b c d e<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token builtin class-name">echo</span> <span class="token variable">$i</span><span class="token punctuation">;</span> <span class="token keyword">done</span><span class="token operator">|</span> <span class="token function">shuf</span>
随机选择在一定范围内的数字（例如，从 <span class="token number">0</span>-100 内随机选择 <span class="token number">15</span> 个数字）
<span class="token function">shuf</span> -i <span class="token number">0</span>-100 -n <span class="token number">15</span>
产生一个随机数
<span class="token builtin class-name">echo</span> <span class="token environment constant">$RANDOM</span>
产生一个 <span class="token number">0</span>-9 内的随机数
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span>RANDOM <span class="token operator">%</span> <span class="token number">10</span><span class="token variable">))</span></span>
产生一个 <span class="token number">1</span>-10 内的随机数
<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span><span class="token punctuation">(</span>RANDOM <span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">系统</p><div class="language-bash extra-class"><pre class="language-bash"><code>跟踪服务的最新日志
journalctl -u <span class="token operator">&lt;</span>service_name<span class="token operator">&gt;</span> -f
消除僵尸进程
<span class="token comment"># 僵尸进程已经死了，所以你不能杀死它。您可以消除通过杀死其父进程。</span>
<span class="token comment"># 首先，找到僵尸进程的PID</span>
<span class="token function">ps</span> aux<span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'Z'</span>
<span class="token comment"># 接下来发现僵尸的父进程的PID</span>
pstree -p -s <span class="token operator">&lt;</span>zombie_PID<span class="token operator">&gt;</span>
<span class="token comment"># 然后你可以杀死它的父进程，你会发现僵尸进程已经不见了。</span>
<span class="token function">sudo</span> <span class="token function">kill</span> <span class="token number">9</span> <span class="token operator">&lt;</span>parent_PID<span class="token operator">&gt;</span>
显示内存使用情况
<span class="token function">free</span> -c <span class="token number">10</span> -mhs <span class="token number">1</span>
<span class="token comment"># 每隔1秒打印10次</span>
显示设备和分区的 CPU 和 IO 统计信息。
<span class="token comment">#每秒刷新一次</span>
iostat -x -t <span class="token number">1</span>
显示网络接口上的带宽使用情况（例如 enp175s0f0）
iftop -i enp175s0f0
告知系统已运行多长时间以及用户数量
<span class="token function">uptime</span>
检查是否是 root 用户运行
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token environment constant">$EUID</span>&quot;</span> -ne <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;Please run this as root&quot;</span>
        <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
更改 shell 用户 <span class="token punctuation">(</span>例如： bonnie<span class="token punctuation">)</span>
chsh -s /bin/sh bonnie
<span class="token comment"># /etc/shells: valid login shells</span>
更改 root / 虚拟 root / 监狱 <span class="token punctuation">(</span>e.g. 更改 root 为 newroot<span class="token punctuation">)</span>
<span class="token function">chroot</span> /home/newroot /bin/bash

<span class="token comment"># To exit chroot</span>
<span class="token builtin class-name">exit</span>
显示文件（例如 filename.txt）的文件状态（大小；访问、修改和更改时间等）
<span class="token function">stat</span> filename.txt
当前进程的快照
<span class="token function">ps</span> aux
显示进程树
pstree
找到的最大进程数
<span class="token function">cat</span> /proc/sys/kernel/pid_max
打印或控制内核环缓冲区
<span class="token function">dmesg</span>
查看 <span class="token function">ip</span> 地址
<span class="token variable">$ip</span> <span class="token function">add</span> show

<span class="token comment"># or</span>
<span class="token function">ifconfig</span>
打印以前和当前的 SysV 运行级别
runlevel

<span class="token comment">#或者</span>
<span class="token function">who</span> -r
改变 SysV 运行级别 <span class="token punctuation">(</span>例如修改为 <span class="token number">5</span><span class="token punctuation">)</span>
init <span class="token number">5</span>
<span class="token comment">#或者</span>
telinit <span class="token number">5</span>
在所有运行级别上显示所有可用的服务
<span class="token function">chkconfig</span> --list
<span class="token comment"># 相当于 ubntu 中 chkconfig 的 update-rc.d</span>
查看系统的版本
<span class="token function">cat</span> /etc/*-release
Linux 程序员的手册：文件系统的层次结构的说明
<span class="token function">man</span> hier
控制系统和服务管理器
<span class="token comment">#  检查 cron 的状态</span>
systemctl status cron.service

<span class="token comment">#  停止一个 cron 服务</span>
systemctl stop cron.service
任务列表
<span class="token function">jobs</span> -l
运行一个修改优先级的程序 <span class="token punctuation">(</span>例如 ./test.sh<span class="token punctuation">)</span>
<span class="token comment"># 较好的值在 -20 （最有利）到 19 之间调整</span>
<span class="token comment"># 应用程序越好，优先级越低</span>
<span class="token comment"># 默认值:10 ,默认优先级:80</span>

<span class="token function">nice</span> -10 ./test.sh
导出路径
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:~/path/you/want
让文件可执行
<span class="token function">chmod</span> +x filename
<span class="token comment"># 现在你可以执行 ./filename</span>
打印系统信息
<span class="token function">uname</span> -a

<span class="token comment"># 检查系统硬件平台 (x86-64)</span>
<span class="token function">uname</span> -i
上网
links www.google.com
增加用户，设置密码
<span class="token function">useradd</span> username
<span class="token function">passwd</span> username
编辑 <span class="token function">bash</span> 变量（例如显示整个路径）
<span class="token number">1</span><span class="token punctuation">\</span>. joe ~/.bash_profile
<span class="token number">2</span>. <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PS1</span></span><span class="token operator">=</span><span class="token string">'\u@\h:\w\$'</span>
<span class="token comment"># $PS1 是一个定义命令提示符外观和样式的变量</span>
<span class="token number">3</span><span class="token punctuation">\</span>. <span class="token builtin class-name">source</span> ~/.bash_profile
编辑环境设置 <span class="token punctuation">(</span>例如 <span class="token builtin class-name">alias</span><span class="token punctuation">)</span>
<span class="token number">1</span><span class="token punctuation">\</span>. joe ~/.bash_profile
<span class="token number">2</span>. <span class="token builtin class-name">alias</span> <span class="token assign-left variable">pd</span><span class="token operator">=</span><span class="token string">&quot;pwd&quot;</span> //no <span class="token function">more</span> need to <span class="token builtin class-name">type</span> that <span class="token string">'w'</span><span class="token operator">!</span>
<span class="token number">3</span><span class="token punctuation">\</span>. <span class="token builtin class-name">source</span> ~/.bash_profile
打印所有的别名
<span class="token builtin class-name">alias</span> -p
无别名 <span class="token punctuation">(</span>例如别名 <span class="token assign-left variable">ls</span><span class="token operator">=</span><span class="token string">'ls --color=auto'</span> 之后<span class="token punctuation">)</span>
<span class="token builtin class-name">unalias</span> <span class="token function">ls</span>
设置和取消设置 shell 选项
<span class="token comment"># 打印所有的 shell 选项</span>
<span class="token builtin class-name">shopt</span>

<span class="token comment"># 取消(或者停止)别名</span>
<span class="token builtin class-name">shopt</span> -u expand_aliases

<span class="token comment"># 设置(或者开始)别名</span>
<span class="token builtin class-name">shopt</span> -s expand_aliases
列出环境变量 <span class="token punctuation">(</span>例如 <span class="token environment constant">PATH</span><span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span>
<span class="token comment">#用冒号分隔的目录列表</span>
当前用户所有环境变量列表
<span class="token function">env</span>
Unset 环境变量 <span class="token punctuation">(</span>e.g. <span class="token builtin class-name">unset</span> 变量 <span class="token string">'MYVAR'</span><span class="token punctuation">)</span>
<span class="token builtin class-name">unset</span> MYVAR
显示区分格式
lsblk
通知系统分区表更改
partprobe
软链接到 bin
<span class="token function">ln</span> -s /path/to/program /home/usr/bin
<span class="token comment"># 必须是程序的绝对路径</span>
显示数据的十六进制视图
hexdump -C filename.class
跳转到其他节点
rsh node_name
检查端口（占用的网络端口）
<span class="token function">netstat</span> -tulpn
打印已解析的符号链接或着规范文件名
readlink filename
查找命令的类型及链接到的位置 <span class="token punctuation">(</span>e.g. python<span class="token punctuation">)</span>
<span class="token builtin class-name">type</span> python
<span class="token comment"># python 是 /usr/bin/python</span>
<span class="token comment"># 这里有5中不同的类型，使用 'type -f' 标志进行检查</span>
<span class="token comment"># 1\. alias    (shell alias)</span>
<span class="token comment"># 2\. function (shell function, 也会打印函数主体)</span>
<span class="token comment"># 3\. builtin  (shell builtin)</span>
<span class="token comment"># 4\. file     (disk file)</span>
<span class="token comment"># 5\. keyword  (shell reserved word)</span>

<span class="token comment"># 你也可以使用 `which`</span>
<span class="token function">which</span> python
<span class="token comment"># /usr/bin/python</span>
列出所有的函数名
<span class="token builtin class-name">declare</span> -F
列出目录的大小信息
<span class="token function">du</span> -hs <span class="token builtin class-name">.</span>

<span class="token comment"># or</span>
<span class="token function">du</span> -sb
复制使用权限目录
<span class="token function">cp</span> -rp /path/to/directory
储存当前目录
<span class="token function">pushd</span> <span class="token builtin class-name">.</span>

<span class="token comment"># then pop</span>
<span class="token function">popd</span>

<span class="token comment">#或着使用dirs显示当前所在目录的列表。</span>
<span class="token function">dirs</span> -l
显示磁盘使用情况
<span class="token function">df</span> -h

<span class="token comment"># 或者</span>
<span class="token function">du</span> -h

<span class="token comment">#或者</span>
<span class="token function">du</span> -sk /var/log/* <span class="token operator">|</span><span class="token function">sort</span> -rn <span class="token operator">|</span><span class="token function">head</span> -10
显示当前运行状态
runlevel
切换运行级别
init <span class="token number">3</span>

<span class="token comment">#或者</span>
telinit <span class="token number">3</span>
永久修改运行级别
<span class="token number">1</span><span class="token punctuation">\</span>. edit /etc/init/rc-sysinit.conf
<span class="token number">2</span>. <span class="token function">env</span> <span class="token assign-left variable">DEFAULT_RUNLEVEL</span><span class="token operator">=</span><span class="token number">2</span>
切换 root 用户
<span class="token function">su</span>
切换其他用户
<span class="token function">su</span> somebody
反馈用户状态信息
repquota -auvs
获取数据库中重要信息
getent database_name

<span class="token comment"># (e.g.  'passwd' 数据库)</span>
getent <span class="token function">passwd</span>
<span class="token comment"># 列出所有用户帐户（所有本地帐户和LDAP）</span>

<span class="token comment"># (e.g. 获取用户组列表)</span>
getent group
<span class="token comment"># 在 'group' 数据库保存</span>
改变文件的权限
<span class="token function">chown</span> user_name filename
<span class="token function">chown</span> -R user_name /path/to/directory/
<span class="token comment"># 改变用户组名称</span>
挂载和取消挂载
<span class="token comment"># 例如 挂载 /dev/sdb 到 /home/test</span>
<span class="token function">mount</span> /dev/sdb /home/test

<span class="token comment"># 例如 取消挂载 /home/test</span>
<span class="token function">umount</span> /home/test
列出当前挂载细节
<span class="token function">mount</span>
<span class="token comment"># 或者</span>
<span class="token function">df</span>
列出当前用户名和用户编号
<span class="token function">cat</span> /etc/passwd
获取所有的用户名
getent <span class="token function">passwd</span><span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{FS=&quot;[:]&quot;; print <span class="token variable">$1</span>}'</span>
展示所有的用户
compgen -u
展示所有组
compgen -g
展示所有的用户组
group username
显示 uid，gid，用户组
<span class="token function">id</span> username
检测当前是否是 root
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -u<span class="token variable">)</span></span> -ne <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;You are not root!&quot;</span>
    <span class="token builtin class-name">exit</span><span class="token punctuation">;</span>
<span class="token keyword">fi</span>
<span class="token comment"># 'id -u' output 0 if it's not root</span>
找出 CPU 信息
<span class="token function">more</span> /proc/cpuinfo

<span class="token comment"># 或者</span>
lscpu
为用户设置配额 <span class="token punctuation">(</span>例如磁盘软大小限制: <span class="token number">120586240</span><span class="token punctuation">;</span> 硬限制: <span class="token number">125829120</span><span class="token punctuation">)</span>
setquota username <span class="token number">120586240</span> <span class="token number">125829120</span> <span class="token number">0</span> <span class="token number">0</span> /home
显示用户配额
<span class="token function">quota</span> -v username
显示缓存中华当前库
ldconfig -p
打印共享库依赖项 <span class="token punctuation">(</span>例如 <span class="token keyword">for</span> <span class="token string">'ls'</span><span class="token punctuation">)</span>
ldd /bin/ls
检查用户登录
lastlog
编辑所有用户的路径
joe /etc/environment
<span class="token comment">#编辑这个文件</span>
显示和设置用户限制
<span class="token builtin class-name">ulimit</span> -u
哪些端口正在监听来自网络的 TCP 连接
nmap -sT -O localhost
<span class="token comment">#notice that some companies might not like you using nmap</span>
打印内核 / 处理器的数量
nproc --all
检查每一个核心状态
<span class="token number">1</span><span class="token punctuation">\</span>. <span class="token function">top</span>
<span class="token number">2</span>. press <span class="token string">'1'</span>
展示任务和 PID
<span class="token function">jobs</span> -l
列出所有正在执行服务
<span class="token function">service</span> --status-all
计划关闭服务器
<span class="token function">shutdown</span> -r +5 <span class="token string">&quot;Server will restart in 5 minutes. Please save your work.&quot;</span>
取消与预定关闭
<span class="token function">shutdown</span> -c
向所有用户广播
wall -n hihi
终止一个用户的所有进程
<span class="token function">pkill</span> -U user_name
终止程序的所有进程
<span class="token function">kill</span> -9 <span class="token variable"><span class="token variable">$(</span><span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">'program_name'</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$2</span>}'</span><span class="token variable">)</span></span>
在服务器上设置 gedit 首选项
<span class="token comment"># 你可能需要去安装以下软件:</span>

<span class="token function">apt-get</span> <span class="token function">install</span> libglib2.0-bin<span class="token punctuation">;</span>
<span class="token comment"># 或者</span>
yum <span class="token function">install</span> dconf dconf-editor<span class="token punctuation">;</span>
yum <span class="token function">install</span> dbus dbus-x11<span class="token punctuation">;</span>

<span class="token comment"># 检查列表</span>
gsettings list-recursively

<span class="token comment"># 修改一些设置</span>
gsettings <span class="token builtin class-name">set</span> org.gnome.gedit.preferences.editor highlight-current-line <span class="token boolean">true</span>
gsettings <span class="token builtin class-name">set</span> org.gnome.gedit.preferences.editor scheme <span class="token string">'cobalt'</span>
gsettings <span class="token builtin class-name">set</span> org.gnome.gedit.preferences.editor use-default-font <span class="token boolean">false</span>
gsettings <span class="token builtin class-name">set</span> org.gnome.gedit.preferences.editor editor-font <span class="token string">'Cantarell Regular 12'</span>
把用户增加到一个分组 <span class="token punctuation">(</span>例如 把用户名为「nice」的永不添加到分组「docker」, 这样此用户就可以在不用 <span class="token function">sudo</span> 的情况下运行 docker<span class="token punctuation">)</span>
<span class="token function">sudo</span> gpasswd -a <span class="token function">nice</span> docker
安装没有根目录的 python 包
<span class="token number">1</span><span class="token punctuation">\</span>. pip 安装 --用户 package_name
<span class="token number">2</span>. 你可能需要将  ~/.local/bin/ 导出到  <span class="token environment constant">PATH</span><span class="token builtin class-name">:</span> <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:~/.local/bin/
删除旧的 Linux 内核 <span class="token punctuation">(</span>当 /boot 几乎满的时候<span class="token punctuation">..</span>.<span class="token punctuation">)</span>
<span class="token number">1</span><span class="token punctuation">\</span>. <span class="token function">uname</span> -a  <span class="token comment">#检查当前内核，哪些是不能移除的</span>
<span class="token number">2</span><span class="token punctuation">\</span>. <span class="token function">sudo</span> <span class="token function">apt-get</span> purge linux-image-X.X.X-X-generic  <span class="token comment">#替代掉旧的版本</span>
更改主机名
<span class="token function">sudo</span> <span class="token function">hostname</span> your-new-name

<span class="token comment">#如果不起作用，也可以:</span>
hostnamectl set-hostname your-new-hostname
<span class="token comment"># 然后检查:</span>
hostnamectl
<span class="token comment"># 或者检查 /etc/hostname</span>

<span class="token comment"># 如果一直不工作....,编辑：</span>
/etc/sysconfig/network
/etc/sysconfig/network-scripts/ifcfg-ensxxx
<span class="token comment">#增加 主机名=&quot;你的新主机名称&quot;</span>
安装包列表
<span class="token function">apt</span> list --installed

<span class="token comment"># 或者在 Red Hat:</span>
yum list installed
检查哪个文件使设备繁忙
<span class="token function">lsof</span> /mnt/dir
当声音不工作的时候
<span class="token function">killall</span> pulseaudio
<span class="token comment"># 然后按下 Alt-F2 并输入 pulseaudio</span>
当声音不工作的时候
<span class="token function">killall</span> pulseaudio
列出关于 SCSI 设备信息列表
lsscsi
设置你自己的 DNS 服务器教程
http://onceuponmine.blogspot.tw/2017/08/se<span class="token punctuation">..</span>.

创建一个简单守护进程的教程
http://onceuponmine.blogspot.tw/2017/07/cr<span class="token punctuation">..</span>.

一个使用你的邮箱发送邮件的教程
http://onceuponmine.blogspot.tw/2017/10/se<span class="token punctuation">..</span>.

使用 telnet 去测试开放的端口，测试是否可以连接到服务器例如服务器 <span class="token punctuation">(</span><span class="token number">192.168</span>.2.106<span class="token punctuation">)</span> 端口 <span class="token punctuation">(</span><span class="token number">53</span><span class="token punctuation">)</span>
telnet <span class="token number">192.168</span>.2.106 <span class="token number">53</span>
改变网络最大可传输单位 <span class="token punctuation">(</span>mtu<span class="token punctuation">)</span> <span class="token punctuation">(</span>例如修改到 <span class="token number">9000</span><span class="token punctuation">)</span>
<span class="token function">ifconfig</span> eth0 mtu <span class="token number">9000</span>
或者正在执行的进程 pid <span class="token punctuation">(</span>例如 python<span class="token punctuation">)</span>
pidof python

<span class="token comment"># 或者</span>
<span class="token function">ps</span> aux<span class="token operator">|</span><span class="token function">grep</span> python
NTP
<span class="token comment"># Start ntp:</span>
ntpd

<span class="token comment"># 检查 ntp:</span>
ntpq -p
清除你服务器中不必要的文件
<span class="token function">sudo</span> <span class="token function">apt-get</span> autoremove
<span class="token function">sudo</span> <span class="token function">apt-get</span> clean
<span class="token function">sudo</span> <span class="token function">rm</span> -rf ~/.cache/thumbnails/*

<span class="token comment"># 删除旧的内核</span>
<span class="token function">sudo</span> dpkg --list <span class="token string">'linux-image*'</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> remove linux-image-OLDER_VERSION
增大调整根分区的大小 <span class="token punctuation">(</span>根分区是 LVM 逻辑卷<span class="token punctuation">)</span>
pvscan
lvextend -L +130G /dev/rhel/root -r
<span class="token comment"># 添加 -r 将在调整卷大小后增加到文件系统</span>
创建 UEFI 可引导 USB 驱动器 <span class="token punctuation">(</span>比如；/dev/sdc1<span class="token punctuation">)</span>
<span class="token function">sudo</span> <span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>~/path/to/isofile.iso <span class="token assign-left variable">of</span><span class="token operator">=</span>/dev/sdc1 <span class="token assign-left variable">oflag</span><span class="token operator">=</span>direct <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token number">1048576</span>
找到并删除包
<span class="token function">sudo</span> dpkg -l <span class="token operator">|</span> <span class="token function">grep</span> <span class="token operator">&lt;</span>package_name<span class="token operator">&gt;</span>
<span class="token function">sudo</span> dpkg --purge <span class="token operator">&lt;</span>package_name<span class="token operator">&gt;</span>
创建 <span class="token function">ssh</span> 隧道
<span class="token function">ssh</span> -f -L <span class="token number">9000</span>:targetservername:8088 root@192.168.14.72 -N
<span class="token comment">#-f: 在后台运行; -L: 监听; -N: 什么也不做</span>
<span class="token comment"># 你计算机的9000端口现在已经连接上了目标服务器名字192.168.14.72的8088端口</span>
<span class="token comment"># 所以你现在可以去打开浏览器输入localhost:9000去查看你的目标计算机的8088端口了</span>
获取进程的进程 ID <span class="token punctuation">(</span>比如： sublime_text<span class="token punctuation">)</span>
<span class="token comment">#pidof 获取进程id</span>
pidof sublime_text

<span class="token comment">#pgrep, 你不必键入整个程序名</span>
pgrep sublim

<span class="token comment">#pgrep, 如果找到进程，则返回1；如果没有此类进程，则返回0</span>

pgrep -q sublime_text <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token builtin class-name">echo</span> <span class="token number">0</span>

<span class="token comment">#top, 需要更长的时间</span>

<span class="token function">top</span><span class="token operator">|</span><span class="token function">grep</span> sublime_text
服务器的一些基准测试工具
aio-stress - AIO benchmark. bandwidth - memory bandwidth benchmark. bonnie++ - hard drive and <span class="token function">file</span> system performance benchmark. dbench - generate I/O workloads to either a filesystem or to a networked CIFS or NFS server. dnsperf - authorative and recursing DNS servers. filebench - model based <span class="token function">file</span> system workload generator. fio - I/O benchmark. fs_mark - synchronous/async <span class="token function">file</span> creation benchmark. httperf - measure web server performance. interbench - linux interactivity benchmark. ioblazer - multi-platform storage stack micro-benchmark. iozone - filesystem benchmark. iperf3 - measure TCP/UDP/SCTP performance. kcbench - kernel compile benchmark, compiles a kernel and measures the <span class="token function">time</span> it takes. lmbench - Suite of simple, portable benchmarks. netperf - measure network performance, <span class="token builtin class-name">test</span> unidirectional throughput, and end-to-end latency. netpipe - network protocol independent performance evaluator. nfsometer - NFS performance framework. nuttcp - measure network performance. phoronix-test-suite - comprehensive automated testing and benchmarking platform. seeker - portable disk seek benchmark. siege - http load tester and benchmark. sockperf - network benchmarking utility over socket API. spew - measures I/O performance and/or generates I/O load. stress - workload generator <span class="token keyword">for</span> POSIX systems. sysbench - scriptable database and system performance benchmark. tiobench - threaded IO benchmark. unixbench - the original BYTE UNIX benchmark suite, provide a basic indicator of the performance of a Unix-like system. wrk - HTTP benchmark.

显示上次登录用户的列表。
lastb
显示当前登录用户的列表，打印他们的信息
<span class="token function">who</span>
显示谁登录以及他们在做什么
w
打印当前登录到当前主机的用户的用户名。
<span class="token function">users</span>
在终止程序上停止跟踪一个文件
<span class="token function">tail</span> -f --pid<span class="token operator">=</span><span class="token operator">&lt;</span>PID<span class="token operator">&gt;</span> filename.txt
<span class="token comment"># 用程序的进程 ID 替换 &lt;PID&gt; </span>
列出所有已经启动的服务
systemctl list-unit-files<span class="token operator">|</span><span class="token function">grep</span> enabled
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">Xwindow</p><div class="language-bash extra-class"><pre class="language-bash"><code>X11 GUI 应用程序！如果你对纯文本的环境感到厌烦，这里有一些适合你的 GUI 工具。

启用 X11 转发，以便在服务器上使用图形应用程序。
<span class="token function">ssh</span> -X user_name@ip_address

<span class="token comment"># 或者通过 xhost 设置</span>
<span class="token comment"># --&gt; Install the following for Centos:</span>
<span class="token comment"># xorg-x11-xauth</span>
<span class="token comment"># xorg-x11-fonts-*</span>
<span class="token comment"># xorg-x11-utils</span>
小 xwindow 工具
xclock
xeyes
xcowsay
从 <span class="token function">ssh</span> 服务器中打开图片 / 图像
<span class="token number">1</span><span class="token punctuation">\</span>. <span class="token function">ssh</span> -X user_name@ip_address
<span class="token number">2</span>. <span class="token function">apt-get</span> <span class="token function">install</span> eog
<span class="token number">3</span>. eog picture.png
在服务器上观看视频
<span class="token number">1</span><span class="token punctuation">\</span>. <span class="token function">ssh</span> -X user_name@ip_address
<span class="token number">2</span>. <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mpv
<span class="token number">3</span>. mpv myvideo.mp4
在服务器上使用 gedit <span class="token punctuation">(</span>GUI 编辑<span class="token punctuation">)</span>
<span class="token number">1</span><span class="token punctuation">\</span>. <span class="token function">ssh</span> -X user_name@ip_address
<span class="token number">2</span>. <span class="token function">apt-get</span> <span class="token function">install</span> gedit
<span class="token number">3</span>. gedit filename.txt
从 <span class="token function">ssh</span> 服务器上打开 PDF
<span class="token number">1</span><span class="token punctuation">\</span>. <span class="token function">ssh</span> -X user_name@ip_address
<span class="token number">2</span>. <span class="token function">apt-get</span> <span class="token function">install</span> evince
<span class="token number">3</span>. evince filename.pdf
从 <span class="token function">ssh</span> 服务器上使用谷歌浏览器
<span class="token number">1</span><span class="token punctuation">\</span>. <span class="token function">ssh</span> -X user_name@ip_address
<span class="token number">2</span>. <span class="token function">apt-get</span> <span class="token function">install</span> libxss1 libappindicator1 libindicator7
<span class="token number">3</span>. <span class="token function">wget</span> https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
<span class="token number">4</span>. <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> -f
<span class="token number">5</span>. dpkg -i google-chrome*.deb
<span class="token number">6</span>. google-chrome
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">硬件</p><div class="language-bash extra-class"><pre class="language-bash"><code>收集和总结机器的所有硬件信息
lshw -json <span class="token operator">&gt;</span>report.json
<span class="token comment"># 其他的选项: [ -html ]  [ -short ]  [ -xml ]  [ -json ]  [ -businfo ]  [ -sanitize ] ,etc</span>
找出内存设备的细节
<span class="token function">sudo</span> dmidecode -t memory
打印 CPU 硬件细节
dmidecode -t <span class="token number">4</span>
<span class="token comment">#          类型   信息</span>
<span class="token comment">#          0   BIOS</span>
<span class="token comment">#          1   系统</span>
<span class="token comment">#          2   基板</span>
<span class="token comment">#          3   机壳</span>
<span class="token comment">#          4   处理器</span>
<span class="token comment">#          5   内存控制器</span>
<span class="token comment">#          6   内存模块</span>
<span class="token comment">#          7   缓存</span>
<span class="token comment">#          8   端口连接器</span>
<span class="token comment">#          9   系统槽</span>
<span class="token comment">#         11   OEM 字符串</span>
<span class="token comment">#         13   BIOS 语言</span>
<span class="token comment">#         15   系统事件日志</span>
<span class="token comment">#         16   物理内存数组</span>
<span class="token comment">#         17   存储设备</span>
<span class="token comment">#         18   32位内存错误</span>
<span class="token comment">#         19   存储映射地址</span>
<span class="token comment">#         20   存储设备映射地址</span>
<span class="token comment">#         21   内置定位设备</span>
<span class="token comment">#         22   便携式电池</span>
<span class="token comment">#         23   系统重置</span>
<span class="token comment">#         24   硬件安全性</span>
<span class="token comment">#         25   系统电源控制</span>
<span class="token comment">#         26   电压探头</span>
<span class="token comment">#         27   冷却装置</span>
<span class="token comment">#         28   温度探测器</span>
<span class="token comment">#         29   电流探头</span>
<span class="token comment">#         30   待外远程访问</span>
<span class="token comment">#         31   引导完整性服务</span>
<span class="token comment">#         32   系统启动</span>
<span class="token comment">#         34   管理装置</span>
<span class="token comment">#         35   管理设备组件</span>
<span class="token comment">#         36   管理设备阈值数据</span>
<span class="token comment">#         37   内存通道</span>
<span class="token comment">#         38   IPMI 设备</span>
<span class="token comment">#         39   电力供应</span>
计算硬盘数量
lsscsi<span class="token operator">|</span><span class="token function">grep</span> SEAGATE<span class="token operator">|</span><span class="token function">wc</span> -l
<span class="token comment"># 或者</span>
sg_map -i -x<span class="token operator">|</span><span class="token function">grep</span> SEAGATE<span class="token operator">|</span><span class="token function">wc</span> -l
或者硬盘的 UUID <span class="token punctuation">(</span>例如 sdb<span class="token punctuation">)</span>
blkid /dev/sdb
打印所有硬盘的详细信息
lsblk -io KNAME,TYPE,MODEL,VENDOR,SIZE,ROTA
<span class="token comment">#其中 ROTA 表示旋转设备/旋转硬盘 (1 为真, 0 为假)</span>
列出所有的 PCI <span class="token punctuation">(</span>外围设置互连<span class="token punctuation">)</span> 设备
lspci
<span class="token comment"># 列出关于 NIC 信息</span>
lspci <span class="token operator">|</span> <span class="token function">egrep</span> -i --color <span class="token string">'network|ethernet'</span>
列出所有 USB 设备
lsusb
Linux 模块
<span class="token comment"># 显示 Linux 内核中模块状态</span>
lsmod

<span class="token comment"># 从 Linux 内核中增加或者移除模块</span>
modprobe

<span class="token comment"># 或者</span>
<span class="token comment"># Remove a module</span>
rmmod

<span class="token comment"># 插入模块</span>
insmod
控制 IPMI-enabled 设备 <span class="token punctuation">(</span>e.g. BMC<span class="token punctuation">)</span>
<span class="token comment"># 远程查看服务器的电源状态</span>
ipmitool -U <span class="token operator">&lt;</span>bmc_username<span class="token operator">&gt;</span> -P <span class="token operator">&lt;</span>bmc_password<span class="token operator">&gt;</span> -I lanplus -H <span class="token operator">&lt;</span>bmc_ip_address<span class="token operator">&gt;</span> power status

<span class="token comment"># 远程开启服务器</span>
ipmitool -U <span class="token operator">&lt;</span>bmc_username<span class="token operator">&gt;</span> -P <span class="token operator">&lt;</span>bmc_password<span class="token operator">&gt;</span> -I lanplus -H <span class="token operator">&lt;</span>bmc_ip_address<span class="token operator">&gt;</span> power on

<span class="token comment"># 打开面板识别灯(默认 15秒)</span>
ipmitool chassis identify <span class="token number">255</span>

<span class="token comment">#或者服务器传感器温度</span>
ipmitool sensors <span class="token operator">|</span><span class="token function">grep</span> -i Temp

<span class="token comment"># 重置 BMC</span>
ipmitool bmc reset cold

<span class="token comment"># Prnt BMC 网络</span>
ipmitool lan print <span class="token number">1</span>

<span class="token comment"># 设置 BMC 网络</span>
ipmitool -I bmc lan <span class="token builtin class-name">set</span> <span class="token number">1</span> ipaddr <span class="token number">192.168</span>.0.55
ipmitool -I bmc lan <span class="token builtin class-name">set</span> <span class="token number">1</span> netmask <span class="token number">255.255</span>.255.0
ipmitool -I bmc lan <span class="token builtin class-name">set</span> <span class="token number">1</span> defgw ipaddr <span class="token number">192.168</span>.0.1
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">网络</p><div class="language-bash extra-class"><pre class="language-bash"><code>显示 IP 地址
<span class="token function">ip</span> a
显示路由表
<span class="token function">ip</span> r
显示 ARP 缓存 <span class="token punctuation">(</span>ARP 缓存显示你连接到的同一网络设备的 MAC 地址<span class="token punctuation">)</span>
<span class="token function">ip</span> n
增加临时 IP 地址 <span class="token punctuation">(</span>重启后重置<span class="token punctuation">)</span> <span class="token punctuation">(</span>例如 增加 <span class="token number">192.168</span>.140.3/24 到 设备 eno16777736<span class="token punctuation">)</span>
<span class="token function">ip</span> address <span class="token function">add</span> <span class="token number">192.168</span>.140.3/24 dev eno16777736
持久化网络配置的更改
<span class="token function">sudo</span> <span class="token function">vi</span> /etc/sysconfig/network-scripts/ifcfg-enoxxx
<span class="token comment"># 然后编辑字段: BOOTPROT, DEVICE, IPADDR, NETMASK, GATEWAY, DNS1 etc</span>
刷新 NetworkManager
<span class="token function">sudo</span> nmcli c reload
重新启动所有界面
<span class="token function">sudo</span> systemctl restart network.service
同时查看 hostname, OS, kernal, architecture <span class="token operator">!</span>
hostnamectl
设置主机名 <span class="token punctuation">(</span>一次设置所有临时，静态，漂亮的主机名<span class="token punctuation">)</span>
hostnamectl set-hostname <span class="token string">&quot;mynode&quot;</span>
</code></pre></div></div></div><div class="card"><div class="card-box"><p class="title">其他</p><div class="language-bash extra-class"><pre class="language-bash"><code>Bash 自动完成 <span class="token punctuation">(</span>例如 当你输入「dothis」，然后按下 「tab」, 显示「now tomorrow never」<span class="token punctuation">)</span>
更多的案例

完成 -W  <span class="token string">&quot;now tomorrow never&quot;</span> dothis
<span class="token comment"># ~$ dothis  </span>
<span class="token comment"># 从不     现在       明天</span>
<span class="token comment"># 输入「n」或者「t」之后，再次按「tab」 键以自动完成</span>
重复打印字符串 n 次 <span class="token punctuation">(</span>例如重复打印 <span class="token number">5</span> 次「hello world」<span class="token punctuation">)</span>
<span class="token builtin class-name">printf</span> <span class="token string">'hello world<span class="token entity" title="\n">\n</span>%.0s'</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">}</span>
将字符串编码为 Base64 的字符串
<span class="token builtin class-name">echo</span> <span class="token builtin class-name">test</span><span class="token operator">|</span>base64
<span class="token comment">#dGVzdAo=</span>
不要显示末尾的换行符
<span class="token assign-left variable">username</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> -n <span class="token string">&quot;bashoneliner&quot;</span><span class="token variable">`</span></span>
或者当前目录的父级目录
<span class="token function">dirname</span> <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">pwd</span><span class="token variable">`</span></span>
将一个文件复制到多个文件 <span class="token punctuation">(</span>例如复制文件 A 到文件 <span class="token punctuation">(</span>B-D<span class="token punctuation">))</span>
<span class="token function">tee</span> <span class="token operator">&lt;</span>fileA fileB fileC fileD <span class="token operator">&gt;</span>/dev/null
删除换行符或者下一行
<span class="token function">tr</span> --delete <span class="token string">'<span class="token entity" title="\n">\n</span>'</span> <span class="token operator">&lt;</span>input.txt <span class="token operator">&gt;</span>output.txt
换行
<span class="token function">tr</span> <span class="token string">'<span class="token entity" title="\n">\n</span>'</span> <span class="token string">' '</span> <span class="token operator">&lt;</span>filename
转换大写或者小写
<span class="token function">tr</span> /a-z/ /A-Z/
转换一系列的字符 <span class="token punctuation">(</span>例如 把 a-z 都转换为 a<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token string">'something'</span> <span class="token operator">|</span><span class="token function">tr</span> a-z a
<span class="token comment"># aaaaaaaaa</span>
比较两个文件 <span class="token punctuation">(</span>例如 fileA, fileB<span class="token punctuation">)</span>
<span class="token function">diff</span> fileA fileB
<span class="token comment"># a: 被增加; d:删除; c:被修改</span>

<span class="token comment"># 或者</span>
<span class="token function">sdiff</span> fileA fileB
<span class="token comment"># 文件差异的并排合并</span>
比较两个文件，删除掉尾部回车 <span class="token punctuation">(</span>例如 fileA, fileB<span class="token punctuation">)</span>
 <span class="token function">diff</span> fileA fileB --strip-trailing-cr
给文件编号 <span class="token punctuation">(</span>例如给 fileA 编号<span class="token punctuation">)</span>
<span class="token function">nl</span> fileA

<span class="token comment">#或者</span>
<span class="token function">nl</span> -nrz fileA
<span class="token comment"># add leading zeros</span>

<span class="token comment">#也可以</span>
<span class="token function">nl</span> -w1 -s <span class="token string">' '</span>
<span class="token comment"># making it simple, blank separate</span>
使用 tab 键按字段连接两个文件 <span class="token punctuation">(</span>默认连接按照文件的第一列连接，默认分隔符是空格<span class="token punctuation">)</span>
<span class="token comment"># 文件 A 和文件 B 应该有相同的行顺序</span>
<span class="token function">join</span> -t <span class="token string">'<span class="token entity" title="\t">\t</span>'</span> fileA fileB

<span class="token comment"># 使用指定字段加入 (例如 文件 A 的第三列和文件 B 的第五列)</span>
<span class="token function">join</span> -1 <span class="token number">3</span> -2 <span class="token number">5</span> fileA fileB
将两个或多个文件合并 / 粘贴到列中 <span class="token punctuation">(</span>例如 fileA, fileB, fileC<span class="token punctuation">)</span>
<span class="token function">paste</span> fileA fileB fileC
<span class="token comment"># 默认选项分开</span>
反向字符串
<span class="token builtin class-name">echo</span> <span class="token number">12345</span><span class="token operator">|</span> <span class="token function">rev</span>
读取 .gz 文件但不解压
zmore filename

<span class="token comment"># 或者</span>
zless filename
在后台运行命令，输出错误文件
some_commands  <span class="token operator">&amp;&gt;</span>log <span class="token operator">&amp;</span>

<span class="token comment"># 或者</span>
some_commands <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>log <span class="token operator">&amp;</span>

<span class="token comment"># 或者</span>
some_commands <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token operator">|</span> <span class="token function">tee</span> logfile

<span class="token comment"># 或者</span>
some_commands <span class="token operator">|&amp;</span> <span class="token function">tee</span> logfile

<span class="token comment"># 还可以</span>
some_commands <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&gt;&gt;</span>outfile
<span class="token comment">#0: 标准输入; 1: 标准输出; 2: 标准错误</span>
在后台运行多个命令
<span class="token comment"># 按顺序运行</span>
<span class="token punctuation">(</span>sleep <span class="token number">2</span><span class="token punctuation">;</span> <span class="token function">sleep</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>

<span class="token comment">#并行运行</span>
<span class="token function">sleep</span> <span class="token number">2</span> <span class="token operator">&amp;</span> <span class="token function">sleep</span> <span class="token number">3</span> <span class="token operator">&amp;</span>
即便注销也可以运行进程 <span class="token punctuation">(</span>immune to hangups, with output to a non-tty<span class="token punctuation">)</span>
<span class="token comment"># 例如即便注销也会运行 myscript.sh 脚本</span>
<span class="token function">nohup</span> <span class="token function">bash</span> myscript.sh
发送邮件
下面是邮件的内容 -a /path/to/attach_file.txt -s <span class="token string">'mail.subject'</span> me@gmail.com
<span class="token comment"># use -a flag to set send from (-a &quot;From: some@mail.tld&quot;)</span>
将 .xls 转换为 csv
xls2csv filename
附加到文件 <span class="token punctuation">(</span>例如附加 hihi 内容到指定文件<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token string">'hihi'</span> <span class="token operator">&gt;&gt;</span>filename
制造 BEEP 的声音
speaker-test -t sine -f <span class="token number">1000</span> -l1
设置 beep 声音的持续时间
<span class="token punctuation">(</span>speaker-test -t sine -f <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token variable">$!</span><span class="token punctuation">;</span><span class="token function">sleep</span> <span class="token number">0</span>.1s<span class="token punctuation">;</span><span class="token function">kill</span> -9 <span class="token variable">$pid</span>
历史记录 编辑 / 删除
~/.bash_history

<span class="token comment">#或者</span>
<span class="token function">history</span> -d <span class="token punctuation">[</span>line_number<span class="token punctuation">]</span>
与历史记录的互动
<span class="token comment"># list 5 previous command (similar to `history |tail -n 5` but wont print the history command itself)</span>
fc -l -5
或者文件最后的历史记录
<span class="token function">head</span> <span class="token operator">!</span>$
清洁屏幕 <span class="token punctuation">(</span>注：还挺好使<span class="token punctuation">)</span>
<span class="token function">clear</span>

<span class="token comment"># 或者</span>
Ctrl+l
将数据发送到上次编辑的文件
<span class="token function">cat</span> /directory/to/file
<span class="token builtin class-name">echo</span> <span class="token number">10</span><span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span><span class="token operator">!</span>$
提取 .xf
unxz filename.tar.xz
<span class="token comment"># 然后</span>
<span class="token function">tar</span> -xf filename.tar
安装 python 包
pip <span class="token function">install</span> packagename
删除当前的 <span class="token function">bash</span> 命令
Ctrl+U

<span class="token comment"># 或者</span>
Ctrl+C

<span class="token comment"># 或者</span>
Alt+Shift+<span class="token comment">#</span>
<span class="token comment"># 成为历史</span>
向历史添加一些东西 <span class="token punctuation">(</span>例如 「addmetohistory」<span class="token punctuation">)</span>
<span class="token comment"># addmetodistory</span>
<span class="token comment"># just add a &quot;#&quot; before~~</span>
睡眠一会或者稍等片刻或者安排工作
<span class="token function">sleep</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token builtin class-name">echo</span> hi
使用 <span class="token function">rsync</span> 备份
<span class="token function">rsync</span> -av filename filename.bak
<span class="token function">rsync</span> -av directory directory.bak
<span class="token function">rsync</span> -av --ignore_existing directory/ directory.bak
<span class="token function">rsync</span> -av --update directory directory.bak

<span class="token function">rsync</span> -av directory user@ip_address:/path/to/directory.bak
<span class="token comment">#跳过接收器上更新的文件 (我更喜欢这个!)</span>
一次制作所有的目录！
<span class="token function">mkdir</span> -p project/<span class="token punctuation">{</span>lib/ext,bin,src,doc/<span class="token punctuation">{</span>html,info,pdf<span class="token punctuation">}</span>,demo/stat<span class="token punctuation">}</span>
<span class="token comment"># -p: 设置为父目录</span>
<span class="token comment"># 这将制造 project/doc/html/; project/doc/info; project/lib/ext ,etc</span>
仅当另一个命令运行返回 <span class="token number">0</span> 退出状态的时候运行此命令 <span class="token punctuation">(</span>命令完成<span class="token punctuation">)</span>
<span class="token builtin class-name">cd</span> tmp/ <span class="token operator">&amp;&amp;</span> <span class="token function">tar</span> xvf ~/a.tar
仅当另一个命令运行返回非 <span class="token number">0</span> 退出状态的时候运行此命令 <span class="token punctuation">(</span>命令未完成<span class="token punctuation">)</span>
<span class="token builtin class-name">cd</span> tmp/a/b/c <span class="token operator">||</span><span class="token function">mkdir</span> -p tmp/a/b/c
提取到路径
<span class="token function">tar</span> xvf -C /path/to/directory filename.gz
使用反斜杆 <span class="token string">&quot;&quot;</span> 来中断长命令
<span class="token builtin class-name">cd</span> tmp/a/b/c <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> <span class="token operator">||</span> <span class="token punctuation">\</span>
<span class="token operator">&gt;</span>mkdir -p tmp/a/b/c
得到 <span class="token builtin class-name">pwd</span>
<span class="token assign-left variable">VAR</span><span class="token operator">=</span><span class="token environment constant">$PWD</span><span class="token punctuation">;</span> <span class="token builtin class-name">cd</span> ~<span class="token punctuation">;</span> <span class="token function">tar</span> xvf -C <span class="token variable">$VAR</span> file.tar
<span class="token comment"># PWD 必须是大写字母</span>
列出文件的类型 <span class="token punctuation">(</span>e.g./tmp/<span class="token punctuation">)</span>
<span class="token function">file</span> /tmp/
<span class="token comment"># tmp/: directory</span>
Bash 脚本
<span class="token comment">#!/bin/bash</span>
<span class="token assign-left variable">file</span><span class="token operator">=</span><span class="token variable">${1<span class="token operator">#</span>*.}</span>
<span class="token comment"># remove string before a &quot;.&quot;</span>
Python 简单的 HTTP 服务
python -m SimpleHTTPServer
<span class="token comment"># 或者你使用 python3 的时候:</span>
python3 -m http.server
读取用户输入
<span class="token builtin class-name">read</span> input
<span class="token builtin class-name">echo</span> <span class="token variable">$input</span>
生成序列 <span class="token number">1</span>-10
<span class="token function">seq</span> <span class="token number">10</span>
查找输入列表 / 文件的平均值
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">wc</span> -l filename<span class="token operator">|</span><span class="token function">cut</span> -d <span class="token string">' '</span> -f1<span class="token variable">`</span></span><span class="token punctuation">;</span> <span class="token function">cat</span> filename<span class="token operator">|</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;scale=2;(<span class="token variable"><span class="token variable">`</span><span class="token function">paste</span> -sd+<span class="token variable">`</span></span>)/&quot;</span><span class="token variable">$i</span><span class="token operator">|</span><span class="token function">bc</span>
生成所有组合 <span class="token punctuation">(</span>e.g. <span class="token number">1,2</span><span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token punctuation">{</span><span class="token number">1,2</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">1,2</span><span class="token punctuation">}</span>
<span class="token comment"># 1 1, 1 2, 2 1, 2 2</span>
生成所有组合 <span class="token punctuation">(</span>e.g. A,T,C,G<span class="token punctuation">)</span>
<span class="token builtin class-name">set</span> <span class="token operator">=</span> <span class="token punctuation">{</span>A,T,C,G<span class="token punctuation">}</span>
<span class="token assign-left variable">group</span><span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>$group<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span><span class="token keyword">do</span>
    <span class="token assign-left variable">repetition</span><span class="token operator">=</span><span class="token variable">$set</span><span class="token variable">$repetition</span><span class="token punctuation">;</span><span class="token keyword">done</span>
    <span class="token function">bash</span> -c <span class="token string">&quot;echo &quot;</span><span class="token variable">$repetition</span><span class="token string">&quot;&quot;</span>
将文件内容读取到变量
<span class="token assign-left variable">foo</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token operator">&lt;</span>test1<span class="token variable">)</span></span>
输出变量
<span class="token builtin class-name">echo</span> <span class="token variable">${<span class="token operator">#</span>foo}</span>
打印标签
<span class="token builtin class-name">echo</span> -e <span class="token string">' <span class="token entity" title="\t">\t</span> '</span>
数组
<span class="token builtin class-name">declare</span> -a <span class="token assign-left variable">array</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 或者</span>
<span class="token builtin class-name">declare</span> <span class="token assign-left variable">array</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 或者关联数组</span>
<span class="token builtin class-name">declare</span> -A <span class="token assign-left variable">array</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
发送一个目录
<span class="token function">scp</span> -r directoryname user@ip:/path/to/send
将文件分割成较小的文件
<span class="token comment"># 按行分割 (e.g. 1000 lines/smallfile)</span>
<span class="token function">split</span> -d -l <span class="token number">1000</span> largefile.txt

<span class="token comment"># 按字节分割而不会在文件间断行</span>
<span class="token function">split</span> -C <span class="token number">10</span> largefile.txt
创建大量的测试文件 <span class="token punctuation">(</span>e.g <span class="token number">100000</span> 个文件，10 字节分割<span class="token punctuation">)</span>:
<span class="token comment">#1\. 创建文件</span>
<span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/zero <span class="token assign-left variable">of</span><span class="token operator">=</span>bigfile <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1000000</span>

<span class="token comment">#2\. 将大文件拆分为100000个10字节文件</span>
 <span class="token function">split</span> -b <span class="token number">10</span> -a <span class="token number">10</span> bigfile
重命名所有文件 <span class="token punctuation">(</span>e.g. 将所有文件重命名为 ABC<span class="token punctuation">)</span>
<span class="token function">rename</span> <span class="token string">'s/ABC//'</span> *.gz
删除文件扩展名 <span class="token punctuation">(</span>e.g 删除 filename.gz 的.gz<span class="token punctuation">)</span>
<span class="token function">basename</span> filename.gz .gz

zcat filename.gz<span class="token operator">&gt;</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">basename</span> filename.gz .gz<span class="token variable">)</span></span>.unpacked
叉炸弹 <span class="token punctuation">(</span>危险命令的意思<span class="token punctuation">)</span>
<span class="token comment"># 不要在家尝试这个</span>
<span class="token comment"># 它是一个每次调用都会调用两次的函数，直到系统资源耗尽为止</span>
<span class="token comment"># 为了安全起见在前面加了一个 #,当你真正测试的时候，请移除它</span>
<span class="token comment"># :(){:|:&amp;};:</span>
将文件扩展名添加到所有文件 <span class="token punctuation">(</span>例如添加 .txt<span class="token punctuation">)</span>
<span class="token function">rename</span> s/$/.txt/ *
<span class="token comment"># 你可以使用重命名 -n s/$/.txt/ * 首先去检查结果,如果它仅仅打印这些:</span>
<span class="token comment"># rename(a, a.txt)</span>
<span class="token comment"># rename(b, b.txt)</span>
<span class="token comment"># rename(c, c.txt)</span>
使用挤压重复选项 <span class="token punctuation">(</span>例如 /t/t --<span class="token operator">&gt;</span> /t<span class="token punctuation">)</span>
<span class="token function">tr</span> -s <span class="token string">&quot;/t&quot;</span> <span class="token operator">&lt;</span> filename
不要用 <span class="token builtin class-name">echo</span> 打印 nextline
<span class="token builtin class-name">echo</span> -e <span class="token string">'text here <span class="token entity" title="\c">\c</span>'</span>
使用最后一个参数
<span class="token operator">!</span>$
检查最后一个退出代码
<span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
查看文件的前 <span class="token number">50</span> 个字符
<span class="token function">head</span> -c <span class="token number">50</span> <span class="token function">file</span>
将两行组合成一行
<span class="token comment"># 例如</span>
<span class="token comment"># AAAA</span>
<span class="token comment"># BBBB</span>
<span class="token comment"># CCCC</span>
<span class="token comment"># DDDD</span>
<span class="token function">cat</span> filename<span class="token operator">|</span><span class="token function">paste</span> - -
<span class="token comment"># AAAABBBB</span>
<span class="token comment"># CCCCDDDD</span>
<span class="token function">cat</span> filename<span class="token operator">|</span><span class="token function">paste</span> - - - -
<span class="token comment"># AAAABBBBCCCCDDDD</span>
Fastq 转 fasta
<span class="token function">cat</span> file.fastq <span class="token operator">|</span> <span class="token function">paste</span> - - - - <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/^@/&gt;/g'</span><span class="token operator">|</span> <span class="token function">cut</span> -f1-2 <span class="token operator">|</span> <span class="token function">tr</span> <span class="token string">'<span class="token entity" title="\t">\t</span>'</span> <span class="token string">'<span class="token entity" title="\n">\n</span>'</span> <span class="token operator">&gt;</span>file.fa
剪切并得到最后一列
<span class="token function">cat</span> <span class="token function">file</span><span class="token operator">|</span><span class="token function">rev</span> <span class="token operator">|</span> <span class="token function">cut</span> -d/ -f1 <span class="token operator">|</span> <span class="token function">rev</span>
在变量 / 增量 i++ 中添加一个变数字量 <span class="token punctuation">(</span>例如 <span class="token variable">$val</span><span class="token punctuation">)</span>
<span class="token variable"><span class="token punctuation">((</span>var<span class="token operator">++</span><span class="token punctuation">))</span></span>
<span class="token comment"># 或者</span>
<span class="token assign-left variable">var</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>var<span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span>
清除文件中所有内容 <span class="token punctuation">(</span>比如 filename<span class="token punctuation">)</span>
<span class="token operator">&gt;</span>filename
解压 tar.bz2 文件 <span class="token punctuation">(</span>例如解压文件 file.tar.bz2<span class="token punctuation">)</span>
<span class="token function">tar</span> xvfj file.tar.bz2
解压 tar.xz 文件 <span class="token punctuation">(</span>例如解压 file.tar.xz<span class="token punctuation">)</span>
unxz file.tar.xz
<span class="token function">tar</span> xopf file.tar
重复输出 y/n 直到终止
<span class="token comment"># 'y':</span>
<span class="token function">yes</span>

<span class="token comment"># 或者 'n':</span>
<span class="token function">yes</span> n

<span class="token comment"># 或者 'anything':</span>
<span class="token function">yes</span> anything

<span class="token comment"># 例如:</span>
``<span class="token variable"><span class="token variable">`</span><span class="token function">bash</span>
<span class="token function">yes</span> <span class="token operator">|</span> <span class="token function">rm</span> -r large_directory
立即创建一定大小的虚拟文件 <span class="token punctuation">(</span>例如 200mb<span class="token punctuation">)</span>
<span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/zero <span class="token assign-left variable">of</span><span class="token operator">=</span>//dev/shm/200m <span class="token assign-left variable">bs</span><span class="token operator">=</span>1024k <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">200</span>
<span class="token comment"># 或者</span>
<span class="token function">dd</span> <span class="token assign-left variable">if</span><span class="token operator">=</span>/dev/zero <span class="token assign-left variable">of</span><span class="token operator">=</span>//dev/shm/200m <span class="token assign-left variable">bs</span><span class="token operator">=</span>1M <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">200</span>

<span class="token comment"># 标准输出:</span>
<span class="token comment"># 200+0 条记录</span>
<span class="token comment"># 200+0 记录出来</span>
<span class="token comment"># 209715200 bytes (210 MB) copied, 0.0955679 s, 2.2 GB/s</span>
把文件归档
<span class="token function">cat</span> <span class="token operator">&gt;</span>myfile
让我在这补充一下
<span class="token builtin class-name">exit</span> by control + c
^C
保持重复执行同一个命令 <span class="token punctuation">(</span>例如 每一秒重复一次 <span class="token string">'wc -l filename'</span><span class="token punctuation">)</span>
<span class="token function">watch</span> -n <span class="token number">1</span> <span class="token function">wc</span> -l filename
执行时打印命令以及其参数 <span class="token punctuation">(</span>例如 <span class="token builtin class-name">echo</span> <span class="token function">expr</span> <span class="token number">10</span> + <span class="token number">20</span> <span class="token punctuation">)</span>
<span class="token builtin class-name">set</span> -x<span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">`</span></span><span class="token function">expr</span> <span class="token number">10</span> + <span class="token number">20</span> `
为你打印一些有意义的句子 <span class="token punctuation">(</span>首先安装 fortune<span class="token punctuation">)</span>
fortune
丰富多彩的 <span class="token punctuation">(</span>有用的<span class="token punctuation">)</span> <span class="token function">top</span> 版本 <span class="token punctuation">(</span>首先安装 <span class="token function">htop</span><span class="token punctuation">)</span>
<span class="token function">htop</span>
按任意键继续
<span class="token builtin class-name">read</span> -rsp $<span class="token string">'Press any key to continue...<span class="token entity" title="\n">\n</span>'</span> -n1 key
从终端中运行类似 sql 的命令
<span class="token comment"># 下载:</span>
<span class="token comment"># https://github.com/harelba/q</span>
<span class="token comment"># 例如:</span>
q -d <span class="token string">&quot;,&quot;</span> <span class="token string">&quot;select c3,c4,c5 from /path/to/file.txt where c3='foo' and c5='boo'&quot;</span>
将 Screen 用于多个终端回话
<span class="token comment"># 创建会话并附加:</span>
<span class="token function">screen</span>

<span class="token comment"># 创建分离的会话 foo:</span>
<span class="token function">screen</span> -S foo -d -m

<span class="token comment"># 独立会话 foo:</span>
screen: ^a^d

<span class="token comment"># 会话列表:</span>
<span class="token function">screen</span> -ls

<span class="token comment"># 附加到上一个会话:</span>
<span class="token function">screen</span> -r

<span class="token comment"># 附加到会话 foo:</span>
<span class="token function">screen</span> -r foo

<span class="token comment"># 杀掉会话 foo:</span>
<span class="token function">screen</span> -r foo -X quit

<span class="token comment"># 滚动:</span>
点击屏幕前缀组合 <span class="token punctuation">(</span>C-a / control+A<span class="token punctuation">)</span>,然后按下 Escape.
上下移动方向键<span class="token punctuation">(</span>↑ and ↓<span class="token punctuation">)</span>.

<span class="token comment"># 重定向屏幕中已经运行进程的输出:</span>
 <span class="token punctuation">(</span>C-a / control+A<span class="token punctuation">)</span>, <span class="token keyword">then</span> hit <span class="token string">'H'</span>

<span class="token comment"># 存储屏幕的屏幕实处:</span>
Ctrl+A, Shift+H
<span class="token comment"># 然后再当前的目录下找到 screen.log 文件</span>
使用
将 Tmux 用于多个终端回话
<span class="token comment"># 创建会话并附加:</span>
tmux

<span class="token comment"># 附加到会话 foo:</span>
tmux attach -t foo

<span class="token comment"># 分离的会话 foo:</span>
^bd

<span class="token comment"># 会话列表:</span>
tmux <span class="token function">ls</span>

<span class="token comment"># 附加上一个会话:</span>
tmux attach

<span class="token comment"># 杀死会话 foo:</span>
tmux kill-session -t foo

<span class="token comment"># 创建独立会话 foo:</span>
tmux new -s foo -d

<span class="token comment"># 将命令发送到 tmux 的所有窗格:</span>
Ctrl-B
:setw synchronize-panes

<span class="token comment"># 一些 tmux 窗格控制的命令:</span>
Ctrl-B
<span class="token comment">#   窗格 (分割), 按下 Ctrl+B，然后输入以下字符:</span>
<span class="token comment">#   %  horizontal split</span>
<span class="token comment">#   &quot;  vertical split</span>
<span class="token comment">#   o  swap panes</span>
<span class="token comment">#   q  show pane numbers</span>
<span class="token comment">#   x  kill pane</span>
<span class="token comment">#   空间 - 在布局之间进行切换</span>

<span class="token comment">#   垂直分布 (行):</span>
select-layout even-vertical
<span class="token comment">#   或者</span>
Ctrl+b, Alt+2

<span class="token comment"># 垂直分布 (列):</span>
select-layout even-horizontal
<span class="token comment">#   或者</span>
Ctrl+b, Alt+1

<span class="token comment"># Scroll</span>
Ctrl-b 然后 <span class="token punctuation">\</span><span class="token punctuation">[</span> 然后你可以使用你的正常方向键来滚动
Press q to quit scroll mode.
剪切最后一行
<span class="token function">cat</span> filename<span class="token operator">|</span><span class="token function">rev</span><span class="token operator">|</span><span class="token function">cut</span> -f1<span class="token operator">|</span><span class="token function">rev</span>
将密码传输给 <span class="token function">ssh</span>
sshpass -p mypassword <span class="token function">ssh</span> root@10.102.14.88 <span class="token string">&quot;df -h&quot;</span>
等待一个 pid <span class="token punctuation">(</span>任务<span class="token punctuation">)</span> 完成
<span class="token function">wait</span> %1
<span class="token comment"># 或者</span>
<span class="token function">wait</span> <span class="token variable">$PID</span>
<span class="token function">wait</span> <span class="token variable">${<span class="token operator">!</span>}</span>
<span class="token comment">#wait ${!} 要等待最后一个后台进程 ($! 为最后一个后台进程的 PIID)</span>
将 pdf 转换为 txt
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> poppler-utils
pdftotext example.pdf example.txt
只列出目录
<span class="token function">ls</span> -ld -- */
捕获 /j 记录 / 保存终端输出 <span class="token punctuation">(</span>捕获你输入和输出的所有内容<span class="token punctuation">)</span>
script output.txt
<span class="token comment"># 开始使用终端l</span>
<span class="token comment"># 退出屏幕会话 (停止保存内容), 退出.</span>
以树状格式列出目录的内容。
tree
<span class="token comment"># 转到要列出的目录，然后键入 tree (sudo apt-get install tree)</span>
<span class="token comment"># output:</span>
<span class="token comment"># home/</span>
<span class="token comment"># └── project</span>
<span class="token comment">#     ├── 1</span>
<span class="token comment">#     ├── 2</span>
<span class="token comment">#     ├── 3</span>
<span class="token comment">#     ├── 4</span>
<span class="token comment">#     └── 5</span>
<span class="token comment">#</span>

<span class="token comment"># 设置目录深度等级（例如1级）</span>
tree -L <span class="token number">1</span>
<span class="token comment"># home/</span>
<span class="token comment"># └── project</span>
为 Python 设置 virtualenv（sandbox）
<span class="token comment"># 1\. 安装 virtualenv.</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> virtualenv
<span class="token comment"># 2\. 为新的隔离环境建立目录（将其命名为 .venv 或您想要的任何名称）。</span>
virtualenv .venv
<span class="token comment"># 3\. 导入 virtual 执行目录</span>
<span class="token builtin class-name">source</span> .venv/bin/activate
<span class="token comment"># 4\. 您可以检查一下是否现在在沙盒中</span>
<span class="token builtin class-name">type</span> pip
<span class="token comment"># 5\. 现在您可以安装您的 pip 包, 这里的 requirements.txt 只是一个包含您想要的所有软件包的 txt 文件 (例如 tornado==4.5.3)。</span>
pip <span class="token function">install</span> -r requirements.txt
使用 json 数据
<span class="token comment"># 安装非常有用的 jq 包</span>
<span class="token comment">#sudo apt-get install jq</span>
<span class="token comment">#e.g. to get all the values of the 'url' key, simply pipe the json to the following jq command(you can use .[]. to select inner json, i.e jq '.[].url')</span>
<span class="token comment"># 例如，要获取 url 键的所有值，只需将 json 通过管道传递给以下 jq 命令（您可以使用 [] 选择内部 json，即 jq '[].url'）</span>
jq <span class="token string">'.url'</span>
编辑 <span class="token function">history</span>
<span class="token function">history</span> -w
<span class="token function">vi</span> ~/.bash_history
<span class="token function">history</span> -r
十进制转换为二进制（例如，获取 <span class="token number">5</span> 的二进制 ）
<span class="token assign-left variable">D2B</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> -e <span class="token variable">${D2B<span class="token punctuation">[</span>5<span class="token punctuation">]</span>}</span>
<span class="token comment">#00000101</span>
<span class="token builtin class-name">echo</span> -e <span class="token variable">${D2B<span class="token punctuation">[</span>255<span class="token punctuation">]</span>}</span>
<span class="token comment">#11111111</span>
把输入的行换行以适应指定的宽度 <span class="token punctuation">(</span>例如每行 <span class="token number">4</span> 个整数<span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;00110010101110001101&quot;</span> <span class="token operator">|</span> <span class="token function">fold</span> -w4
<span class="token comment"># 0011</span>
<span class="token comment"># 0010</span>
<span class="token comment"># 1011</span>
<span class="token comment"># 1000</span>
<span class="token comment"># 1101</span>
按列对文件进行排序，并保持原始顺序
<span class="token function">sort</span> -k3,3 -s
列右对齐 <span class="token punctuation">(</span>第二列右对齐<span class="token punctuation">)</span>
<span class="token function">cat</span> file.txt<span class="token operator">|</span><span class="token function">rev</span><span class="token operator">|</span><span class="token function">column</span> -t<span class="token operator">|</span><span class="token function">rev</span>
查看和存储输出
<span class="token builtin class-name">echo</span> <span class="token string">'hihihihi'</span> <span class="token operator">|</span> <span class="token function">tee</span> outputfile.txt
<span class="token comment"># tee 带 “-a” 可以附加到文件中</span>
使用 <span class="token function">cat</span> 显示非打印（Ctrl）字符
<span class="token function">cat</span> -v filename
将制表符转换为空格
<span class="token function">expand</span> filename
将空格转换为制表符
<span class="token function">unexpand</span> filename
以八进制显示文件（您也可以使用 od 显示十六进制，十进制等）
od filename
反转 <span class="token function">cat</span> 的结果
<span class="token function">tac</span> filename
反转 <span class="token function">uniq</span> -c 的结果
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> a b<span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token function">yes</span> <span class="token variable">$b</span> <span class="token operator">|</span><span class="token function">head</span> -n <span class="token variable">$a</span> <span class="token punctuation">;</span><span class="token keyword">done</span> <span class="token operator">&lt;</span>test.txt
</code></pre></div></div></div></div></div><div class="global-ui"></div></div>
    <script src="/vuepress/assets/js/app.67f1280c.js" defer></script><script src="/vuepress/assets/js/4.ebb0aeeb.js" defer></script><script src="/vuepress/assets/js/9.99ebe225.js" defer></script>
  </body>
</html>
